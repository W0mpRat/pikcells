!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.configurator=e():t.configurator=e()}(this,(function(){return function(){var t={7865:function(){Math.easeInOutQuad=function(t,e,i,n){return(t/=n/2)<1?i/2*t*t+e:-i/2*((t-=1)*(t-2)-1)+e}},9662:function(t,e,i){var n=i(614),r=i(6330),o=TypeError;t.exports=function(t){if(n(t))return t;throw o(r(t)+" is not a function")}},6077:function(t,e,i){var n=i(614),r=String,o=TypeError;t.exports=function(t){if("object"==typeof t||n(t))return t;throw o("Can't set "+r(t)+" as a prototype")}},1223:function(t,e,i){var n=i(5112),r=i(30),o=i(3070).f,s=n("unscopables"),a=Array.prototype;null==a[s]&&o(a,s,{configurable:!0,value:r(null)}),t.exports=function(t){a[s][t]=!0}},1530:function(t,e,i){"use strict";var n=i(8710).charAt;t.exports=function(t,e,i){return e+(i?n(t,e).length:1)}},5787:function(t,e,i){var n=i(7976),r=TypeError;t.exports=function(t,e){if(n(e,t))return t;throw r("Incorrect invocation")}},9670:function(t,e,i){var n=i(111),r=String,o=TypeError;t.exports=function(t){if(n(t))return t;throw o(r(t)+" is not an object")}},7556:function(t,e,i){var n=i(7293);t.exports=n((function(){if("function"==typeof ArrayBuffer){var t=new ArrayBuffer(8);Object.isExtensible(t)&&Object.defineProperty(t,"a",{value:8})}}))},8533:function(t,e,i){"use strict";var n=i(2092).forEach,r=i(9341)("forEach");t.exports=r?[].forEach:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}},8457:function(t,e,i){"use strict";var n=i(9974),r=i(6916),o=i(7908),s=i(3411),a=i(7659),c=i(4411),l=i(6244),h=i(6135),u=i(4121),d=i(1246),p=Array;t.exports=function(t){var e=o(t),i=c(this),m=arguments.length,f=m>1?arguments[1]:void 0,E=void 0!==f;E&&(f=n(f,m>2?arguments[2]:void 0));var g,T,v,R,A,I,_=d(e),O=0;if(!_||this===p&&a(_))for(g=l(e),T=i?new this(g):p(g);g>O;O++)I=E?f(e[O],O):e[O],h(T,O,I);else for(A=(R=u(e,_)).next,T=i?new this:[];!(v=r(A,R)).done;O++)I=E?s(R,f,[v.value,O],!0):v.value,h(T,O,I);return T.length=O,T}},1318:function(t,e,i){var n=i(5656),r=i(1400),o=i(6244),s=function(t){return function(e,i,s){var a,c=n(e),l=o(c),h=r(s,l);if(t&&i!=i){for(;l>h;)if((a=c[h++])!=a)return!0}else for(;l>h;h++)if((t||h in c)&&c[h]===i)return t||h||0;return!t&&-1}};t.exports={includes:s(!0),indexOf:s(!1)}},2092:function(t,e,i){var n=i(9974),r=i(1702),o=i(8361),s=i(7908),a=i(6244),c=i(5417),l=r([].push),h=function(t){var e=1==t,i=2==t,r=3==t,h=4==t,u=6==t,d=7==t,p=5==t||u;return function(m,f,E,g){for(var T,v,R=s(m),A=o(R),I=n(f,E),_=a(A),O=0,y=g||c,C=e?y(m,_):i||d?y(m,0):void 0;_>O;O++)if((p||O in A)&&(v=I(T=A[O],O,R),t))if(e)C[O]=v;else if(v)switch(t){case 3:return!0;case 5:return T;case 6:return O;case 2:l(C,T)}else switch(t){case 4:return!1;case 7:l(C,T)}return u?-1:r||h?h:C}};t.exports={forEach:h(0),map:h(1),filter:h(2),some:h(3),every:h(4),find:h(5),findIndex:h(6),filterReject:h(7)}},1194:function(t,e,i){var n=i(7293),r=i(5112),o=i(7392),s=r("species");t.exports=function(t){return o>=51||!n((function(){var e=[];return(e.constructor={})[s]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}},9341:function(t,e,i){"use strict";var n=i(7293);t.exports=function(t,e){var i=[][t];return!!i&&n((function(){i.call(null,e||function(){return 1},1)}))}},1589:function(t,e,i){var n=i(1400),r=i(6244),o=i(6135),s=Array,a=Math.max;t.exports=function(t,e,i){for(var c=r(t),l=n(e,c),h=n(void 0===i?c:i,c),u=s(a(h-l,0)),d=0;l<h;l++,d++)o(u,d,t[l]);return u.length=d,u}},206:function(t,e,i){var n=i(1702);t.exports=n([].slice)},7475:function(t,e,i){var n=i(3157),r=i(4411),o=i(111),s=i(5112)("species"),a=Array;t.exports=function(t){var e;return n(t)&&(e=t.constructor,(r(e)&&(e===a||n(e.prototype))||o(e)&&null===(e=e[s]))&&(e=void 0)),void 0===e?a:e}},5417:function(t,e,i){var n=i(7475);t.exports=function(t,e){return new(n(t))(0===e?0:e)}},3411:function(t,e,i){var n=i(9670),r=i(9212);t.exports=function(t,e,i,o){try{return o?e(n(i)[0],i[1]):e(i)}catch(e){r(t,"throw",e)}}},7072:function(t,e,i){var n=i(5112)("iterator"),r=!1;try{var o=0,s={next:function(){return{done:!!o++}},return:function(){r=!0}};s[n]=function(){return this},Array.from(s,(function(){throw 2}))}catch(t){}t.exports=function(t,e){if(!e&&!r)return!1;var i=!1;try{var o={};o[n]=function(){return{next:function(){return{done:i=!0}}}},t(o)}catch(t){}return i}},4326:function(t,e,i){var n=i(1702),r=n({}.toString),o=n("".slice);t.exports=function(t){return o(r(t),8,-1)}},648:function(t,e,i){var n=i(1694),r=i(614),o=i(4326),s=i(5112)("toStringTag"),a=Object,c="Arguments"==o(function(){return arguments}());t.exports=n?o:function(t){var e,i,n;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(i=function(t,e){try{return t[e]}catch(t){}}(e=a(t),s))?i:c?o(e):"Object"==(n=o(e))&&r(e.callee)?"Arguments":n}},5631:function(t,e,i){"use strict";var n=i(3070).f,r=i(30),o=i(9190),s=i(9974),a=i(5787),c=i(8554),l=i(408),h=i(1656),u=i(6178),d=i(6340),p=i(9781),m=i(2423).fastKey,f=i(9909),E=f.set,g=f.getterFor;t.exports={getConstructor:function(t,e,i,h){var u=t((function(t,n){a(t,d),E(t,{type:e,index:r(null),first:void 0,last:void 0,size:0}),p||(t.size=0),c(n)||l(n,t[h],{that:t,AS_ENTRIES:i})})),d=u.prototype,f=g(e),T=function(t,e,i){var n,r,o=f(t),s=v(t,e);return s?s.value=i:(o.last=s={index:r=m(e,!0),key:e,value:i,previous:n=o.last,next:void 0,removed:!1},o.first||(o.first=s),n&&(n.next=s),p?o.size++:t.size++,"F"!==r&&(o.index[r]=s)),t},v=function(t,e){var i,n=f(t),r=m(e);if("F"!==r)return n.index[r];for(i=n.first;i;i=i.next)if(i.key==e)return i};return o(d,{clear:function(){for(var t=f(this),e=t.index,i=t.first;i;)i.removed=!0,i.previous&&(i.previous=i.previous.next=void 0),delete e[i.index],i=i.next;t.first=t.last=void 0,p?t.size=0:this.size=0},delete:function(t){var e=this,i=f(e),n=v(e,t);if(n){var r=n.next,o=n.previous;delete i.index[n.index],n.removed=!0,o&&(o.next=r),r&&(r.previous=o),i.first==n&&(i.first=r),i.last==n&&(i.last=o),p?i.size--:e.size--}return!!n},forEach:function(t){for(var e,i=f(this),n=s(t,arguments.length>1?arguments[1]:void 0);e=e?e.next:i.first;)for(n(e.value,e.key,this);e&&e.removed;)e=e.previous},has:function(t){return!!v(this,t)}}),o(d,i?{get:function(t){var e=v(this,t);return e&&e.value},set:function(t,e){return T(this,0===t?0:t,e)}}:{add:function(t){return T(this,t=0===t?0:t,t)}}),p&&n(d,"size",{get:function(){return f(this).size}}),u},setStrong:function(t,e,i){var n=e+" Iterator",r=g(e),o=g(n);h(t,e,(function(t,e){E(this,{type:n,target:t,state:r(t),kind:e,last:void 0})}),(function(){for(var t=o(this),e=t.kind,i=t.last;i&&i.removed;)i=i.previous;return t.target&&(t.last=i=i?i.next:t.state.first)?u("keys"==e?i.key:"values"==e?i.value:[i.key,i.value],!1):(t.target=void 0,u(void 0,!0))}),i?"entries":"values",!i,!0),d(e)}}},7710:function(t,e,i){"use strict";var n=i(2109),r=i(7854),o=i(1702),s=i(4705),a=i(8052),c=i(2423),l=i(408),h=i(5787),u=i(614),d=i(8554),p=i(111),m=i(7293),f=i(7072),E=i(8003),g=i(9587);t.exports=function(t,e,i){var T=-1!==t.indexOf("Map"),v=-1!==t.indexOf("Weak"),R=T?"set":"add",A=r[t],I=A&&A.prototype,_=A,O={},y=function(t){var e=o(I[t]);a(I,t,"add"==t?function(t){return e(this,0===t?0:t),this}:"delete"==t?function(t){return!(v&&!p(t))&&e(this,0===t?0:t)}:"get"==t?function(t){return v&&!p(t)?void 0:e(this,0===t?0:t)}:"has"==t?function(t){return!(v&&!p(t))&&e(this,0===t?0:t)}:function(t,i){return e(this,0===t?0:t,i),this})};if(s(t,!u(A)||!(v||I.forEach&&!m((function(){(new A).entries().next()})))))_=i.getConstructor(e,t,T,R),c.enable();else if(s(t,!0)){var C=new _,N=C[R](v?{}:-0,1)!=C,L=m((function(){C.has(1)})),b=f((function(t){new A(t)})),S=!v&&m((function(){for(var t=new A,e=5;e--;)t[R](e,e);return!t.has(-0)}));b||((_=e((function(t,e){h(t,I);var i=g(new A,t,_);return d(e)||l(e,i[R],{that:i,AS_ENTRIES:T}),i}))).prototype=I,I.constructor=_),(L||S)&&(y("delete"),y("has"),T&&y("get")),(S||N)&&y(R),v&&I.clear&&delete I.clear}return O[t]=_,n({global:!0,constructor:!0,forced:_!=A},O),E(_,t),v||i.setStrong(_,t,T),_}},9920:function(t,e,i){var n=i(2597),r=i(3887),o=i(1236),s=i(3070);t.exports=function(t,e,i){for(var a=r(e),c=s.f,l=o.f,h=0;h<a.length;h++){var u=a[h];n(t,u)||i&&n(i,u)||c(t,u,l(e,u))}}},4964:function(t,e,i){var n=i(5112)("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(i){try{return e[n]=!1,"/./"[t](e)}catch(t){}}return!1}},8544:function(t,e,i){var n=i(7293);t.exports=!n((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}))},6178:function(t){t.exports=function(t,e){return{value:t,done:e}}},8880:function(t,e,i){var n=i(9781),r=i(3070),o=i(9114);t.exports=n?function(t,e,i){return r.f(t,e,o(1,i))}:function(t,e,i){return t[e]=i,t}},9114:function(t){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},6135:function(t,e,i){"use strict";var n=i(4948),r=i(3070),o=i(9114);t.exports=function(t,e,i){var s=n(e);s in t?r.f(t,s,o(0,i)):t[s]=i}},8052:function(t,e,i){var n=i(614),r=i(3070),o=i(6339),s=i(3072);t.exports=function(t,e,i,a){a||(a={});var c=a.enumerable,l=void 0!==a.name?a.name:e;if(n(i)&&o(i,l,a),a.global)c?t[e]=i:s(e,i);else{try{a.unsafe?t[e]&&(c=!0):delete t[e]}catch(t){}c?t[e]=i:r.f(t,e,{value:i,enumerable:!1,configurable:!a.nonConfigurable,writable:!a.nonWritable})}return t}},9190:function(t,e,i){var n=i(8052);t.exports=function(t,e,i){for(var r in e)n(t,r,e[r],i);return t}},3072:function(t,e,i){var n=i(7854),r=Object.defineProperty;t.exports=function(t,e){try{r(n,t,{value:e,configurable:!0,writable:!0})}catch(i){n[t]=e}return e}},9781:function(t,e,i){var n=i(7293);t.exports=!n((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},4154:function(t){var e="object"==typeof document&&document.all,i=void 0===e&&void 0!==e;t.exports={all:e,IS_HTMLDDA:i}},317:function(t,e,i){var n=i(7854),r=i(111),o=n.document,s=r(o)&&r(o.createElement);t.exports=function(t){return s?o.createElement(t):{}}},8988:function(t){var e=TypeError;t.exports=function(t){if(t>9007199254740991)throw e("Maximum allowed index exceeded");return t}},8324:function(t){t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},8509:function(t,e,i){var n=i(317)("span").classList,r=n&&n.constructor&&n.constructor.prototype;t.exports=r===Object.prototype?void 0:r},8113:function(t,e,i){var n=i(5005);t.exports=n("navigator","userAgent")||""},7392:function(t,e,i){var n,r,o=i(7854),s=i(8113),a=o.process,c=o.Deno,l=a&&a.versions||c&&c.version,h=l&&l.v8;h&&(r=(n=h.split("."))[0]>0&&n[0]<4?1:+(n[0]+n[1])),!r&&s&&(!(n=s.match(/Edge\/(\d+)/))||n[1]>=74)&&(n=s.match(/Chrome\/(\d+)/))&&(r=+n[1]),t.exports=r},748:function(t){t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},2109:function(t,e,i){var n=i(7854),r=i(1236).f,o=i(8880),s=i(8052),a=i(3072),c=i(9920),l=i(4705);t.exports=function(t,e){var i,h,u,d,p,m=t.target,f=t.global,E=t.stat;if(i=f?n:E?n[m]||a(m,{}):(n[m]||{}).prototype)for(h in e){if(d=e[h],u=t.dontCallGetSet?(p=r(i,h))&&p.value:i[h],!l(f?h:m+(E?".":"#")+h,t.forced)&&void 0!==u){if(typeof d==typeof u)continue;c(d,u)}(t.sham||u&&u.sham)&&o(d,"sham",!0),s(i,h,d,t)}}},7293:function(t){t.exports=function(t){try{return!!t()}catch(t){return!0}}},7007:function(t,e,i){"use strict";i(4916);var n=i(1470),r=i(8052),o=i(2261),s=i(7293),a=i(5112),c=i(8880),l=a("species"),h=RegExp.prototype;t.exports=function(t,e,i,u){var d=a(t),p=!s((function(){var e={};return e[d]=function(){return 7},7!=""[t](e)})),m=p&&!s((function(){var e=!1,i=/a/;return"split"===t&&((i={}).constructor={},i.constructor[l]=function(){return i},i.flags="",i[d]=/./[d]),i.exec=function(){return e=!0,null},i[d](""),!e}));if(!p||!m||i){var f=n(/./[d]),E=e(d,""[t],(function(t,e,i,r,s){var a=n(t),c=e.exec;return c===o||c===h.exec?p&&!s?{done:!0,value:f(e,i,r)}:{done:!0,value:a(i,e,r)}:{done:!1}}));r(String.prototype,t,E[0]),r(h,d,E[1])}u&&c(h[d],"sham",!0)}},6677:function(t,e,i){var n=i(7293);t.exports=!n((function(){return Object.isExtensible(Object.preventExtensions({}))}))},2104:function(t,e,i){var n=i(4374),r=Function.prototype,o=r.apply,s=r.call;t.exports="object"==typeof Reflect&&Reflect.apply||(n?s.bind(o):function(){return s.apply(o,arguments)})},9974:function(t,e,i){var n=i(1470),r=i(9662),o=i(4374),s=n(n.bind);t.exports=function(t,e){return r(t),void 0===e?t:o?s(t,e):function(){return t.apply(e,arguments)}}},4374:function(t,e,i){var n=i(7293);t.exports=!n((function(){var t=function(){}.bind();return"function"!=typeof t||t.hasOwnProperty("prototype")}))},6916:function(t,e,i){var n=i(4374),r=Function.prototype.call;t.exports=n?r.bind(r):function(){return r.apply(r,arguments)}},6530:function(t,e,i){var n=i(9781),r=i(2597),o=Function.prototype,s=n&&Object.getOwnPropertyDescriptor,a=r(o,"name"),c=a&&"something"===function(){}.name,l=a&&(!n||n&&s(o,"name").configurable);t.exports={EXISTS:a,PROPER:c,CONFIGURABLE:l}},1470:function(t,e,i){var n=i(4326),r=i(1702);t.exports=function(t){if("Function"===n(t))return r(t)}},1702:function(t,e,i){var n=i(4374),r=Function.prototype,o=r.call,s=n&&r.bind.bind(o,o);t.exports=n?s:function(t){return function(){return o.apply(t,arguments)}}},5005:function(t,e,i){var n=i(7854),r=i(614),o=function(t){return r(t)?t:void 0};t.exports=function(t,e){return arguments.length<2?o(n[t]):n[t]&&n[t][e]}},1246:function(t,e,i){var n=i(648),r=i(8173),o=i(8554),s=i(7497),a=i(5112)("iterator");t.exports=function(t){if(!o(t))return r(t,a)||r(t,"@@iterator")||s[n(t)]}},4121:function(t,e,i){var n=i(6916),r=i(9662),o=i(9670),s=i(6330),a=i(1246),c=TypeError;t.exports=function(t,e){var i=arguments.length<2?a(t):e;if(r(i))return o(n(i,t));throw c(s(t)+" is not iterable")}},8173:function(t,e,i){var n=i(9662),r=i(8554);t.exports=function(t,e){var i=t[e];return r(i)?void 0:n(i)}},647:function(t,e,i){var n=i(1702),r=i(7908),o=Math.floor,s=n("".charAt),a=n("".replace),c=n("".slice),l=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,h=/\$([$&'`]|\d{1,2})/g;t.exports=function(t,e,i,n,u,d){var p=i+t.length,m=n.length,f=h;return void 0!==u&&(u=r(u),f=l),a(d,f,(function(r,a){var l;switch(s(a,0)){case"$":return"$";case"&":return t;case"`":return c(e,0,i);case"'":return c(e,p);case"<":l=u[c(a,1,-1)];break;default:var h=+a;if(0===h)return r;if(h>m){var d=o(h/10);return 0===d?r:d<=m?void 0===n[d-1]?s(a,1):n[d-1]+s(a,1):r}l=n[h-1]}return void 0===l?"":l}))}},7854:function(t,e,i){var n=function(t){return t&&t.Math==Math&&t};t.exports=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof i.g&&i.g)||function(){return this}()||Function("return this")()},2597:function(t,e,i){var n=i(1702),r=i(7908),o=n({}.hasOwnProperty);t.exports=Object.hasOwn||function(t,e){return o(r(t),e)}},3501:function(t){t.exports={}},490:function(t,e,i){var n=i(5005);t.exports=n("document","documentElement")},4664:function(t,e,i){var n=i(9781),r=i(7293),o=i(317);t.exports=!n&&!r((function(){return 7!=Object.defineProperty(o("div"),"a",{get:function(){return 7}}).a}))},8361:function(t,e,i){var n=i(1702),r=i(7293),o=i(4326),s=Object,a=n("".split);t.exports=r((function(){return!s("z").propertyIsEnumerable(0)}))?function(t){return"String"==o(t)?a(t,""):s(t)}:s},9587:function(t,e,i){var n=i(614),r=i(111),o=i(7674);t.exports=function(t,e,i){var s,a;return o&&n(s=e.constructor)&&s!==i&&r(a=s.prototype)&&a!==i.prototype&&o(t,a),t}},2788:function(t,e,i){var n=i(1702),r=i(614),o=i(5465),s=n(Function.toString);r(o.inspectSource)||(o.inspectSource=function(t){return s(t)}),t.exports=o.inspectSource},2423:function(t,e,i){var n=i(2109),r=i(1702),o=i(3501),s=i(111),a=i(2597),c=i(3070).f,l=i(8006),h=i(1156),u=i(2050),d=i(9711),p=i(6677),m=!1,f=d("meta"),E=0,g=function(t){c(t,f,{value:{objectID:"O"+E++,weakData:{}}})},T=t.exports={enable:function(){T.enable=function(){},m=!0;var t=l.f,e=r([].splice),i={};i[f]=1,t(i).length&&(l.f=function(i){for(var n=t(i),r=0,o=n.length;r<o;r++)if(n[r]===f){e(n,r,1);break}return n},n({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:h.f}))},fastKey:function(t,e){if(!s(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!a(t,f)){if(!u(t))return"F";if(!e)return"E";g(t)}return t[f].objectID},getWeakData:function(t,e){if(!a(t,f)){if(!u(t))return!0;if(!e)return!1;g(t)}return t[f].weakData},onFreeze:function(t){return p&&m&&u(t)&&!a(t,f)&&g(t),t}};o[f]=!0},9909:function(t,e,i){var n,r,o,s=i(4811),a=i(7854),c=i(111),l=i(8880),h=i(2597),u=i(5465),d=i(6200),p=i(3501),m="Object already initialized",f=a.TypeError,E=a.WeakMap;if(s||u.state){var g=u.state||(u.state=new E);g.get=g.get,g.has=g.has,g.set=g.set,n=function(t,e){if(g.has(t))throw f(m);return e.facade=t,g.set(t,e),e},r=function(t){return g.get(t)||{}},o=function(t){return g.has(t)}}else{var T=d("state");p[T]=!0,n=function(t,e){if(h(t,T))throw f(m);return e.facade=t,l(t,T,e),e},r=function(t){return h(t,T)?t[T]:{}},o=function(t){return h(t,T)}}t.exports={set:n,get:r,has:o,enforce:function(t){return o(t)?r(t):n(t,{})},getterFor:function(t){return function(e){var i;if(!c(e)||(i=r(e)).type!==t)throw f("Incompatible receiver, "+t+" required");return i}}}},7659:function(t,e,i){var n=i(5112),r=i(7497),o=n("iterator"),s=Array.prototype;t.exports=function(t){return void 0!==t&&(r.Array===t||s[o]===t)}},3157:function(t,e,i){var n=i(4326);t.exports=Array.isArray||function(t){return"Array"==n(t)}},614:function(t,e,i){var n=i(4154),r=n.all;t.exports=n.IS_HTMLDDA?function(t){return"function"==typeof t||t===r}:function(t){return"function"==typeof t}},4411:function(t,e,i){var n=i(1702),r=i(7293),o=i(614),s=i(648),a=i(5005),c=i(2788),l=function(){},h=[],u=a("Reflect","construct"),d=/^\s*(?:class|function)\b/,p=n(d.exec),m=!d.exec(l),f=function(t){if(!o(t))return!1;try{return u(l,h,t),!0}catch(t){return!1}},E=function(t){if(!o(t))return!1;switch(s(t)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return m||!!p(d,c(t))}catch(t){return!0}};E.sham=!0,t.exports=!u||r((function(){var t;return f(f.call)||!f(Object)||!f((function(){t=!0}))||t}))?E:f},4705:function(t,e,i){var n=i(7293),r=i(614),o=/#|\.prototype\./,s=function(t,e){var i=c[a(t)];return i==h||i!=l&&(r(e)?n(e):!!e)},a=s.normalize=function(t){return String(t).replace(o,".").toLowerCase()},c=s.data={},l=s.NATIVE="N",h=s.POLYFILL="P";t.exports=s},8554:function(t){t.exports=function(t){return null==t}},111:function(t,e,i){var n=i(614),r=i(4154),o=r.all;t.exports=r.IS_HTMLDDA?function(t){return"object"==typeof t?null!==t:n(t)||t===o}:function(t){return"object"==typeof t?null!==t:n(t)}},1913:function(t){t.exports=!1},7850:function(t,e,i){var n=i(111),r=i(4326),o=i(5112)("match");t.exports=function(t){var e;return n(t)&&(void 0!==(e=t[o])?!!e:"RegExp"==r(t))}},2190:function(t,e,i){var n=i(5005),r=i(614),o=i(7976),s=i(3307),a=Object;t.exports=s?function(t){return"symbol"==typeof t}:function(t){var e=n("Symbol");return r(e)&&o(e.prototype,a(t))}},408:function(t,e,i){var n=i(9974),r=i(6916),o=i(9670),s=i(6330),a=i(7659),c=i(6244),l=i(7976),h=i(4121),u=i(1246),d=i(9212),p=TypeError,m=function(t,e){this.stopped=t,this.result=e},f=m.prototype;t.exports=function(t,e,i){var E,g,T,v,R,A,I,_=i&&i.that,O=!(!i||!i.AS_ENTRIES),y=!(!i||!i.IS_RECORD),C=!(!i||!i.IS_ITERATOR),N=!(!i||!i.INTERRUPTED),L=n(e,_),b=function(t){return E&&d(E,"normal",t),new m(!0,t)},S=function(t){return O?(o(t),N?L(t[0],t[1],b):L(t[0],t[1])):N?L(t,b):L(t)};if(y)E=t.iterator;else if(C)E=t;else{if(!(g=u(t)))throw p(s(t)+" is not iterable");if(a(g)){for(T=0,v=c(t);v>T;T++)if((R=S(t[T]))&&l(f,R))return R;return new m(!1)}E=h(t,g)}for(A=y?t.next:E.next;!(I=r(A,E)).done;){try{R=S(I.value)}catch(t){d(E,"throw",t)}if("object"==typeof R&&R&&l(f,R))return R}return new m(!1)}},9212:function(t,e,i){var n=i(6916),r=i(9670),o=i(8173);t.exports=function(t,e,i){var s,a;r(t);try{if(!(s=o(t,"return"))){if("throw"===e)throw i;return i}s=n(s,t)}catch(t){a=!0,s=t}if("throw"===e)throw i;if(a)throw s;return r(s),i}},3061:function(t,e,i){"use strict";var n=i(3383).IteratorPrototype,r=i(30),o=i(9114),s=i(8003),a=i(7497),c=function(){return this};t.exports=function(t,e,i,l){var h=e+" Iterator";return t.prototype=r(n,{next:o(+!l,i)}),s(t,h,!1,!0),a[h]=c,t}},1656:function(t,e,i){"use strict";var n=i(2109),r=i(6916),o=i(1913),s=i(6530),a=i(614),c=i(3061),l=i(9518),h=i(7674),u=i(8003),d=i(8880),p=i(8052),m=i(5112),f=i(7497),E=i(3383),g=s.PROPER,T=s.CONFIGURABLE,v=E.IteratorPrototype,R=E.BUGGY_SAFARI_ITERATORS,A=m("iterator"),I="keys",_="values",O="entries",y=function(){return this};t.exports=function(t,e,i,s,m,E,C){c(i,e,s);var N,L,b,S=function(t){if(t===m&&w)return w;if(!R&&t in P)return P[t];switch(t){case I:case _:case O:return function(){return new i(this,t)}}return function(){return new i(this)}},x=e+" Iterator",M=!1,P=t.prototype,D=P[A]||P["@@iterator"]||m&&P[m],w=!R&&D||S(m),U="Array"==e&&P.entries||D;if(U&&(N=l(U.call(new t)))!==Object.prototype&&N.next&&(o||l(N)===v||(h?h(N,v):a(N[A])||p(N,A,y)),u(N,x,!0,!0),o&&(f[x]=y)),g&&m==_&&D&&D.name!==_&&(!o&&T?d(P,"name",_):(M=!0,w=function(){return r(D,this)})),m)if(L={values:S(_),keys:E?w:S(I),entries:S(O)},C)for(b in L)(R||M||!(b in P))&&p(P,b,L[b]);else n({target:e,proto:!0,forced:R||M},L);return o&&!C||P[A]===w||p(P,A,w,{name:m}),f[e]=w,L}},3383:function(t,e,i){"use strict";var n,r,o,s=i(7293),a=i(614),c=i(111),l=i(30),h=i(9518),u=i(8052),d=i(5112),p=i(1913),m=d("iterator"),f=!1;[].keys&&("next"in(o=[].keys())?(r=h(h(o)))!==Object.prototype&&(n=r):f=!0),!c(n)||s((function(){var t={};return n[m].call(t)!==t}))?n={}:p&&(n=l(n)),a(n[m])||u(n,m,(function(){return this})),t.exports={IteratorPrototype:n,BUGGY_SAFARI_ITERATORS:f}},7497:function(t){t.exports={}},6244:function(t,e,i){var n=i(7466);t.exports=function(t){return n(t.length)}},6339:function(t,e,i){var n=i(7293),r=i(614),o=i(2597),s=i(9781),a=i(6530).CONFIGURABLE,c=i(2788),l=i(9909),h=l.enforce,u=l.get,d=Object.defineProperty,p=s&&!n((function(){return 8!==d((function(){}),"length",{value:8}).length})),m=String(String).split("String"),f=t.exports=function(t,e,i){"Symbol("===String(e).slice(0,7)&&(e="["+String(e).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),i&&i.getter&&(e="get "+e),i&&i.setter&&(e="set "+e),(!o(t,"name")||a&&t.name!==e)&&(s?d(t,"name",{value:e,configurable:!0}):t.name=e),p&&i&&o(i,"arity")&&t.length!==i.arity&&d(t,"length",{value:i.arity});try{i&&o(i,"constructor")&&i.constructor?s&&d(t,"prototype",{writable:!1}):t.prototype&&(t.prototype=void 0)}catch(t){}var n=h(t);return o(n,"source")||(n.source=m.join("string"==typeof e?e:"")),t};Function.prototype.toString=f((function(){return r(this)&&u(this).source||c(this)}),"toString")},4758:function(t){var e=Math.ceil,i=Math.floor;t.exports=Math.trunc||function(t){var n=+t;return(n>0?i:e)(n)}},3929:function(t,e,i){var n=i(7850),r=TypeError;t.exports=function(t){if(n(t))throw r("The method doesn't accept regular expressions");return t}},30:function(t,e,i){var n,r=i(9670),o=i(6048),s=i(748),a=i(3501),c=i(490),l=i(317),h=i(6200)("IE_PROTO"),u=function(){},d=function(t){return"<script>"+t+"<\/script>"},p=function(t){t.write(d("")),t.close();var e=t.parentWindow.Object;return t=null,e},m=function(){try{n=new ActiveXObject("htmlfile")}catch(t){}var t,e;m="undefined"!=typeof document?document.domain&&n?p(n):((e=l("iframe")).style.display="none",c.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write(d("document.F=Object")),t.close(),t.F):p(n);for(var i=s.length;i--;)delete m.prototype[s[i]];return m()};a[h]=!0,t.exports=Object.create||function(t,e){var i;return null!==t?(u.prototype=r(t),i=new u,u.prototype=null,i[h]=t):i=m(),void 0===e?i:o.f(i,e)}},6048:function(t,e,i){var n=i(9781),r=i(3353),o=i(3070),s=i(9670),a=i(5656),c=i(1956);e.f=n&&!r?Object.defineProperties:function(t,e){s(t);for(var i,n=a(e),r=c(e),l=r.length,h=0;l>h;)o.f(t,i=r[h++],n[i]);return t}},3070:function(t,e,i){var n=i(9781),r=i(4664),o=i(3353),s=i(9670),a=i(4948),c=TypeError,l=Object.defineProperty,h=Object.getOwnPropertyDescriptor;e.f=n?o?function(t,e,i){if(s(t),e=a(e),s(i),"function"==typeof t&&"prototype"===e&&"value"in i&&"writable"in i&&!i.writable){var n=h(t,e);n&&n.writable&&(t[e]=i.value,i={configurable:"configurable"in i?i.configurable:n.configurable,enumerable:"enumerable"in i?i.enumerable:n.enumerable,writable:!1})}return l(t,e,i)}:l:function(t,e,i){if(s(t),e=a(e),s(i),r)try{return l(t,e,i)}catch(t){}if("get"in i||"set"in i)throw c("Accessors not supported");return"value"in i&&(t[e]=i.value),t}},1236:function(t,e,i){var n=i(9781),r=i(6916),o=i(5296),s=i(9114),a=i(5656),c=i(4948),l=i(2597),h=i(4664),u=Object.getOwnPropertyDescriptor;e.f=n?u:function(t,e){if(t=a(t),e=c(e),h)try{return u(t,e)}catch(t){}if(l(t,e))return s(!r(o.f,t,e),t[e])}},1156:function(t,e,i){var n=i(4326),r=i(5656),o=i(8006).f,s=i(1589),a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(t){return a&&"Window"==n(t)?function(t){try{return o(t)}catch(t){return s(a)}}(t):o(r(t))}},8006:function(t,e,i){var n=i(6324),r=i(748).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return n(t,r)}},5181:function(t,e){e.f=Object.getOwnPropertySymbols},9518:function(t,e,i){var n=i(2597),r=i(614),o=i(7908),s=i(6200),a=i(8544),c=s("IE_PROTO"),l=Object,h=l.prototype;t.exports=a?l.getPrototypeOf:function(t){var e=o(t);if(n(e,c))return e[c];var i=e.constructor;return r(i)&&e instanceof i?i.prototype:e instanceof l?h:null}},2050:function(t,e,i){var n=i(7293),r=i(111),o=i(4326),s=i(7556),a=Object.isExtensible,c=n((function(){a(1)}));t.exports=c||s?function(t){return!!r(t)&&(!s||"ArrayBuffer"!=o(t))&&(!a||a(t))}:a},7976:function(t,e,i){var n=i(1702);t.exports=n({}.isPrototypeOf)},6324:function(t,e,i){var n=i(1702),r=i(2597),o=i(5656),s=i(1318).indexOf,a=i(3501),c=n([].push);t.exports=function(t,e){var i,n=o(t),l=0,h=[];for(i in n)!r(a,i)&&r(n,i)&&c(h,i);for(;e.length>l;)r(n,i=e[l++])&&(~s(h,i)||c(h,i));return h}},1956:function(t,e,i){var n=i(6324),r=i(748);t.exports=Object.keys||function(t){return n(t,r)}},5296:function(t,e){"use strict";var i={}.propertyIsEnumerable,n=Object.getOwnPropertyDescriptor,r=n&&!i.call({1:2},1);e.f=r?function(t){var e=n(this,t);return!!e&&e.enumerable}:i},7674:function(t,e,i){var n=i(1702),r=i(9670),o=i(6077);t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,i={};try{(t=n(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(i,[]),e=i instanceof Array}catch(t){}return function(i,n){return r(i),o(n),e?t(i,n):i.__proto__=n,i}}():void 0)},288:function(t,e,i){"use strict";var n=i(1694),r=i(648);t.exports=n?{}.toString:function(){return"[object "+r(this)+"]"}},2140:function(t,e,i){var n=i(6916),r=i(614),o=i(111),s=TypeError;t.exports=function(t,e){var i,a;if("string"===e&&r(i=t.toString)&&!o(a=n(i,t)))return a;if(r(i=t.valueOf)&&!o(a=n(i,t)))return a;if("string"!==e&&r(i=t.toString)&&!o(a=n(i,t)))return a;throw s("Can't convert object to primitive value")}},3887:function(t,e,i){var n=i(5005),r=i(1702),o=i(8006),s=i(5181),a=i(9670),c=r([].concat);t.exports=n("Reflect","ownKeys")||function(t){var e=o.f(a(t)),i=s.f;return i?c(e,i(t)):e}},857:function(t,e,i){var n=i(7854);t.exports=n},7651:function(t,e,i){var n=i(6916),r=i(9670),o=i(614),s=i(4326),a=i(2261),c=TypeError;t.exports=function(t,e){var i=t.exec;if(o(i)){var l=n(i,t,e);return null!==l&&r(l),l}if("RegExp"===s(t))return n(a,t,e);throw c("RegExp#exec called on incompatible receiver")}},2261:function(t,e,i){"use strict";var n,r,o=i(6916),s=i(1702),a=i(1340),c=i(7066),l=i(2999),h=i(2309),u=i(30),d=i(9909).get,p=i(9441),m=i(7168),f=h("native-string-replace",String.prototype.replace),E=RegExp.prototype.exec,g=E,T=s("".charAt),v=s("".indexOf),R=s("".replace),A=s("".slice),I=(r=/b*/g,o(E,n=/a/,"a"),o(E,r,"a"),0!==n.lastIndex||0!==r.lastIndex),_=l.BROKEN_CARET,O=void 0!==/()??/.exec("")[1];(I||O||_||p||m)&&(g=function(t){var e,i,n,r,s,l,h,p=this,m=d(p),y=a(t),C=m.raw;if(C)return C.lastIndex=p.lastIndex,e=o(g,C,y),p.lastIndex=C.lastIndex,e;var N=m.groups,L=_&&p.sticky,b=o(c,p),S=p.source,x=0,M=y;if(L&&(b=R(b,"y",""),-1===v(b,"g")&&(b+="g"),M=A(y,p.lastIndex),p.lastIndex>0&&(!p.multiline||p.multiline&&"\n"!==T(y,p.lastIndex-1))&&(S="(?: "+S+")",M=" "+M,x++),i=new RegExp("^(?:"+S+")",b)),O&&(i=new RegExp("^"+S+"$(?!\\s)",b)),I&&(n=p.lastIndex),r=o(E,L?i:p,M),L?r?(r.input=A(r.input,x),r[0]=A(r[0],x),r.index=p.lastIndex,p.lastIndex+=r[0].length):p.lastIndex=0:I&&r&&(p.lastIndex=p.global?r.index+r[0].length:n),O&&r&&r.length>1&&o(f,r[0],i,(function(){for(s=1;s<arguments.length-2;s++)void 0===arguments[s]&&(r[s]=void 0)})),r&&N)for(r.groups=l=u(null),s=0;s<N.length;s++)l[(h=N[s])[0]]=r[h[1]];return r}),t.exports=g},7066:function(t,e,i){"use strict";var n=i(9670);t.exports=function(){var t=n(this),e="";return t.hasIndices&&(e+="d"),t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.unicodeSets&&(e+="v"),t.sticky&&(e+="y"),e}},4706:function(t,e,i){var n=i(6916),r=i(2597),o=i(7976),s=i(7066),a=RegExp.prototype;t.exports=function(t){var e=t.flags;return void 0!==e||"flags"in a||r(t,"flags")||!o(a,t)?e:n(s,t)}},2999:function(t,e,i){var n=i(7293),r=i(7854).RegExp,o=n((function(){var t=r("a","y");return t.lastIndex=2,null!=t.exec("abcd")})),s=o||n((function(){return!r("a","y").sticky})),a=o||n((function(){var t=r("^r","gy");return t.lastIndex=2,null!=t.exec("str")}));t.exports={BROKEN_CARET:a,MISSED_STICKY:s,UNSUPPORTED_Y:o}},9441:function(t,e,i){var n=i(7293),r=i(7854).RegExp;t.exports=n((function(){var t=r(".","s");return!(t.dotAll&&t.exec("\n")&&"s"===t.flags)}))},7168:function(t,e,i){var n=i(7293),r=i(7854).RegExp;t.exports=n((function(){var t=r("(?<a>b)","g");return"b"!==t.exec("b").groups.a||"bc"!=="b".replace(t,"$<a>c")}))},4488:function(t,e,i){var n=i(8554),r=TypeError;t.exports=function(t){if(n(t))throw r("Can't call method on "+t);return t}},6340:function(t,e,i){"use strict";var n=i(5005),r=i(3070),o=i(5112),s=i(9781),a=o("species");t.exports=function(t){var e=n(t),i=r.f;s&&e&&!e[a]&&i(e,a,{configurable:!0,get:function(){return this}})}},8003:function(t,e,i){var n=i(3070).f,r=i(2597),o=i(5112)("toStringTag");t.exports=function(t,e,i){t&&!i&&(t=t.prototype),t&&!r(t,o)&&n(t,o,{configurable:!0,value:e})}},6200:function(t,e,i){var n=i(2309),r=i(9711),o=n("keys");t.exports=function(t){return o[t]||(o[t]=r(t))}},5465:function(t,e,i){var n=i(7854),r=i(3072),o="__core-js_shared__",s=n[o]||r(o,{});t.exports=s},2309:function(t,e,i){var n=i(1913),r=i(5465);(t.exports=function(t,e){return r[t]||(r[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.26.1",mode:n?"pure":"global",copyright:"© 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.26.1/LICENSE",source:"https://github.com/zloirock/core-js"})},8710:function(t,e,i){var n=i(1702),r=i(9303),o=i(1340),s=i(4488),a=n("".charAt),c=n("".charCodeAt),l=n("".slice),h=function(t){return function(e,i){var n,h,u=o(s(e)),d=r(i),p=u.length;return d<0||d>=p?t?"":void 0:(n=c(u,d))<55296||n>56319||d+1===p||(h=c(u,d+1))<56320||h>57343?t?a(u,d):n:t?l(u,d,d+2):h-56320+(n-55296<<10)+65536}};t.exports={codeAt:h(!1),charAt:h(!0)}},6091:function(t,e,i){var n=i(6530).PROPER,r=i(7293),o=i(1361);t.exports=function(t){return r((function(){return!!o[t]()||"​᠎"!=="​᠎"[t]()||n&&o[t].name!==t}))}},3111:function(t,e,i){var n=i(1702),r=i(4488),o=i(1340),s=i(1361),a=n("".replace),c="["+s+"]",l=RegExp("^"+c+c+"*"),h=RegExp(c+c+"*$"),u=function(t){return function(e){var i=o(r(e));return 1&t&&(i=a(i,l,"")),2&t&&(i=a(i,h,"")),i}};t.exports={start:u(1),end:u(2),trim:u(3)}},6293:function(t,e,i){var n=i(7392),r=i(7293);t.exports=!!Object.getOwnPropertySymbols&&!r((function(){var t=Symbol();return!String(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&n&&n<41}))},6532:function(t,e,i){var n=i(6916),r=i(5005),o=i(5112),s=i(8052);t.exports=function(){var t=r("Symbol"),e=t&&t.prototype,i=e&&e.valueOf,a=o("toPrimitive");e&&!e[a]&&s(e,a,(function(t){return n(i,this)}),{arity:1})}},2015:function(t,e,i){var n=i(6293);t.exports=n&&!!Symbol.for&&!!Symbol.keyFor},1400:function(t,e,i){var n=i(9303),r=Math.max,o=Math.min;t.exports=function(t,e){var i=n(t);return i<0?r(i+e,0):o(i,e)}},5656:function(t,e,i){var n=i(8361),r=i(4488);t.exports=function(t){return n(r(t))}},9303:function(t,e,i){var n=i(4758);t.exports=function(t){var e=+t;return e!=e||0===e?0:n(e)}},7466:function(t,e,i){var n=i(9303),r=Math.min;t.exports=function(t){return t>0?r(n(t),9007199254740991):0}},7908:function(t,e,i){var n=i(4488),r=Object;t.exports=function(t){return r(n(t))}},7593:function(t,e,i){var n=i(6916),r=i(111),o=i(2190),s=i(8173),a=i(2140),c=i(5112),l=TypeError,h=c("toPrimitive");t.exports=function(t,e){if(!r(t)||o(t))return t;var i,c=s(t,h);if(c){if(void 0===e&&(e="default"),i=n(c,t,e),!r(i)||o(i))return i;throw l("Can't convert object to primitive value")}return void 0===e&&(e="number"),a(t,e)}},4948:function(t,e,i){var n=i(7593),r=i(2190);t.exports=function(t){var e=n(t,"string");return r(e)?e:e+""}},1694:function(t,e,i){var n={};n[i(5112)("toStringTag")]="z",t.exports="[object z]"===String(n)},1340:function(t,e,i){var n=i(648),r=String;t.exports=function(t){if("Symbol"===n(t))throw TypeError("Cannot convert a Symbol value to a string");return r(t)}},6330:function(t){var e=String;t.exports=function(t){try{return e(t)}catch(t){return"Object"}}},9711:function(t,e,i){var n=i(1702),r=0,o=Math.random(),s=n(1..toString);t.exports=function(t){return"Symbol("+(void 0===t?"":t)+")_"+s(++r+o,36)}},3307:function(t,e,i){var n=i(6293);t.exports=n&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},3353:function(t,e,i){var n=i(9781),r=i(7293);t.exports=n&&r((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))},4811:function(t,e,i){var n=i(7854),r=i(614),o=n.WeakMap;t.exports=r(o)&&/native code/.test(String(o))},6800:function(t,e,i){var n=i(857),r=i(2597),o=i(6061),s=i(3070).f;t.exports=function(t){var e=n.Symbol||(n.Symbol={});r(e,t)||s(e,t,{value:o.f(t)})}},6061:function(t,e,i){var n=i(5112);e.f=n},5112:function(t,e,i){var n=i(7854),r=i(2309),o=i(2597),s=i(9711),a=i(6293),c=i(3307),l=r("wks"),h=n.Symbol,u=h&&h.for,d=c?h:h&&h.withoutSetter||s;t.exports=function(t){if(!o(l,t)||!a&&"string"!=typeof l[t]){var e="Symbol."+t;a&&o(h,t)?l[t]=h[t]:l[t]=c&&u?u(e):d(e)}return l[t]}},1361:function(t){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},2222:function(t,e,i){"use strict";var n=i(2109),r=i(7293),o=i(3157),s=i(111),a=i(7908),c=i(6244),l=i(8988),h=i(6135),u=i(5417),d=i(1194),p=i(5112),m=i(7392),f=p("isConcatSpreadable"),E=m>=51||!r((function(){var t=[];return t[f]=!1,t.concat()[0]!==t})),g=d("concat"),T=function(t){if(!s(t))return!1;var e=t[f];return void 0!==e?!!e:o(t)};n({target:"Array",proto:!0,arity:1,forced:!E||!g},{concat:function(t){var e,i,n,r,o,s=a(this),d=u(s,0),p=0;for(e=-1,n=arguments.length;e<n;e++)if(T(o=-1===e?s:arguments[e]))for(r=c(o),l(p+r),i=0;i<r;i++,p++)i in o&&h(d,p,o[i]);else l(p+1),h(d,p++,o);return d.length=p,d}})},7327:function(t,e,i){"use strict";var n=i(2109),r=i(2092).filter;n({target:"Array",proto:!0,forced:!i(1194)("filter")},{filter:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}})},4553:function(t,e,i){"use strict";var n=i(2109),r=i(2092).findIndex,o=i(1223),s="findIndex",a=!0;s in[]&&Array(1).findIndex((function(){a=!1})),n({target:"Array",proto:!0,forced:a},{findIndex:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}}),o(s)},9826:function(t,e,i){"use strict";var n=i(2109),r=i(2092).find,o=i(1223),s="find",a=!0;s in[]&&Array(1).find((function(){a=!1})),n({target:"Array",proto:!0,forced:a},{find:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}}),o(s)},1038:function(t,e,i){var n=i(2109),r=i(8457);n({target:"Array",stat:!0,forced:!i(7072)((function(t){Array.from(t)}))},{from:r})},6699:function(t,e,i){"use strict";var n=i(2109),r=i(1318).includes,o=i(7293),s=i(1223);n({target:"Array",proto:!0,forced:o((function(){return!Array(1).includes()}))},{includes:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}}),s("includes")},6992:function(t,e,i){"use strict";var n=i(5656),r=i(1223),o=i(7497),s=i(9909),a=i(3070).f,c=i(1656),l=i(6178),h=i(1913),u=i(9781),d="Array Iterator",p=s.set,m=s.getterFor(d);t.exports=c(Array,"Array",(function(t,e){p(this,{type:d,target:n(t),index:0,kind:e})}),(function(){var t=m(this),e=t.target,i=t.kind,n=t.index++;return!e||n>=e.length?(t.target=void 0,l(void 0,!0)):l("keys"==i?n:"values"==i?e[n]:[n,e[n]],!1)}),"values");var f=o.Arguments=o.Array;if(r("keys"),r("values"),r("entries"),!h&&u&&"values"!==f.name)try{a(f,"name",{value:"values"})}catch(t){}},1249:function(t,e,i){"use strict";var n=i(2109),r=i(2092).map;n({target:"Array",proto:!0,forced:!i(1194)("map")},{map:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}})},7042:function(t,e,i){"use strict";var n=i(2109),r=i(3157),o=i(4411),s=i(111),a=i(1400),c=i(6244),l=i(5656),h=i(6135),u=i(5112),d=i(1194),p=i(206),m=d("slice"),f=u("species"),E=Array,g=Math.max;n({target:"Array",proto:!0,forced:!m},{slice:function(t,e){var i,n,u,d=l(this),m=c(d),T=a(t,m),v=a(void 0===e?m:e,m);if(r(d)&&(i=d.constructor,(o(i)&&(i===E||r(i.prototype))||s(i)&&null===(i=i[f]))&&(i=void 0),i===E||void 0===i))return p(d,T,v);for(n=new(void 0===i?E:i)(g(v-T,0)),u=0;T<v;T++,u++)T in d&&h(n,u,d[T]);return n.length=u,n}})},8309:function(t,e,i){var n=i(9781),r=i(6530).EXISTS,o=i(1702),s=i(3070).f,a=Function.prototype,c=o(a.toString),l=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,h=o(l.exec);n&&!r&&s(a,"name",{configurable:!0,get:function(){try{return h(l,c(this))[1]}catch(t){return""}}})},8862:function(t,e,i){var n=i(2109),r=i(5005),o=i(2104),s=i(6916),a=i(1702),c=i(7293),l=i(3157),h=i(614),u=i(111),d=i(2190),p=i(206),m=i(6293),f=r("JSON","stringify"),E=a(/./.exec),g=a("".charAt),T=a("".charCodeAt),v=a("".replace),R=a(1..toString),A=/[\uD800-\uDFFF]/g,I=/^[\uD800-\uDBFF]$/,_=/^[\uDC00-\uDFFF]$/,O=!m||c((function(){var t=r("Symbol")();return"[null]"!=f([t])||"{}"!=f({a:t})||"{}"!=f(Object(t))})),y=c((function(){return'"\\udf06\\ud834"'!==f("\udf06\ud834")||'"\\udead"'!==f("\udead")})),C=function(t,e){var i=p(arguments),n=e;if((u(e)||void 0!==t)&&!d(t))return l(e)||(e=function(t,e){if(h(n)&&(e=s(n,this,t,e)),!d(e))return e}),i[1]=e,o(f,null,i)},N=function(t,e,i){var n=g(i,e-1),r=g(i,e+1);return E(I,t)&&!E(_,r)||E(_,t)&&!E(I,n)?"\\u"+R(T(t,0),16):t};f&&n({target:"JSON",stat:!0,arity:3,forced:O||y},{stringify:function(t,e,i){var n=p(arguments),r=o(O?C:f,null,n);return y&&"string"==typeof r?v(r,A,N):r}})},9098:function(t,e,i){"use strict";i(7710)("Map",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),i(5631))},1532:function(t,e,i){i(9098)},5003:function(t,e,i){var n=i(2109),r=i(7293),o=i(5656),s=i(1236).f,a=i(9781),c=r((function(){s(1)}));n({target:"Object",stat:!0,forced:!a||c,sham:!a},{getOwnPropertyDescriptor:function(t,e){return s(o(t),e)}})},9337:function(t,e,i){var n=i(2109),r=i(9781),o=i(3887),s=i(5656),a=i(1236),c=i(6135);n({target:"Object",stat:!0,sham:!r},{getOwnPropertyDescriptors:function(t){for(var e,i,n=s(t),r=a.f,l=o(n),h={},u=0;l.length>u;)void 0!==(i=r(n,e=l[u++]))&&c(h,e,i);return h}})},9660:function(t,e,i){var n=i(2109),r=i(6293),o=i(7293),s=i(5181),a=i(7908);n({target:"Object",stat:!0,forced:!r||o((function(){s.f(1)}))},{getOwnPropertySymbols:function(t){var e=s.f;return e?e(a(t)):[]}})},7941:function(t,e,i){var n=i(2109),r=i(7908),o=i(1956);n({target:"Object",stat:!0,forced:i(7293)((function(){o(1)}))},{keys:function(t){return o(r(t))}})},1539:function(t,e,i){var n=i(1694),r=i(8052),o=i(288);n||r(Object.prototype,"toString",o,{unsafe:!0})},4916:function(t,e,i){"use strict";var n=i(2109),r=i(2261);n({target:"RegExp",proto:!0,forced:/./.exec!==r},{exec:r})},7227:function(t,e,i){"use strict";i(7710)("Set",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),i(5631))},189:function(t,e,i){i(7227)},2023:function(t,e,i){"use strict";var n=i(2109),r=i(1702),o=i(3929),s=i(4488),a=i(1340),c=i(4964),l=r("".indexOf);n({target:"String",proto:!0,forced:!c("includes")},{includes:function(t){return!!~l(a(s(this)),a(o(t)),arguments.length>1?arguments[1]:void 0)}})},8783:function(t,e,i){"use strict";var n=i(8710).charAt,r=i(1340),o=i(9909),s=i(1656),a=i(6178),c="String Iterator",l=o.set,h=o.getterFor(c);s(String,"String",(function(t){l(this,{type:c,string:r(t),index:0})}),(function(){var t,e=h(this),i=e.string,r=e.index;return r>=i.length?a(void 0,!0):(t=n(i,r),e.index+=t.length,a(t,!1))}))},8757:function(t,e,i){"use strict";var n=i(2109),r=i(6916),o=i(1702),s=i(4488),a=i(614),c=i(8554),l=i(7850),h=i(1340),u=i(8173),d=i(4706),p=i(647),m=i(5112),f=i(1913),E=m("replace"),g=TypeError,T=o("".indexOf),v=o("".replace),R=o("".slice),A=Math.max,I=function(t,e,i){return i>t.length?-1:""===e?i:T(t,e,i)};n({target:"String",proto:!0},{replaceAll:function(t,e){var i,n,o,m,_,O,y,C,N,L=s(this),b=0,S=0,x="";if(!c(t)){if((i=l(t))&&(n=h(s(d(t))),!~T(n,"g")))throw g("`.replaceAll` does not allow non-global regexes");if(o=u(t,E))return r(o,t,L,e);if(f&&i)return v(h(L),t,e)}for(m=h(L),_=h(t),(O=a(e))||(e=h(e)),y=_.length,C=A(1,y),b=I(m,_,0);-1!==b;)N=O?h(e(_,b,m)):p(_,m,b,[],void 0,e),x+=R(m,S,b)+N,S=b+y,b=I(m,_,b+C);return S<m.length&&(x+=R(m,S)),x}})},5306:function(t,e,i){"use strict";var n=i(2104),r=i(6916),o=i(1702),s=i(7007),a=i(7293),c=i(9670),l=i(614),h=i(8554),u=i(9303),d=i(7466),p=i(1340),m=i(4488),f=i(1530),E=i(8173),g=i(647),T=i(7651),v=i(5112)("replace"),R=Math.max,A=Math.min,I=o([].concat),_=o([].push),O=o("".indexOf),y=o("".slice),C="$0"==="a".replace(/./,"$0"),N=!!/./[v]&&""===/./[v]("a","$0");s("replace",(function(t,e,i){var o=N?"$":"$0";return[function(t,i){var n=m(this),o=h(t)?void 0:E(t,v);return o?r(o,t,n,i):r(e,p(n),t,i)},function(t,r){var s=c(this),a=p(t);if("string"==typeof r&&-1===O(r,o)&&-1===O(r,"$<")){var h=i(e,s,a,r);if(h.done)return h.value}var m=l(r);m||(r=p(r));var E=s.global;if(E){var v=s.unicode;s.lastIndex=0}for(var C=[];;){var N=T(s,a);if(null===N)break;if(_(C,N),!E)break;""===p(N[0])&&(s.lastIndex=f(a,d(s.lastIndex),v))}for(var L,b="",S=0,x=0;x<C.length;x++){for(var M=p((N=C[x])[0]),P=R(A(u(N.index),a.length),0),D=[],w=1;w<N.length;w++)_(D,void 0===(L=N[w])?L:String(L));var U=N.groups;if(m){var F=I([M],D,P,a);void 0!==U&&_(F,U);var B=p(n(r,void 0,F))}else B=g(M,a,P,D,U,r);P>=S&&(b+=y(a,S,P)+B,S=P+M.length)}return b+y(a,S)}]}),!!a((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")}))||!C||N)},3210:function(t,e,i){"use strict";var n=i(2109),r=i(3111).trim;n({target:"String",proto:!0,forced:i(6091)("trim")},{trim:function(){return r(this)}})},4032:function(t,e,i){"use strict";var n=i(2109),r=i(7854),o=i(6916),s=i(1702),a=i(1913),c=i(9781),l=i(6293),h=i(7293),u=i(2597),d=i(7976),p=i(9670),m=i(5656),f=i(4948),E=i(1340),g=i(9114),T=i(30),v=i(1956),R=i(8006),A=i(1156),I=i(5181),_=i(1236),O=i(3070),y=i(6048),C=i(5296),N=i(8052),L=i(2309),b=i(6200),S=i(3501),x=i(9711),M=i(5112),P=i(6061),D=i(6800),w=i(6532),U=i(8003),F=i(9909),B=i(2092).forEach,G=b("hidden"),H="Symbol",k=F.set,Y=F.getterFor(H),X=Object.prototype,$=r.Symbol,V=$&&$.prototype,j=r.TypeError,z=r.QObject,W=_.f,Z=O.f,q=A.f,Q=C.f,K=s([].push),J=L("symbols"),tt=L("op-symbols"),et=L("wks"),it=!z||!z.prototype||!z.prototype.findChild,nt=c&&h((function(){return 7!=T(Z({},"a",{get:function(){return Z(this,"a",{value:7}).a}})).a}))?function(t,e,i){var n=W(X,e);n&&delete X[e],Z(t,e,i),n&&t!==X&&Z(X,e,n)}:Z,rt=function(t,e){var i=J[t]=T(V);return k(i,{type:H,tag:t,description:e}),c||(i.description=e),i},ot=function(t,e,i){t===X&&ot(tt,e,i),p(t);var n=f(e);return p(i),u(J,n)?(i.enumerable?(u(t,G)&&t[G][n]&&(t[G][n]=!1),i=T(i,{enumerable:g(0,!1)})):(u(t,G)||Z(t,G,g(1,{})),t[G][n]=!0),nt(t,n,i)):Z(t,n,i)},st=function(t,e){p(t);var i=m(e),n=v(i).concat(ht(i));return B(n,(function(e){c&&!o(at,i,e)||ot(t,e,i[e])})),t},at=function(t){var e=f(t),i=o(Q,this,e);return!(this===X&&u(J,e)&&!u(tt,e))&&(!(i||!u(this,e)||!u(J,e)||u(this,G)&&this[G][e])||i)},ct=function(t,e){var i=m(t),n=f(e);if(i!==X||!u(J,n)||u(tt,n)){var r=W(i,n);return!r||!u(J,n)||u(i,G)&&i[G][n]||(r.enumerable=!0),r}},lt=function(t){var e=q(m(t)),i=[];return B(e,(function(t){u(J,t)||u(S,t)||K(i,t)})),i},ht=function(t){var e=t===X,i=q(e?tt:m(t)),n=[];return B(i,(function(t){!u(J,t)||e&&!u(X,t)||K(n,J[t])})),n};l||($=function(){if(d(V,this))throw j("Symbol is not a constructor");var t=arguments.length&&void 0!==arguments[0]?E(arguments[0]):void 0,e=x(t),i=function(t){this===X&&o(i,tt,t),u(this,G)&&u(this[G],e)&&(this[G][e]=!1),nt(this,e,g(1,t))};return c&&it&&nt(X,e,{configurable:!0,set:i}),rt(e,t)},N(V=$.prototype,"toString",(function(){return Y(this).tag})),N($,"withoutSetter",(function(t){return rt(x(t),t)})),C.f=at,O.f=ot,y.f=st,_.f=ct,R.f=A.f=lt,I.f=ht,P.f=function(t){return rt(M(t),t)},c&&(Z(V,"description",{configurable:!0,get:function(){return Y(this).description}}),a||N(X,"propertyIsEnumerable",at,{unsafe:!0}))),n({global:!0,constructor:!0,wrap:!0,forced:!l,sham:!l},{Symbol:$}),B(v(et),(function(t){D(t)})),n({target:H,stat:!0,forced:!l},{useSetter:function(){it=!0},useSimple:function(){it=!1}}),n({target:"Object",stat:!0,forced:!l,sham:!c},{create:function(t,e){return void 0===e?T(t):st(T(t),e)},defineProperty:ot,defineProperties:st,getOwnPropertyDescriptor:ct}),n({target:"Object",stat:!0,forced:!l},{getOwnPropertyNames:lt}),w(),U($,H),S[G]=!0},1817:function(t,e,i){"use strict";var n=i(2109),r=i(9781),o=i(7854),s=i(1702),a=i(2597),c=i(614),l=i(7976),h=i(1340),u=i(3070).f,d=i(9920),p=o.Symbol,m=p&&p.prototype;if(r&&c(p)&&(!("description"in m)||void 0!==p().description)){var f={},E=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:h(arguments[0]),e=l(m,this)?new p(t):void 0===t?p():p(t);return""===t&&(f[e]=!0),e};d(E,p),E.prototype=m,m.constructor=E;var g="Symbol(test)"==String(p("test")),T=s(m.valueOf),v=s(m.toString),R=/^Symbol\((.*)\)[^)]+$/,A=s("".replace),I=s("".slice);u(m,"description",{configurable:!0,get:function(){var t=T(this);if(a(f,t))return"";var e=v(t),i=g?I(e,7,-1):A(e,R,"$1");return""===i?void 0:i}}),n({global:!0,constructor:!0,forced:!0},{Symbol:E})}},763:function(t,e,i){var n=i(2109),r=i(5005),o=i(2597),s=i(1340),a=i(2309),c=i(2015),l=a("string-to-symbol-registry"),h=a("symbol-to-string-registry");n({target:"Symbol",stat:!0,forced:!c},{for:function(t){var e=s(t);if(o(l,e))return l[e];var i=r("Symbol")(e);return l[e]=i,h[i]=e,i}})},2165:function(t,e,i){i(6800)("iterator")},2526:function(t,e,i){i(4032),i(763),i(6620),i(8862),i(9660)},6620:function(t,e,i){var n=i(2109),r=i(2597),o=i(2190),s=i(6330),a=i(2309),c=i(2015),l=a("symbol-to-string-registry");n({target:"Symbol",stat:!0,forced:!c},{keyFor:function(t){if(!o(t))throw TypeError(s(t)+" is not a symbol");if(r(l,t))return l[t]}})},7207:function(t,e,i){i(8757)},4747:function(t,e,i){var n=i(7854),r=i(8324),o=i(8509),s=i(8533),a=i(8880),c=function(t){if(t&&t.forEach!==s)try{a(t,"forEach",s)}catch(e){t.forEach=s}};for(var l in r)r[l]&&c(n[l]&&n[l].prototype);c(o)},3948:function(t,e,i){var n=i(7854),r=i(8324),o=i(8509),s=i(6992),a=i(8880),c=i(5112),l=c("iterator"),h=c("toStringTag"),u=s.values,d=function(t,e){if(t){if(t[l]!==u)try{a(t,l,u)}catch(e){t[l]=u}if(t[h]||a(t,h,e),r[e])for(var i in s)if(t[i]!==s[i])try{a(t,i,s[i])}catch(e){t[i]=s[i]}}};for(var p in r)d(n[p]&&n[p].prototype,p);d(o,"DOMTokenList")},4289:function(t,e,i){"use strict";var n=i(2215),r="function"==typeof Symbol&&"symbol"==typeof Symbol("foo"),o=Object.prototype.toString,s=Array.prototype.concat,a=Object.defineProperty,c=i(1044)(),l=a&&c,h=function(t,e,i,n){var r;(!(e in t)||"function"==typeof(r=n)&&"[object Function]"===o.call(r)&&n())&&(l?a(t,e,{configurable:!0,enumerable:!1,value:i,writable:!0}):t[e]=i)},u=function(t,e){var i=arguments.length>2?arguments[2]:{},o=n(e);r&&(o=s.call(o,Object.getOwnPropertySymbols(e)));for(var a=0;a<o.length;a+=1)h(t,o[a],e[o[a]],i[o[a]])};u.supportsDescriptors=!!l,t.exports=u},1676:function(t){"use strict";t.exports=function(t){if(arguments.length<1)throw new TypeError("1 argument is required");if("object"!=typeof t)throw new TypeError("Argument 1 (”other“) to Node.contains must be an instance of Node");var e=t;do{if(this===e)return!0;e&&(e=e.parentNode)}while(e);return!1}},2483:function(t,e,i){"use strict";var n=i(4289),r=i(1676),o=i(4356),s=o(),a=function(t,e){return s.apply(t,[e])};n(a,{getPolyfill:o,implementation:r,shim:i(1514)}),t.exports=a},4356:function(t,e,i){"use strict";var n=i(1676);t.exports=function(){if("undefined"!=typeof document){if(document.contains)return document.contains;if(document.body&&document.body.contains)try{if("boolean"==typeof document.body.contains.call(document,""))return document.body.contains}catch(t){}}return n}},1514:function(t,e,i){"use strict";var n=i(4289),r=i(4356);t.exports=function(){var t=r();return"undefined"!=typeof document&&(n(document,{contains:t},{contains:function(){return document.contains!==t}}),"undefined"!=typeof Element&&n(Element.prototype,{contains:t},{contains:function(){return Element.prototype.contains!==t}})),t}},7648:function(t){"use strict";var e="Function.prototype.bind called on incompatible ",i=Array.prototype.slice,n=Object.prototype.toString,r="[object Function]";t.exports=function(t){var o=this;if("function"!=typeof o||n.call(o)!==r)throw new TypeError(e+o);for(var s,a=i.call(arguments,1),c=function(){if(this instanceof s){var e=o.apply(this,a.concat(i.call(arguments)));return Object(e)===e?e:this}return o.apply(t,a.concat(i.call(arguments)))},l=Math.max(0,o.length-a.length),h=[],u=0;u<l;u++)h.push("$"+u);if(s=Function("binder","return function ("+h.join(",")+"){ return binder.apply(this,arguments); }")(c),o.prototype){var d=function(){};d.prototype=o.prototype,s.prototype=new d,d.prototype=null}return s}},8612:function(t,e,i){"use strict";var n=i(7648);t.exports=Function.prototype.bind||n},210:function(t,e,i){"use strict";var n,r=SyntaxError,o=Function,s=TypeError,a=function(t){try{return o('"use strict"; return ('+t+").constructor;")()}catch(t){}},c=Object.getOwnPropertyDescriptor;if(c)try{c({},"")}catch(t){c=null}var l=function(){throw new s},h=c?function(){try{return l}catch(t){try{return c(arguments,"callee").get}catch(t){return l}}}():l,u=i(1405)(),d=Object.getPrototypeOf||function(t){return t.__proto__},p={},m="undefined"==typeof Uint8Array?n:d(Uint8Array),f={"%AggregateError%":"undefined"==typeof AggregateError?n:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?n:ArrayBuffer,"%ArrayIteratorPrototype%":u?d([][Symbol.iterator]()):n,"%AsyncFromSyncIteratorPrototype%":n,"%AsyncFunction%":p,"%AsyncGenerator%":p,"%AsyncGeneratorFunction%":p,"%AsyncIteratorPrototype%":p,"%Atomics%":"undefined"==typeof Atomics?n:Atomics,"%BigInt%":"undefined"==typeof BigInt?n:BigInt,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?n:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":"undefined"==typeof Float32Array?n:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?n:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?n:FinalizationRegistry,"%Function%":o,"%GeneratorFunction%":p,"%Int8Array%":"undefined"==typeof Int8Array?n:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?n:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?n:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":u?d(d([][Symbol.iterator]())):n,"%JSON%":"object"==typeof JSON?JSON:n,"%Map%":"undefined"==typeof Map?n:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&u?d((new Map)[Symbol.iterator]()):n,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?n:Promise,"%Proxy%":"undefined"==typeof Proxy?n:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":"undefined"==typeof Reflect?n:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?n:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&u?d((new Set)[Symbol.iterator]()):n,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?n:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":u?d(""[Symbol.iterator]()):n,"%Symbol%":u?Symbol:n,"%SyntaxError%":r,"%ThrowTypeError%":h,"%TypedArray%":m,"%TypeError%":s,"%Uint8Array%":"undefined"==typeof Uint8Array?n:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?n:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?n:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?n:Uint32Array,"%URIError%":URIError,"%WeakMap%":"undefined"==typeof WeakMap?n:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?n:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?n:WeakSet},E=function t(e){var i;if("%AsyncFunction%"===e)i=a("async function () {}");else if("%GeneratorFunction%"===e)i=a("function* () {}");else if("%AsyncGeneratorFunction%"===e)i=a("async function* () {}");else if("%AsyncGenerator%"===e){var n=t("%AsyncGeneratorFunction%");n&&(i=n.prototype)}else if("%AsyncIteratorPrototype%"===e){var r=t("%AsyncGenerator%");r&&(i=d(r.prototype))}return f[e]=i,i},g={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},T=i(8612),v=i(7642),R=T.call(Function.call,Array.prototype.concat),A=T.call(Function.apply,Array.prototype.splice),I=T.call(Function.call,String.prototype.replace),_=T.call(Function.call,String.prototype.slice),O=T.call(Function.call,RegExp.prototype.exec),y=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,C=/\\(\\)?/g,N=function(t){var e=_(t,0,1),i=_(t,-1);if("%"===e&&"%"!==i)throw new r("invalid intrinsic syntax, expected closing `%`");if("%"===i&&"%"!==e)throw new r("invalid intrinsic syntax, expected opening `%`");var n=[];return I(t,y,(function(t,e,i,r){n[n.length]=i?I(r,C,"$1"):e||t})),n},L=function(t,e){var i,n=t;if(v(g,n)&&(n="%"+(i=g[n])[0]+"%"),v(f,n)){var o=f[n];if(o===p&&(o=E(n)),void 0===o&&!e)throw new s("intrinsic "+t+" exists, but is not available. Please file an issue!");return{alias:i,name:n,value:o}}throw new r("intrinsic "+t+" does not exist!")};t.exports=function(t,e){if("string"!=typeof t||0===t.length)throw new s("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof e)throw new s('"allowMissing" argument must be a boolean');if(null===O(/^%?[^%]*%?$/,t))throw new r("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var i=N(t),n=i.length>0?i[0]:"",o=L("%"+n+"%",e),a=o.name,l=o.value,h=!1,u=o.alias;u&&(n=u[0],A(i,R([0,1],u)));for(var d=1,p=!0;d<i.length;d+=1){var m=i[d],E=_(m,0,1),g=_(m,-1);if(('"'===E||"'"===E||"`"===E||'"'===g||"'"===g||"`"===g)&&E!==g)throw new r("property names with quotes must have matching quotes");if("constructor"!==m&&p||(h=!0),v(f,a="%"+(n+="."+m)+"%"))l=f[a];else if(null!=l){if(!(m in l)){if(!e)throw new s("base intrinsic for "+t+" exists, but the property is not available.");return}if(c&&d+1>=i.length){var T=c(l,m);l=(p=!!T)&&"get"in T&&!("originalValue"in T.get)?T.get:l[m]}else p=v(l,m),l=l[m];p&&!h&&(f[a]=l)}}return l}},1044:function(t,e,i){"use strict";var n=i(210)("%Object.defineProperty%",!0),r=function(){if(n)try{return n({},"a",{value:1}),!0}catch(t){return!1}return!1};r.hasArrayLengthDefineBug=function(){if(!r())return null;try{return 1!==n([],"length",{value:1}).length}catch(t){return!0}},t.exports=r},1405:function(t,e,i){"use strict";var n="undefined"!=typeof Symbol&&Symbol,r=i(5419);t.exports=function(){return"function"==typeof n&&"function"==typeof Symbol&&"symbol"==typeof n("foo")&&"symbol"==typeof Symbol("bar")&&r()}},5419:function(t){"use strict";t.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var t={},e=Symbol("test"),i=Object(e);if("string"==typeof e)return!1;if("[object Symbol]"!==Object.prototype.toString.call(e))return!1;if("[object Symbol]"!==Object.prototype.toString.call(i))return!1;for(e in t[e]=42,t)return!1;if("function"==typeof Object.keys&&0!==Object.keys(t).length)return!1;if("function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(t).length)return!1;var n=Object.getOwnPropertySymbols(t);if(1!==n.length||n[0]!==e)return!1;if(!Object.prototype.propertyIsEnumerable.call(t,e))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var r=Object.getOwnPropertyDescriptor(t,e);if(42!==r.value||!0!==r.enumerable)return!1}return!0}},7642:function(t,e,i){"use strict";var n=i(8612);t.exports=n.call(Function.call,Object.prototype.hasOwnProperty)},8987:function(t,e,i){"use strict";var n;if(!Object.keys){var r=Object.prototype.hasOwnProperty,o=Object.prototype.toString,s=i(1414),a=Object.prototype.propertyIsEnumerable,c=!a.call({toString:null},"toString"),l=a.call((function(){}),"prototype"),h=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],u=function(t){var e=t.constructor;return e&&e.prototype===t},d={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},p=function(){if("undefined"==typeof window)return!1;for(var t in window)try{if(!d["$"+t]&&r.call(window,t)&&null!==window[t]&&"object"==typeof window[t])try{u(window[t])}catch(t){return!0}}catch(t){return!0}return!1}();n=function(t){var e=null!==t&&"object"==typeof t,i="[object Function]"===o.call(t),n=s(t),a=e&&"[object String]"===o.call(t),d=[];if(!e&&!i&&!n)throw new TypeError("Object.keys called on a non-object");var m=l&&i;if(a&&t.length>0&&!r.call(t,0))for(var f=0;f<t.length;++f)d.push(String(f));if(n&&t.length>0)for(var E=0;E<t.length;++E)d.push(String(E));else for(var g in t)m&&"prototype"===g||!r.call(t,g)||d.push(String(g));if(c)for(var T=function(t){if("undefined"==typeof window||!p)return u(t);try{return u(t)}catch(t){return!1}}(t),v=0;v<h.length;++v)T&&"constructor"===h[v]||!r.call(t,h[v])||d.push(h[v]);return d}}t.exports=n},2215:function(t,e,i){"use strict";var n=Array.prototype.slice,r=i(1414),o=Object.keys,s=o?function(t){return o(t)}:i(8987),a=Object.keys;s.shim=function(){if(Object.keys){var t=function(){var t=Object.keys(arguments);return t&&t.length===arguments.length}(1,2);t||(Object.keys=function(t){return r(t)?a(n.call(t)):a(t)})}else Object.keys=s;return Object.keys||s},t.exports=s},1414:function(t){"use strict";var e=Object.prototype.toString;t.exports=function(t){var i=e.call(t),n="[object Arguments]"===i;return n||(n="[object Array]"!==i&&null!==t&&"object"==typeof t&&"number"==typeof t.length&&t.length>=0&&"[object Function]"===e.call(t.callee)),n}},2195:function(t){t.exports="precision highp float;\n\nuniform mat4 uMVP;\n\nattribute vec3 aPosition;\nattribute vec2 aTexcoord;\n\nvarying vec3 vPosition;\nvarying vec2 vTexcoord;\n\nvoid main() {\n\n  gl_Position = uMVP * vec4(aPosition.xyz, 1.0);\n\n  vPosition = aPosition;\n  vTexcoord = aTexcoord;\n}\n"},7132:function(t){t.exports="precision lowp float;\n\nuniform float uBlurred;\n\n// ________________________________________________________________________ Main\n\nvoid main() {\n  // Blurred to R\n  gl_FragColor = vec4(uBlurred, 0.0, 0.0, 1.0);\n}\n"},7580:function(t){t.exports="precision lowp float;\n\nuniform sampler2D uSamplerA;\nuniform sampler2D uSamplerB;\n\nuniform float uAlpha;\nuniform float uMixAB;\n\nvarying vec3 vPosition;\nvarying vec2 vTexcoord;\n\n// ________________________________________________________________________ Main\n\nvoid main() {\n\n  // Flip Y\n  vec2 texcoord = vec2(vTexcoord.x, 1.0 - vTexcoord.y);\n\n  // Sample\n  vec4 colourA = texture2D(uSamplerA, texcoord);\n  vec4 colourB = texture2D(uSamplerB, texcoord);\n\n  // Mix\n  vec4 colour = mix(colourA, colourB, uMixAB);\n\n  // Apply alpha\n  colour.a *= uAlpha;\n\n  // Out\n  gl_FragColor = colour;\n}\n"},2048:function(t){t.exports="precision lowp float;\n\nuniform sampler2D uSampler;\nuniform vec2 uResolution;\n\nvarying vec2 vPosition;\nvarying vec2 vTexcoord;\n\n/*\n  http://dev.theomader.com/gaussian-kernel-calculator/\n\n  9\n  0.000229\t0.005977\t0.060598\t0.241732\t0.382928\t0.241732\t0.060598\t0.005977\t0.000229\n\n  11\n  0.000003\t0.000229\t0.005977\t0.060598\t0.24173\t0.382925\t0.24173\t0.060598\t0.005977\t0.000229\t0.000003\n*/\n\nvoid main() {\n\n  float pixel = 1.0 / uResolution.x;\n  vec4 col = vec4(0.0, 0.0, 0.0, 1.0);\n\n  col += texture2D(uSampler, vec2(vTexcoord.x + (5.0 * pixel), vTexcoord.y)) * 0.000003;\n  col += texture2D(uSampler, vec2(vTexcoord.x + (4.0 * pixel), vTexcoord.y)) * 0.000229;\n  col += texture2D(uSampler, vec2(vTexcoord.x + (3.0 * pixel), vTexcoord.y)) * 0.005977;\n  col += texture2D(uSampler, vec2(vTexcoord.x + (2.0 * pixel), vTexcoord.y)) * 0.060598;\n  col += texture2D(uSampler, vec2(vTexcoord.x + (1.0 * pixel), vTexcoord.y)) * 0.24173;\n\n  col += texture2D(uSampler, vec2(vTexcoord.x, vTexcoord.y)) * 0.382925;\n\n  col += texture2D(uSampler, vec2(vTexcoord.x + (-1.0 * pixel), vTexcoord.y)) * 0.24173;\n  col += texture2D(uSampler, vec2(vTexcoord.x + (-2.0 * pixel), vTexcoord.y)) * 0.060598;\n  col += texture2D(uSampler, vec2(vTexcoord.x + (-3.0 * pixel), vTexcoord.y)) * 0.005977;\n  col += texture2D(uSampler, vec2(vTexcoord.x + (-4.0 * pixel), vTexcoord.y)) * 0.000229;\n  col += texture2D(uSampler, vec2(vTexcoord.x + (-5.0 * pixel), vTexcoord.y)) * 0.000003;\n\n  gl_FragColor = vec4(col.rgb, 1.0);\n}"},2121:function(t){t.exports="precision lowp float;\n\nuniform sampler2D uSampler;\nuniform vec2 uResolution;\n\nvarying vec2 vPosition;\nvarying vec2 vTexcoord;\n\n\nvoid main() {\n\n  float pixel = 1.0 / uResolution.y;\n  vec4 col = vec4(0.0, 0.0, 0.0, 1.0);\n\n  col += texture2D(uSampler, vec2(vTexcoord.x, vTexcoord.y + (5.0 * pixel))) * 0.000003;\n  col += texture2D(uSampler, vec2(vTexcoord.x, vTexcoord.y + (4.0 * pixel))) * 0.000229;\n  col += texture2D(uSampler, vec2(vTexcoord.x, vTexcoord.y + (3.0 * pixel))) * 0.005977;\n  col += texture2D(uSampler, vec2(vTexcoord.x, vTexcoord.y + (2.0 * pixel))) * 0.060598;\n  col += texture2D(uSampler, vec2(vTexcoord.x, vTexcoord.y + (1.0 * pixel))) * 0.24173;\n\n  col += texture2D(uSampler, vec2(vTexcoord.x, vTexcoord.y )) * 0.382925;\n\n  col += texture2D(uSampler, vec2(vTexcoord.x, vTexcoord.y + (-1.0 * pixel))) * 0.24173;\n  col += texture2D(uSampler, vec2(vTexcoord.x, vTexcoord.y + (-2.0 * pixel))) * 0.060598;\n  col += texture2D(uSampler, vec2(vTexcoord.x, vTexcoord.y + (-3.0 * pixel))) * 0.005977;\n  col += texture2D(uSampler, vec2(vTexcoord.x, vTexcoord.y + (-4.0 * pixel))) * 0.000229;\n  col += texture2D(uSampler, vec2(vTexcoord.x, vTexcoord.y + (-5.0 * pixel))) * 0.000003;\n\n  gl_FragColor = vec4(col.rgb, 1.0);\n}"},4235:function(t){t.exports="precision lowp float;\n\nattribute vec2 aPosition;\nattribute vec2 aTexcoord;\n\nvarying vec2 vPosition;\nvarying vec2 vTexcoord;\n\nvoid main() {\n\n  gl_Position = vec4(aPosition.xy, 0.0, 1.0);\n\n  vPosition = aPosition;\n  vTexcoord = aTexcoord;\n}"},3664:function(t){t.exports="precision lowp float;\n\nuniform sampler2D uSamplerColour;\nuniform sampler2D uSamplerMask;\nuniform sampler2D uSamplerBlur;\n\nvarying vec2 vPosition;\nvarying vec2 vTexcoord;\n\n\nvec3 photoshop_desaturate(vec3 color) {\n    float bw = (min(color.r, min(color.g, color.b)) + max(color.r, max(color.g, color.b))) * 0.5;\n    return vec3(bw, bw, bw);\n}\n\n// ________________________________________________________________________ Main\n\nvoid main() {\n\n\t// Sample\n\tvec3 colourColour = texture2D(uSamplerColour, vTexcoord).xyz;\n  vec3 colourMask = texture2D(uSamplerMask, vTexcoord).xyz;\n  vec3 colourBlur = texture2D(uSamplerBlur, vTexcoord).xyz;\n\n  float blur = colourMask.r;\n  float desaturate = 1.0 - (blur * 0.5); // TODO Hardcoded desaturation amount\n\n  // Desaturate Colour Blur\n  vec3 colourBlurDesaturated = photoshop_desaturate(colourBlur);\n\n  // Mix\n  vec3 colour = mix(colourColour, colourBlurDesaturated, blur);\n\n  // Clamp\n  vec3 clamped = clamp(colour, 0.0, 1.0);\n\n\t// Out\n  gl_FragColor = vec4(clamped, 1.0);\n\n\t// DEV\n\t// gl_FragColor = vec4(colourColour.rgb, 1.0);\n\t// gl_FragColor = vec4(colourMask.rgb, 1.0);\n  // gl_FragColor = vec4(colourBlur.rgb, 1.0);\n\n  // gl_FragColor = vec4(mix(colourColour, colourMask, 0.5), 1.0);\n}\n"},2466:function(t){t.exports="precision lowp float;\n\nattribute vec2 aPosition;\nattribute vec2 aTexcoord;\n\nvarying vec2 vPosition;\nvarying vec2 vTexcoord;\n\nvoid main() {\n\n  gl_Position = vec4(aPosition.xy, 0.0, 1.0);\n\n  vPosition = aPosition;\n  vTexcoord = aTexcoord;\n}"},5047:function(t){t.exports="precision lowp float;\n\nvarying vec3 vPosition;\nvarying vec2 vTexcoord;\n\nuniform sampler2D uSampler;\n\nvoid main(){\n\n  // Flip Y\n  vec2 texcoord = vec2(vTexcoord.x, 1.0 - vTexcoord.y);\n\n  // Sample\n  vec4 colour = texture2D(uSampler, texcoord);\n\n\t// Out\n\tgl_FragColor = vec4(colour.xyz, 1.0);\n}"},8284:function(t){t.exports="precision highp float;\n\nuniform mat4 uMVP;\n\nattribute vec3 aPosition;\nattribute vec2 aTexcoord;\n\nvarying vec3 vPosition;\nvarying vec2 vTexcoord;\n\nvoid main() {\n\n  gl_Position = uMVP * vec4(aPosition.xyz, 1.0);\n\n  vPosition = aPosition;\n  vTexcoord = aTexcoord;\n}\n"}},e={};function i(n){var r=e[n];if(void 0!==r)return r.exports;var o=e[n]={exports:{}};return t[n](o,o.exports,i),o.exports}i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,{a:e}),e},i.d=function(t,e){for(var n in e)i.o(e,n)&&!i.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},function(){var t;i.g.importScripts&&(t=i.g.location+"");var e=i.g.document;if(!t&&e&&(e.currentScript&&(t=e.currentScript.src),!t)){var n=e.getElementsByTagName("script");n.length&&(t=n[n.length-1].src)}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),i.p=t}();var n={};return function(){"use strict";i.r(n),i.d(n,{create:function(){return fe}}),window.Element.prototype,window.Document.prototype,window.DocumentFragment.prototype;var t=window.Element.prototype;window.Element.prototype,window.Element.prototype;var e=window.Element.prototype,r=window.Document.prototype,o=window.DocumentFragment.prototype;window.NodeList.prototype,window.HTMLCollection.prototype,window.CharacterData.prototype,window.DocumentType.prototype,window.Element.prototype,window.Element.prototype,window.DocumentType.prototype,window.CharacterData.prototype,window.NodeList.prototype;var s=i(2483),a=(i.p,i(1539),i(4747),i(4553),i(8309),i(7941),i(2526),i(7327),i(5003),i(9337),1e-6),c="undefined"!=typeof Float32Array?Float32Array:Array;function l(){var t=new c(3);return c!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function h(t,e,i){var n=new c(3);return n[0]=t,n[1]=e,n[2]=i,n}function u(t,e){var i=e[0],n=e[1],r=e[2],o=i*i+n*n+r*r;return o>0&&(o=1/Math.sqrt(o)),t[0]=e[0]*o,t[1]=e[1]*o,t[2]=e[2]*o,t}function d(t,e){var i=t[0],n=t[1],r=t[2],o=e[0],s=e[1],a=e[2],c=Math.sqrt(i*i+n*n+r*r)*Math.sqrt(o*o+s*s+a*a),l=c&&function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}(t,e)/c;return Math.acos(Math.min(Math.max(l,-1),1))}function p(){var t=new c(16);return c!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function m(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function f(t,e,i){var n=e[0],r=e[1],o=e[2],s=e[3],a=e[4],c=e[5],l=e[6],h=e[7],u=e[8],d=e[9],p=e[10],m=e[11],f=e[12],E=e[13],g=e[14],T=e[15],v=i[0],R=i[1],A=i[2],I=i[3];return t[0]=v*n+R*a+A*u+I*f,t[1]=v*r+R*c+A*d+I*E,t[2]=v*o+R*l+A*p+I*g,t[3]=v*s+R*h+A*m+I*T,v=i[4],R=i[5],A=i[6],I=i[7],t[4]=v*n+R*a+A*u+I*f,t[5]=v*r+R*c+A*d+I*E,t[6]=v*o+R*l+A*p+I*g,t[7]=v*s+R*h+A*m+I*T,v=i[8],R=i[9],A=i[10],I=i[11],t[8]=v*n+R*a+A*u+I*f,t[9]=v*r+R*c+A*d+I*E,t[10]=v*o+R*l+A*p+I*g,t[11]=v*s+R*h+A*m+I*T,v=i[12],R=i[13],A=i[14],I=i[15],t[12]=v*n+R*a+A*u+I*f,t[13]=v*r+R*c+A*d+I*E,t[14]=v*o+R*l+A*p+I*g,t[15]=v*s+R*h+A*m+I*T,t}Math.random,Math.PI,Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)}),l();class E{constructor(){this.fovY=45,this.near=.001,this.far=10,this.aspectRatio=1,this.positionEye=h(0,0,-2),this.positionTarget=h(0,0,0),this.vectorUp=h(0,1,0),this.matrixP=p(),this.matrixMV=p(),this.matrixMVP=p(),this.matrixLookat=p(),this.update()}update(){const t=this.matrixP,e=this.matrixMV,i=this.matrixMVP,n=this.matrixLookat;var r,o;(function(t,e,i,n,r){var o,s=1/Math.tan(e/2);t[0]=s/i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=r&&r!==1/0?(o=1/(n-r),t[10]=(r+n)*o,t[14]=2*r*n*o):(t[10]=-1,t[14]=-2*n)})(t,this.fovY,this.aspectRatio,this.near,this.far),function(t,e,i,n){var r,o,s,c,l,h,u,d,p,f,E=e[0],g=e[1],T=e[2],v=n[0],R=n[1],A=n[2],I=i[0],_=i[1],O=i[2];Math.abs(E-I)<a&&Math.abs(g-_)<a&&Math.abs(T-O)<a?m(t):(u=E-I,d=g-_,p=T-O,r=R*(p*=f=1/Math.hypot(u,d,p))-A*(d*=f),o=A*(u*=f)-v*p,s=v*d-R*u,(f=Math.hypot(r,o,s))?(r*=f=1/f,o*=f,s*=f):(r=0,o=0,s=0),c=d*s-p*o,l=p*r-u*s,h=u*o-d*r,(f=Math.hypot(c,l,h))?(c*=f=1/f,l*=f,h*=f):(c=0,l=0,h=0),t[0]=r,t[1]=c,t[2]=u,t[3]=0,t[4]=o,t[5]=l,t[6]=d,t[7]=0,t[8]=s,t[9]=h,t[10]=p,t[11]=0,t[12]=-(r*E+o*g+s*T),t[13]=-(c*E+l*g+h*T),t[14]=-(u*E+d*g+p*T),t[15]=1)}(n,this.positionEye,this.positionTarget,this.vectorUp),f(t,t,n),m(e),o=t,(r=i)[0]=o[0],r[1]=o[1],r[2]=o[2],r[3]=o[3],r[4]=o[4],r[5]=o[5],r[6]=o[6],r[7]=o[7],r[8]=o[8],r[9]=o[9],r[10]=o[10],r[11]=o[11],r[12]=o[12],r[13]=o[13],r[14]=o[14],r[15]=o[15],f(i,i,e)}setPositionEye(t,e,i){this.positionEye[0]=t,this.positionEye[1]=e,this.positionEye[2]=i}setPositionTarget(t,e,i){this.positionTarget[0]=t,this.positionTarget[1]=e,this.positionTarget[2]=i}setFOV(t){this.fovY=t}setAspectRatio(t,e){this.aspectRatio=t/e}getDirectionNormalised(){const t=this.positionEye,e=this.positionTarget,i=h(t[0]-e[0],t[1]-e[1],t[2]-e[2]);return u(i,i),i}getMatrixMVP(){return this.matrixMVP}}class g{constructor(t){this.CONTROLLER=t}init(t){this.CAMERA_PERSPECTIVE=new E,this.RADIUS_INTERIOR=1e-4,this.RADIUS_EXTERIOR=1.5,this.RADIUS_LERP=.1,this.radius=this.RADIUS_INTERIOR,this.radiusTarget=this.radius,this.ROTATION_LERP=t.rotationLerp?t.rotationLerp:.1,this.rotationThetaMin=0,this.rotationThetaMax=0,this.rotationThetaIsLimited=!1,this.rotationPhiMin=.01*Math.PI,this.rotationPhiMax=.99*Math.PI,this.rotationTheta=t.rotationThetaInitial?t.rotationThetaInitial:0,this.rotationPhi=t.rotationPhiInitial?t.rotationPhiInitial:.5*Math.PI,this.rotationTargetTheta=this.rotationTheta,this.rotationTargetPhi=this.rotationPhi,this.ZOOM_FOV_BASE=45,this.ZOOM_MAX=.5,this.ZOOM_DELTA=this.ZOOM_MAX/5,this.ZOOM_LERP=.1,this.zoom=0,this.zoomTarget=0,this.DISTANCE_MOVE_FOR_CHANGE=1e-5,this.hasChangedThisFrame=!0,this.tick()}tick(){const{ROTATION_LERP:t,CAMERA_PERSPECTIVE:e,DISTANCE_MOVE_FOR_CHANGE:i}=this,n=2*Math.PI,r=this.radius,o=this.zoom,s=this.rotationTheta,a=this.rotationPhi;this.radius+=(this.radiusTarget-this.radius)*this.RADIUS_LERP,this.rotationTheta+=(this.rotationTargetTheta-this.rotationTheta)*t,this.rotationTheta>n&&(this.rotationTheta-=n,this.rotationTargetTheta-=n),this.rotationTheta<-n&&(this.rotationTheta+=n,this.rotationTargetTheta+=n),this.rotationPhi+=(this.rotationTargetPhi-this.rotationPhi)*t;const c=Math.sin(this.rotationTheta),l=Math.cos(this.rotationTheta),h=Math.sin(this.rotationPhi),u=Math.cos(this.rotationPhi);e.setPositionEye(h*c*this.radius,u*this.radius,h*l*this.radius),this.zoom+=(this.zoomTarget-this.zoom)*this.ZOOM_LERP,e.setFOV(this.ZOOM_FOV_BASE+this.zoom),e.update();let d=!1;Math.abs(r-this.radius)>i&&(d=!0),Math.abs(o-this.zoom)>i&&(d=!0),Math.abs(s-this.rotationTheta)>i&&(d=!0),Math.abs(a-this.rotationPhi)>i&&(d=!0),this.hasChangedThisFrame=d}getThetaBound(t){if(!1===this.rotationThetaIsLimited)return t;let e=t;const{rotationThetaMin:i}=this,{rotationThetaMax:n}=this;return e<i&&(e=i),e>n&&(e=n),e}getPhiBound(t){const{rotationPhiMin:e}=this,{rotationPhiMax:i}=this;let n=t;return n<e&&(n=e),n>i&&(n=i),n}rotateHorizontal(t){const e=t*(1+this.zoom),i=this.rotationTargetTheta-e;this.rotationTargetTheta=this.getThetaBound(i)}rotateVertical(t){const e=t*(1+this.zoom),i=this.rotationTargetPhi-e;this.rotationTargetPhi=this.getPhiBound(i)}setRotation(t,e){this.rotationTheta=this.getThetaBound(t),this.rotationTargetTheta=this.rotationTheta,this.rotationPhi=this.getPhiBound(e),this.rotationTargetPhi=this.rotationPhi}setRotationTarget(t,e){const i=2*Math.PI;let n=t;for(;n>i;)n-=i;for(;n<-i;)n+=i;n=this.getThetaBound(n),n=this.closestRotation(n,this.rotationTargetTheta),this.rotationTargetTheta=n,this.rotationTargetPhi=this.getPhiBound(e)}closestRotation(t,e){let i=t;for(;i>e+Math.PI;)i-=2*Math.PI;for(;i<e-Math.PI;)i+=2*Math.PI;return i}setRotationLimitsTheta(t,e){this.rotationThetaMin=t,this.rotationThetaMax=e,this.rotationThetaIsLimited=!0}clearRotationLimitsTheta(){this.rotationThetaMin=0,this.rotationThetaMax=0,this.rotationThetaIsLimited=!1}setRotationLimitsPhi(t,e){this.rotationPhiMin=t,this.rotationPhiMax=e}clearRotationLimitsPhi(){this.rotationPhiMin=.01*Math.PI,this.rotationPhiMax=.99*Math.PI}getZoomTarget(){return-this.zoomTarget}zoomIn(){const{ZOOM_MAX:t}=this;let e=this.zoomTarget-this.ZOOM_DELTA;e<-t&&(e=-t),this.zoomTarget=e}zoomOut(){let t=this.zoomTarget+this.ZOOM_DELTA;t>0&&(t=0),this.zoomTarget=t}setZoom(t){const{ZOOM_MAX:e}=this;let i=-t;i<-e&&(i=-e),i>0&&(i=0),this.zoom=i,this.zoomTarget=i}setZoomTarget(t){const{ZOOM_MAX:e}=this;let i=-t;i<-e&&(i=-e),this.zoomTarget=i}setExternalView(t){this.radiusTarget=t?this.RADIUS_EXTERIOR:this.RADIUS_INTERIOR}setSize(t,e){const{CAMERA_PERSPECTIVE:i}=this;i.setAspectRatio(t,e)}getMatrixMVP(){return this.CAMERA_PERSPECTIVE.getMatrixMVP()}getDirectionNormalised(){return this.CAMERA_PERSPECTIVE.getDirectionNormalised()}getDirectionNormalisedInverted(){const t=this.CAMERA_PERSPECTIVE.getDirectionNormalised();return t[0]=-t[0],t[1]=-t[1],t[2]=-t[2],t}getRotationPhi(){return this.rotationPhi}getRotationTheta(){return this.rotationTheta}getHasChangedThisFrame(){return this.hasChangedThisFrame}}class T{constructor(t,e){this.CONTROLLER=t,this.CANVAS=e,this.DEVICE_PIXEL_RATIO=window.devicePixelRatio||1,this.positionPreviousX=-1,this.positionPreviousY=-1,this.isDown=!1}enable(){const{CANVAS:t}=this;this.disable(),t.onmousedown=this.onMouseDown.bind(this),t.ontouchstart=this.onTouchStart.bind(this),t.onmousemove=this.onMouseMove.bind(this),t.ontouchmove=this.onTouchMove.bind(this),t.onmouseup=this.onMouseUp.bind(this),t.onmouseout=this.onMouseOut.bind(this),t.ontouchend=this.onTouchEnd.bind(this),t.onwheel=this.onWheel.bind(this)}disable(){const{CANVAS:t}=this;t.onmousedown=void 0,t.ontouchstart=void 0,t.onmousemove=void 0,t.ontouchmove=void 0,t.onmouseup=void 0,t.onmouseout=void 0,t.ontouchend=void 0,t.onwheel=void 0}onMouseDown(t){t.preventDefault();const e=this.CANVAS.getBoundingClientRect();this.onInteractionStart(t.clientX-e.left,t.clientY-e.top)}onTouchStart(t){t.preventDefault();const e=t.changedTouches[0],i=this.CANVAS.getBoundingClientRect();this.onInteractionStart(e.clientX-i.left,e.clientY-i.top)}onInteractionStart(t,e){this.positionPreviousX=t,this.positionPreviousY=e,this.isDown=!0}onMouseMove(t){t.preventDefault();const e=this.CANVAS.getBoundingClientRect();this.onInteractionMove(t.clientX-e.left,t.clientY-e.top)}onTouchMove(t){t.preventDefault();const e=t.changedTouches[0],i=this.CANVAS.getBoundingClientRect();this.onInteractionMove(e.clientX-i.left,e.clientY-i.top)}onInteractionMove(t,e){if(!0===this.isDown){const{CONTROLLER:i}=this;i.rotateHorizontal(-(t-this.positionPreviousX)/500/this.DEVICE_PIXEL_RATIO),i.rotateVertical(-(e-this.positionPreviousY)/500/this.DEVICE_PIXEL_RATIO)}this.positionPreviousX=t,this.positionPreviousY=e}onMouseUp(t){t.preventDefault();const e=this.CANVAS.getBoundingClientRect();this.onInteractionEnd(t.clientX-e.left,t.clientY-e.top)}onTouchEnd(t){t.preventDefault();const e=t.changedTouches[0],i=this.CANVAS.getBoundingClientRect();this.onInteractionEnd(e.clientX-i.left,e.clientY-i.top)}onMouseOut(t){t.preventDefault();const e=this.CANVAS.getBoundingClientRect();this.onInteractionEnd(t.clientX-e.left,t.clientY-e.top)}onInteractionEnd(t,e){this.positionPreviousX=t,this.positionPreviousY=e,this.isDown=!1}onWheel(t){t.preventDefault(),t.deltaY<0?this.CONTROLLER.onInteractionZoom(-1):t.deltaY>0&&this.CONTROLLER.onInteractionZoom(1)}}function v(t,e,i){const n=t.createShader(t.VERTEX_SHADER);t.shaderSource(n,e),t.compileShader(n),t.getShaderParameter(n,t.COMPILE_STATUS)||console.error(`Util. getShaderProgram. Vert. ${t.getShaderInfoLog(n)}`);const r=t.createShader(t.FRAGMENT_SHADER);t.shaderSource(r,i),t.compileShader(r),t.getShaderParameter(r,t.COMPILE_STATUS)||console.error(`Util. getShaderProgram. Frag. ${t.getShaderInfoLog(r)}`);const o=t.createProgram();return t.attachShader(o,n),t.attachShader(o,r),t.linkProgram(o),t.getProgramParameter(o,t.LINK_STATUS)||console.error(`Util. getShaderProgram. Link. ${t.getProgramInfoLog(o)}`),null!==o?o:null}function R(){return new Float32Array([0,0,1,0,1,1,1,1,0,1,0,0])}var A=i(2195),I=i.n(A),_=i(7580),O=i.n(_);class y{constructor(t,e,i,n,r,o,s){this.GL=t,this.CALLBACK_LOADED=o,this.IS_TEXTURE_A=s,this.IS_EXTENSION_ANISOTROPIC=e.getIsExtensionAnisotropic(),!0===this.IS_EXTENSION_ANISOTROPIC&&(this.EXTENSION_ANISOTROPIC=e.getExtensionAnisotropic(),this.EXTENSION_ANISOTROPIC_MAX=e.getExtensionAnisotropicMax()),this.IS_WEBGL_2_AVAILABLE=e.getIsWebGL2Available();const{GL:a}=this;this.TEXTURE=a.createTexture(),a.bindTexture(a.TEXTURE_2D,this.TEXTURE),a.texImage2D(a.TEXTURE_2D,0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,i),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.LINEAR),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.LINEAR),!0===this.IS_EXTENSION_ANISOTROPIC&&a.texParameterf(a.TEXTURE_2D,this.EXTENSION_ANISOTROPIC.TEXTURE_MAX_ANISOTROPY_EXT,this.EXTENSION_ANISOTROPIC_MAX),a.bindTexture(a.TEXTURE_2D,null),this.IMAGE=new Image,this.IMAGE.width=n,this.IMAGE.height=r,this.IMAGE.crossOrigin="",this.IMAGE.onload=this.onImageLoaded.bind(this),this.IMAGE.onerror=this.onImageLoadError.bind(this),this.url="",this.IMAGE_RELOAD_COUNT_MAX=3,this.IMAGE_RELOAD_DELAY_MS=500,this.imageReloadCount=this.IMAGE_RELOAD_COUNT_MAX,this.imageReloadTimeout=void 0,this.isImageLoaded=!1}loadImage(t){void 0!==this.imageReloadTimeout&&(clearTimeout(this.imageReloadTimeout),this.imageReloadTimeout=void 0),this.imageReloadCount=this.IMAGE_RELOAD_COUNT_MAX,this.isImageLoaded=!1,this.url=t,this.IMAGE.src=t}onImageLoaded(){this.updateTexture(),this.isImageLoaded=!0,this.CALLBACK_LOADED(this.IS_TEXTURE_A,this.url)}onImageLoadError(){this.imageReloadCount>0&&(this.imageReloadTimeout=setTimeout(this.onDelayedImageReload.bind(this),this.IMAGE_RELOAD_DELAY_MS))}onDelayedImageReload(){this.imageReloadTimeout=void 0,!0!==this.isImageLoaded&&(this.imageReloadCount-=1,this.IMAGE.src=this.url)}updateTexture(){const{GL:t,IMAGE:e,TEXTURE:i}=this;t.bindTexture(t.TEXTURE_2D,i),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,e),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),!0===this.IS_WEBGL_2_AVAILABLE&&(t.generateMipmap(t.TEXTURE_2D),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR_MIPMAP_LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR)),!0===this.IS_EXTENSION_ANISOTROPIC&&t.texParameterf(t.TEXTURE_2D,this.EXTENSION_ANISOTROPIC.TEXTURE_MAX_ANISOTROPY_EXT,this.EXTENSION_ANISOTROPIC_MAX),t.bindTexture(t.TEXTURE_2D,null)}getTexture(){return this.TEXTURE}}class C{constructor(t,e,i,n){this.GL=t,this.CUBE_FACE=e;const{GL:r}=this;this.PROGRAM=v(r,I(),O()),r.useProgram(this.PROGRAM),this.U_MATRIX_MVP=r.getUniformLocation(this.PROGRAM,"uMVP"),this.BUFFER_POSITIONS=r.createBuffer(),this.A_POSITION=r.getAttribLocation(this.PROGRAM,"aPosition"),r.enableVertexAttribArray(this.A_POSITION),this.TEXTURE_COORDINATES=R(),this.BUFFER_TEXTURE_COORDINATES=r.createBuffer(),this.A_TEXTURE_COORDINATES=r.getAttribLocation(this.PROGRAM,"aTexcoord"),r.enableVertexAttribArray(this.A_TEXTURE_COORDINATES),r.bindBuffer(r.ARRAY_BUFFER,this.BUFFER_TEXTURE_COORDINATES),r.bufferData(r.ARRAY_BUFFER,this.TEXTURE_COORDINATES,r.STATIC_DRAW),r.vertexAttribPointer(this.A_TEXTURE_COORDINATES,2,r.FLOAT,!1,0,0),this.U_SAMPLER_A=r.getUniformLocation(this.PROGRAM,"uSamplerA"),this.U_SAMPLER_B=r.getUniformLocation(this.PROGRAM,"uSamplerB"),this.TEXTURE_A=new y(r,i,n,512,512,this.onTextureLoaded.bind(this),!0),this.TEXTURE_B=new y(r,i,n,512,512,this.onTextureLoaded.bind(this),!1),this.U_MIX_AB=r.getUniformLocation(this.PROGRAM,"uMixAB"),this.U_ALPHA=r.getUniformLocation(this.PROGRAM,"uAlpha"),r.useProgram(null)}render(t,e,i,n,r){const{GL:o}=this;o.useProgram(this.PROGRAM),o.uniformMatrix4fv(this.U_MATRIX_MVP,!1,t),o.bindBuffer(o.ARRAY_BUFFER,this.BUFFER_POSITIONS),o.bufferData(o.ARRAY_BUFFER,i,o.STATIC_DRAW),o.vertexAttribPointer(this.A_POSITION,3,o.FLOAT,!1,0,0),o.bindBuffer(o.ARRAY_BUFFER,this.BUFFER_TEXTURE_COORDINATES),o.vertexAttribPointer(this.A_TEXTURE_COORDINATES,2,o.FLOAT,!1,0,0),o.activeTexture(o.TEXTURE0),o.uniform1i(this.U_SAMPLER_A,0),o.bindTexture(o.TEXTURE_2D,this.TEXTURE_A.getTexture()),o.activeTexture(o.TEXTURE1),o.uniform1i(this.U_SAMPLER_B,1),o.bindTexture(o.TEXTURE_2D,this.TEXTURE_B.getTexture()),o.uniform1f(this.U_MIX_AB,n),o.uniform1f(this.U_ALPHA,r),o.drawArrays(o.TRIANGLES,0,e),o.bindBuffer(o.ARRAY_BUFFER,null),o.activeTexture(o.TEXTURE0),o.bindTexture(o.TEXTURE_2D,null),o.activeTexture(o.TEXTURE1),o.bindTexture(o.TEXTURE_2D,null),o.useProgram(null)}loadTextureA(t){this.TEXTURE_A.loadImage(t)}loadTextureB(t){this.TEXTURE_B.loadImage(t)}onTextureLoaded(t,e){this.CUBE_FACE.onTextureLoaded(t,e)}}var N=i(7132),L=i.n(N);class b{constructor(t){this.GL=t;const{GL:e}=this;this.PROGRAM=v(e,I(),L()),e.useProgram(this.PROGRAM),this.U_MATRIX_MVP=e.getUniformLocation(this.PROGRAM,"uMVP"),this.BUFFER_POSITIONS=e.createBuffer(),this.A_POSITION=e.getAttribLocation(this.PROGRAM,"aPosition"),e.enableVertexAttribArray(this.A_POSITION),this.U_BLURRED=e.getUniformLocation(this.PROGRAM,"uBlurred"),e.useProgram(null)}render(t,e,i,n){const{GL:r}=this;r.useProgram(this.PROGRAM),r.uniformMatrix4fv(this.U_MATRIX_MVP,!1,t),r.bindBuffer(r.ARRAY_BUFFER,this.BUFFER_POSITIONS),r.bufferData(r.ARRAY_BUFFER,i,r.STATIC_DRAW),r.vertexAttribPointer(this.A_POSITION,3,r.FLOAT,!1,0,0),r.uniform1f(this.U_BLURRED,n),r.drawArrays(r.TRIANGLES,0,e),r.bindBuffer(r.ARRAY_BUFFER,null),r.activeTexture(r.TEXTURE0),r.bindTexture(r.TEXTURE_2D,null),r.activeTexture(r.TEXTURE1),r.bindTexture(r.TEXTURE_2D,null),r.useProgram(null)}}class S{constructor(t,e,i,n,r,o,s,a,c,l){this.GL=t,this.ID_SURFACE=e,this.ID_X=i,this.ID_Y=n,this.VERTICES=new Float32Array([r[0],r[1],r[2],o[0],o[1],o[2],s[0],s[1],s[2],s[0],s[1],s[2],a[0],a[1],a[2],r[0],r[1],r[2]]),this.VERTEX_TOTAL=this.VERTICES.length/3,this.CENTER_POINT=h((r[0]+s[0])/2,(r[1]+s[1])/2,(r[2]+s[2])/2),this.RENDERER_COLOUR=new C(t,this,l,c),this.RENDERER_BLUR_MASK=new b(t),this.MIX_AB_LERP=.05,this.mixAB=0,this.mixABTarget=0,this.ALPHA_LERP=.05,this.alpha=0,this.alphaTarget=1,this.isTextureA=!1,this.BLUR_LERP=.05,this.blur=1,this.blurTarget=1,this.DISTANCE_MOVE_FOR_CHANGE=1e-4,this.hasChangedThisFrame=!0,this.hasDelayedLoad=!1,this.isActive=!1}tick(){const{DISTANCE_MOVE_FOR_CHANGE:t}=this,e=this.alpha,i=this.mixAB,n=this.blur;this.alpha+=(this.alphaTarget-this.alpha)*this.ALPHA_LERP,this.mixAB+=(this.mixABTarget-this.mixAB)*this.MIX_AB_LERP,this.blur+=(this.blurTarget-this.blur)*this.BLUR_LERP;let r=!1;Math.abs(e-this.alpha)>t&&(r=!0),Math.abs(i-this.mixAB)>t&&(r=!0),Math.abs(n-this.blur)>t&&(r=!0),this.hasChangedThisFrame=r}renderColour(t){!1!==this.isActive&&this.RENDERER_COLOUR.render(t,this.VERTEX_TOTAL,this.VERTICES,this.mixAB,this.alpha)}renderBlurMask(t){!1!==this.isActive&&this.RENDERER_BLUR_MASK.render(t,this.VERTEX_TOTAL,this.VERTICES,this.blur)}setActive(){!0!==this.isActive&&(!0===this.hasDelayedLoad&&this.loadImage(this.latestRequestedUrl),this.isActive=!0)}setInactive(){!1!==this.isActive&&(this.isActive=!1)}setImagePath(t){const e=`${t}${this.ID_SURFACE}_${this.ID_X}_${this.ID_Y}.jpg`;this.latestRequestedUrl=e,!1===this.isActive?this.hasDelayedLoad=!0:this.loadImage(e),this.blurTarget=1}loadImage(t){t===this.latestRequestedUrl&&(!0===this.isTextureA?this.RENDERER_COLOUR.loadTextureA(t):this.RENDERER_COLOUR.loadTextureB(t),this.hasDelayedLoad=!1)}onTextureLoaded(t,e){e===this.latestRequestedUrl&&(this.alphaTarget=1,this.mixABTarget=!0===t?0:1,this.blurTarget=0,this.isTextureA=!t)}getCenterPoint(){return this.CENTER_POINT}getHasChangedThisFrame(){return this.hasChangedThisFrame}}class x{constructor(t){this.CONTROLLER=t}init(t,e,i,n,r,o){this.RENDER_CONTROLLER=e,this.CUBE_DETAIL=i,this.FACE_ANGLE_ACTIVE=n;const s=function(t,e,i,n){function r(t){const e=t.toString(16);return 1===e.length?`0${e}`:e}function o(t,e,i){return`#${r(t)}${r(e)}${r(i)}`}const s=document.createElement("canvas");s.width=t,s.height=e;const a=s.getContext("2d"),c=o(Math.floor(255*i[0]),Math.floor(255*i[1]),Math.floor(255*i[2]));a.fillStyle=c,a.fillRect(0,0,t,e);const l=o(Math.floor(255*n[0]),Math.floor(255*n[1]),Math.floor(255*n[2]));return a.fillStyle=l,a.fillRect(0,0,2,2),a.fillRect(0,254,2,2),a.fillRect(254,0,2,2),a.fillRect(254,254,2,2),a.fillRect(126,126,4,4),s}(256,256,r,o);this.FACE_TOTAL=this.CUBE_DETAIL*this.CUBE_DETAIL*6,this.FACES=[];const a=1/this.CUBE_DETAIL,c=a*(-.5*this.CUBE_DETAIL);let h,u,d,p,m,f,E,g,T;for(h=0;h<this.CUBE_DETAIL;h+=1)for(u=0;u<this.CUBE_DETAIL;u+=1)p=c+h*a+1,m=c+u*a,d=this.CUBE_DETAIL-u-1,f=[c,m,1-p],E=[c,m,1-(p+a)],g=[c,m+a,1-(p+a)],T=[c,m+a,1-p],this.FACES.push(new S(t,0,h,d,f,E,g,T,s,this.RENDER_CONTROLLER));for(h=0;h<this.CUBE_DETAIL;h+=1)for(u=0;u<this.CUBE_DETAIL;u+=1)p=c+h*a,m=c+u*a,d=this.CUBE_DETAIL-u-1,f=[-c,m,p],E=[-c,m,p+a],g=[-c,m+a,p+a],T=[-c,m+a,p],this.FACES.push(new S(t,1,h,d,f,E,g,T,s,this.RENDER_CONTROLLER));for(h=0;h<this.CUBE_DETAIL;h+=1)for(u=0;u<this.CUBE_DETAIL;u+=1)p=c+h*a+1,m=c+u*a+1,d=this.CUBE_DETAIL-u-1,f=[1-p,-c,1-m],E=[1-(p+a),-c,1-m],g=[1-(p+a),-c,1-(m+a)],T=[1-p,-c,1-(m+a)],this.FACES.push(new S(t,2,h,d,f,E,g,T,s,this.RENDER_CONTROLLER));for(h=0;h<this.CUBE_DETAIL;h+=1)for(u=0;u<this.CUBE_DETAIL;u+=1)p=c+h*a+1,m=c+u*a,d=this.CUBE_DETAIL-u-1,f=[1-p,c,m],E=[1-(p+a),c,m],g=[1-(p+a),c,m+a],T=[1-p,c,m+a],this.FACES.push(new S(t,3,h,d,f,E,g,T,s,this.RENDER_CONTROLLER));for(h=0;h<this.CUBE_DETAIL;h+=1)for(u=0;u<this.CUBE_DETAIL;u+=1)p=c+h*a+1,m=c+u*a,d=this.CUBE_DETAIL-u-1,f=[1-p,m,-c],E=[1-(p+a),m,-c],g=[1-(p+a),m+a,-c],T=[1-p,m+a,-c],this.FACES.push(new S(t,4,h,d,f,E,g,T,s,this.RENDER_CONTROLLER));for(h=0;h<this.CUBE_DETAIL;h+=1)for(u=0;u<this.CUBE_DETAIL;u+=1)p=c+h*a,m=c+u*a,d=this.CUBE_DETAIL-u-1,f=[p,m,c],E=[p+a,m,c],g=[p+a,m+a,c],T=[p,m+a,c],this.FACES.push(new S(t,5,h,d,f,E,g,T,s,this.RENDER_CONTROLLER));this.faceDirectionNormalised=l(),this.hasChangedThisFrame=!1}tick(t){const{FACES:e,FACE_ANGLE_ACTIVE:i,faceDirectionNormalised:n}=this;let r=!1;for(let o=0;o<e.length;o+=1){const s=e[o];u(n,s.getCenterPoint()),d(t,n)<i?s.setActive():s.setInactive(),s.tick(),!0===s.getHasChangedThisFrame()&&(r=!0)}this.hasChangedThisFrame=r}setPathTiles(t,e){const{FACES:i,faceDirectionNormalised:n}=this,r=[];for(let t=0;t<i.length;t+=1){u(n,i[t].getCenterPoint());const o=d(e,n);r.push({id:t,angle:o})}r.sort(this.angleSort);for(let e=0;e<r.length;e+=1)i[r[e].id].setImagePath(t)}angleSort(t,e){return t.angle<e.angle?1:t.angle>e.angle?-1:0}getFaces(){return this.FACES}getFaceTotal(){return this.FACE_TOTAL}getHasChangedThisFrame(){return this.hasChangedThisFrame}}class M{constructor(t){this.GL=t,this.TEXTURE=t.createTexture(),t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,this.TEXTURE),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,null),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),this.FRAMEBUFFER=t.createFramebuffer(),t.bindFramebuffer(t.FRAMEBUFFER,this.FRAMEBUFFER),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,this.TEXTURE,0);const e=t.checkFramebufferStatus(t.FRAMEBUFFER);e!==t.FRAMEBUFFER_COMPLETE&&console.error(`Error. FBOTwo. Status ${e}`),t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null)}setSize(t,e){const{GL:i}=this;i.activeTexture(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,this.TEXTURE),i.texImage2D(i.TEXTURE_2D,0,i.RGBA,t,e,0,i.RGBA,i.UNSIGNED_BYTE,null),i.bindTexture(i.TEXTURE_2D,null)}getTexture(){return this.TEXTURE}getFramebuffer(){return this.FRAMEBUFFER}}class P{constructor(t,e,i){this.GL=t,this.CUBE_CONTROLLER=e,this.SPRITE_CONTROLLER=i}render(t,e,i){const{GL:n,CUBE_CONTROLLER:r,SPRITE_CONTROLLER:o}=this;n.clear(n.COLOR_BUFFER_BIT),n.viewport(0,0,e,i),n.enable(n.CULL_FACE),n.enable(n.BLEND),n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);const s=r.getFaceTotal(),a=r.getFaces();for(let e=0;e<s;e+=1)a[e].renderColour(t);const c=o.getSpriteTotal(),l=o.getSprites();for(let e=0;e<c;e+=1)l[e].render(t);n.enable(n.CULL_FACE),n.disable(n.BLEND)}}class D{constructor(t,e,i){this.GL=t,this.CUBE_CONTROLLER=e,this.SPRITE_CONTROLLER=i}render(t,e,i){const{GL:n,CUBE_CONTROLLER:r,SPRITE_CONTROLLER:o}=this;n.clear(n.COLOR_BUFFER_BIT),n.viewport(0,0,e,i),n.enable(n.CULL_FACE);const s=r.getFaceTotal(),a=r.getFaces();for(let e=0;e<s;e+=1)a[e].renderBlurMask(t);n.enable(n.CULL_FACE)}}function w(){return new Float32Array([-1,-1,1,-1,-1,1,-1,1,1,-1,1,1])}function U(){return new Float32Array([0,0,1,0,0,1,0,1,1,0,1,1])}var F=i(2048),B=i.n(F),G=i(2121),H=i.n(G),k=i(4235),Y=i.n(k);class X{constructor(t,e){this.GL=t;const{GL:i}=this;this.PROGRAM=v(i,Y(),!0===e?B():H()),i.useProgram(this.PROGRAM),this.BUFFER_POSITIONS=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.BUFFER_POSITIONS),t.bufferData(t.ARRAY_BUFFER,w(),t.STATIC_DRAW),this.A_POSITION=t.getAttribLocation(this.PROGRAM,"aPosition"),t.enableVertexAttribArray(this.A_POSITION),t.vertexAttribPointer(this.A_POSITION,2,t.FLOAT,!1,0,0),this.BUFFER_TEXTURE_COORDINATES=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.BUFFER_TEXTURE_COORDINATES),t.bufferData(t.ARRAY_BUFFER,U(),t.STATIC_DRAW),this.A_TEXTURE_COORDINATES=t.getAttribLocation(this.PROGRAM,"aTexcoord"),t.enableVertexAttribArray(this.A_TEXTURE_COORDINATES),t.vertexAttribPointer(this.A_TEXTURE_COORDINATES,2,t.FLOAT,!1,0,0),this.U_RESOLUTION=t.getUniformLocation(this.PROGRAM,"uResolution"),t.uniform2f(this.U_RESOLUTION,1,1),this.U_SAMPLER=t.getUniformLocation(this.PROGRAM,"uSampler"),t.uniform1i(this.U_SAMPLER,0),i.useProgram(null)}render(t,e,i){const{GL:n}=this;n.useProgram(this.PROGRAM),n.clear(n.COLOR_BUFFER_BIT),n.viewport(0,0,t,e),n.bindBuffer(n.ARRAY_BUFFER,this.BUFFER_POSITIONS),n.vertexAttribPointer(this.A_POSITION,2,n.FLOAT,!1,0,0),n.bindBuffer(n.ARRAY_BUFFER,this.BUFFER_TEXTURE_COORDINATES),n.vertexAttribPointer(this.A_TEXTURE_COORDINATES,2,n.FLOAT,!1,0,0),n.uniform2f(this.U_RESOLUTION,t,e),n.activeTexture(n.TEXTURE0),n.bindTexture(n.TEXTURE_2D,i),n.uniform1i(this.U_SAMPLER_COLOUR,0),n.drawArrays(n.TRIANGLES,0,6),n.bindBuffer(n.ARRAY_BUFFER,null),n.useProgram(null)}}var $,V=i(2466),j=i.n(V),z=i(3664),W=i.n(z);class Z{constructor(t){this.GL=t;const{GL:e}=this;this.PROGRAM=v(e,j(),W()),e.useProgram(this.PROGRAM),this.BUFFER_POSITIONS=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.BUFFER_POSITIONS),t.bufferData(t.ARRAY_BUFFER,w(),t.STATIC_DRAW),this.A_POSITION=t.getAttribLocation(this.PROGRAM,"aPosition"),t.enableVertexAttribArray(this.A_POSITION),t.vertexAttribPointer(this.A_POSITION,2,t.FLOAT,!1,0,0),this.BUFFER_TEXTURE_COORDINATES=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.BUFFER_TEXTURE_COORDINATES),t.bufferData(t.ARRAY_BUFFER,U(),t.STATIC_DRAW),this.A_TEXTURE_COORDINATES=t.getAttribLocation(this.PROGRAM,"aTexcoord"),t.enableVertexAttribArray(this.A_TEXTURE_COORDINATES),t.vertexAttribPointer(this.A_TEXTURE_COORDINATES,2,t.FLOAT,!1,0,0),this.U_SAMPLER_COLOUR=t.getUniformLocation(this.PROGRAM,"uSamplerColour"),t.uniform1i(this.U_SAMPLER_COLOUR,0),this.U_SAMPLER_MASK=t.getUniformLocation(this.PROGRAM,"uSamplerMask"),t.uniform1i(this.U_SAMPLER_MASK,1),this.U_SAMPLER_BLUR=t.getUniformLocation(this.PROGRAM,"uSamplerBlur"),t.uniform1i(this.U_SAMPLER_BLUR,2),e.useProgram(null)}render(t,e,i,n,r){const{GL:o}=this;o.useProgram(this.PROGRAM),o.clear(o.COLOR_BUFFER_BIT),o.viewport(0,0,t,e),o.bindBuffer(o.ARRAY_BUFFER,this.BUFFER_POSITIONS),o.vertexAttribPointer(this.A_POSITION,2,o.FLOAT,!1,0,0),o.bindBuffer(o.ARRAY_BUFFER,this.BUFFER_TEXTURE_COORDINATES),o.vertexAttribPointer(this.A_TEXTURE_COORDINATES,2,o.FLOAT,!1,0,0),o.activeTexture(o.TEXTURE0),o.bindTexture(o.TEXTURE_2D,i),o.uniform1i(this.U_SAMPLER_COLOUR,0),o.activeTexture(o.TEXTURE1),o.bindTexture(o.TEXTURE_2D,n),o.uniform1i(this.U_SAMPLER_MASK,1),o.activeTexture(o.TEXTURE2),o.bindTexture(o.TEXTURE_2D,r),o.uniform1i(this.U_SAMPLER_BLUR,2),o.drawArrays(o.TRIANGLES,0,6),o.bindBuffer(o.ARRAY_BUFFER,null),o.useProgram(null)}}class q{constructor(t){this.CONTROLLER=t}init(t,e,i,n,r){this.GL=t,this.IS_WEBGL_2_AVAILABLE=r,this.GL.clearColor(n[0],n[1],n[2],1),this.isExtensionAnisotropic=!1,this.extensionAnisotropicMax=-1,this.EXTENSION_ANISOTROPIC=this.GL.getExtension("EXT_texture_filter_anisotropic")||this.GL.getExtension("MOZ_EXT_texture_filter_anisotropic")||this.GL.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.EXTENSION_ANISOTROPIC&&(this.isExtensionAnisotropic=!0,this.extensionAnisotropicMax=this.GL.getParameter(this.EXTENSION_ANISOTROPIC.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.FBO_COLOUR=new M(t),this.FBO_BLUR_MASK=new M(t),this.FBO_BLURRED_1=new M(t),this.FBO_BLURRED_2=new M(t),this.RENDERER_COLOUR=new P(t,e,i),this.RENDERER_BLUR_MASK=new D(t,e,i),this.RENDERER_BLURRED_1=new X(t,!0),this.RENDERER_BLURRED_2=new X(t,!1),this.RENDERER_SCREEN=new Z(t)}render(t){const{GL:e,FBO_COLOUR:i,FBO_BLUR_MASK:n,FBO_BLURRED_1:r,FBO_BLURRED_2:o,RENDERER_COLOUR:s,RENDERER_BLUR_MASK:a,RENDERER_BLURRED_1:c,RENDERER_BLURRED_2:l,RENDERER_SCREEN:h}=this,u=this.width,d=this.height,p=.5*u,m=.5*d;e.bindFramebuffer(e.FRAMEBUFFER,i.getFramebuffer()),s.render(t,u,d),e.bindFramebuffer(e.FRAMEBUFFER,null),e.bindFramebuffer(e.FRAMEBUFFER,n.getFramebuffer()),a.render(t,u,d),e.bindFramebuffer(e.FRAMEBUFFER,null),e.bindFramebuffer(e.FRAMEBUFFER,r.getFramebuffer()),c.render(p,m,i.getTexture()),e.bindFramebuffer(e.FRAMEBUFFER,null),e.bindFramebuffer(e.FRAMEBUFFER,o.getFramebuffer()),l.render(p,m,r.getTexture()),e.bindFramebuffer(e.FRAMEBUFFER,null),h.render(u,d,i.getTexture(),n.getTexture(),o.getTexture())}setSize(t,e){const i=.5*t,n=.5*e;this.FBO_COLOUR.setSize(t,e),this.FBO_BLUR_MASK.setSize(t,e),this.FBO_BLURRED_1.setSize(i,n),this.FBO_BLURRED_2.setSize(i,n),this.width=t,this.height=e}getIsExtensionAnisotropic(){return this.isExtensionAnisotropic}getExtensionAnisotropic(){return this.EXTENSION_ANISOTROPIC}getExtensionAnisotropicMax(){return this.extensionAnisotropicMax}getIsWebGL2Available(){return this.IS_WEBGL_2_AVAILABLE}}function Q(t,e){const i=Math.sin(t),n=Math.cos(t),r=Math.sin(e);return h(r*i,Math.cos(e),r*n)}function K(t,e,i,n){var r=new c(4);return r[0]=t,r[1]=e,r[2]=i,r[3]=n,r}function J(t,e,i){var n=e[0],r=e[1],o=e[2],s=e[3];return t[0]=i[0]*n+i[4]*r+i[8]*o+i[12]*s,t[1]=i[1]*n+i[5]*r+i[9]*o+i[13]*s,t[2]=i[2]*n+i[6]*r+i[10]*o+i[14]*s,t[3]=i[3]*n+i[7]*r+i[11]*o+i[15]*s,t}$=new c(4),c!=Float32Array&&($[0]=0,$[1]=0,$[2]=0,$[3]=0);class tt{constructor(t,e,i,n,r,o,s,a){this.HOTSPOT_CONTROLLER=t,this.CONTAINER=e,this.ID=r,this.THETA=o,this.PHI=s,this.DIRECTION=a,this.ANGLE_FADE_START=.15,this.ANGLE_FADE_DELTA=.1,this.ANGLE_FADE_END=this.ANGLE_FADE_START+this.ANGLE_FADE_DELTA,this.HOTSPOT=document.createElement("div"),this.HOTSPOT.id=`hotspot_${r}`,this.HOTSPOT.className="pano-hotspot",this.HOTSPOT.style.position="absolute",this.HOTSPOT.style.width="0px",this.HOTSPOT.style.height="0px",this.HOTSPOT.style.userDrag="none",this.HOTSPOT.draggable=!1,this.CONTAINER.appendChild(this.HOTSPOT);const c=document.createElement("IMG");c.className="pano-hotspot-image",c.src=n,c.style.width=`${i[0]}px`,c.style.height=`${i[1]}px`,c.style.marginLeft=.5*-i[0]+"px",c.style.marginTop=.5*-i[1]+"px",this.HOTSPOT.appendChild(c),this.HOTSPOT.onclick=this.onClick.bind(this),this.HOTSPOT.onmouseenter=this.onOver.bind(this),this.HOTSPOT.onmouseleave=this.onOut.bind(this),this.enableInteraction()}tick(t,e,i,n){const{ANGLE_FADE_START:r,ANGLE_FADE_DELTA:o,ANGLE_FADE_END:s,HOTSPOT:a,DIRECTION:c}=this,l=.5*t,h=.5*e;let u=d(i,c);!0===Number.isNaN(u)&&(u=0),u/=Math.PI;let p=0,m="none";u<r?(p=1,m="initial"):u<s&&(p=1-(u-r)/o,m="initial");const f=K(.5*-c[0],.5*-c[1],.5*-c[2],1);J(f,f,n);let E=f[3];E<.01&&(E=.01),f[0]/=E,f[1]/=E,f[2]/=E;const g=l+l*f[0],T=e-(h+h*f[1]);a.style.opacity=p,a.style.display=m,a.style.transform=`translate3d(${g}px, ${T}px, 0px)`}highlight(){this.HOTSPOT.classList.add("highlighted")}lowlight(){this.HOTSPOT.classList.remove("highlighted")}onClick(t){t.preventDefault(),this.HOTSPOT_CONTROLLER.onHotspotClick(this.ID,this.THETA,this.PHI)}enableInteraction(){this.HOTSPOT.style.pointerEvents="auto"}disableInteraction(){this.HOTSPOT.style.pointerEvents="none"}onOver(t){t.preventDefault(),this.HOTSPOT.classList.add("over")}onOut(t){t.preventDefault(),this.HOTSPOT.classList.remove("over")}destroy(){this.CONTAINER.removeChild(this.HOTSPOT),this.HOTSPOT=null}getID(){return this.ID}getDirection(){return this.DIRECTION}getThetaPhi(){return[this.THETA,this.PHI]}}class et{constructor(t){this.CONTROLLER=t}init(t,e,i){this.HOLDER=t,this.DIMENSIONS=e,this.URL_ASSET_HOTSPOT=i,this.HOTSPOTS=[]}tick(t,e,i,n){const{HOTSPOTS:r}=this;for(let o=0;o<r.length;o+=1)r[o].tick(t,e,i,n)}add(t,e,i){const n=Q(e,i);u(n,n);const r=new tt(this,this.HOLDER,this.DIMENSIONS,this.URL_ASSET_HOTSPOT,t,e,i,n);this.HOTSPOTS.push(r)}remove(t){const{HOTSPOTS:e}=this;let i=!1;const n=[];for(let r=0;r<e.length;r+=1){const o=e[r];o.getID()===t?(o.destroy(),i=!0):n.push(o)}return this.HOTSPOTS=n,i}highlight(t){console.log(`HotspotController. highlight ${t}`);const{HOTSPOTS:e}=this;for(let i=0;i<e.length;i+=1){const n=e[i];n.getID()===t?n.highlight():n.lowlight()}}lowlightAll(){const{HOTSPOTS:t}=this;for(let e=0;e<t.length;e+=1)t[e].lowlight()}clear(){const{HOTSPOTS:t}=this;for(let e=0;e<t.length;e+=1)t[e].destroy();this.HOTSPOTS=[]}onHotspotClick(t,e,i){this.CONTROLLER.onHotspotClick(t,e,i)}enableHotspots(){const{HOTSPOTS:t}=this;for(let e=0;e<t.length;e+=1)t[e].enableInteraction()}disableHotspots(){const{HOTSPOTS:t}=this;for(let e=0;e<t.length;e+=1)t[e].disableInteraction()}getHotspotById(t){const{HOTSPOTS:e}=this;for(let i=0;i<e.length;i+=1){const n=e[i];if(n.getID()===t)return n}}}class it{constructor(t,e,i,n,r,o){this.ELEMENT_HOLDER_CONTROLLER=t,this.CONTAINER=e,this.ID=i,this.THETA=n,this.PHI=r,this.DIRECTION=o,this.ANGLE_HIDE=.5,this.ELEMENT=document.createElement("div"),this.ELEMENT.id=`element_holder_${i}`,this.ELEMENT.style.position="absolute",this.ELEMENT.style.width="0px",this.ELEMENT.style.height="0px",this.CONTAINER.appendChild(this.ELEMENT)}tick(t,e,i,n){const{ANGLE_HIDE:r,ELEMENT:o,DIRECTION:s}=this,a=.5*t,c=.5*e;let l=d(i,s);!0===Number.isNaN(l)&&(l=0),l/=Math.PI;let h=0,u="none";l<r&&(h=1,u="initial");const p=K(.5*-s[0],.5*-s[1],.5*-s[2],1);J(p,p,n);let m=p[3];m<.01&&(m=.01),p[0]/=m,p[1]/=m,p[2]/=m;const f=a+a*p[0],E=e-(c+c*p[1]);o.style.opacity=h,o.style.display=u,o.style.transform=`translate3d(${f}px, ${E}px, 0px)`}enableInteraction(){this.ELEMENT.style.pointerEvents="auto"}disableInteraction(){this.ELEMENT.style.pointerEvents="none"}destroy(){this.CONTAINER.removeChild(this.ELEMENT),this.ELEMENT=null}getID(){return this.ID}getElement(){return this.ELEMENT}}class nt{constructor(t){this.CONTROLLER=t}init(t){this.HOLDER=t,this.ELEMENT_HOLDERS=[]}tick(t,e,i,n){const{ELEMENT_HOLDERS:r}=this;for(let o=0;o<r.length;o+=1)r[o].tick(t,e,i,n)}add(t,e,i){const n=Q(e,i);u(n,n);const r=new it(this,this.HOLDER,t,e,i,n);return this.ELEMENT_HOLDERS.push(r),r.getElement()}remove(t){const{ELEMENT_HOLDERS:e}=this;let i=!1;const n=[];for(let r=0;r<e.length;r+=1){const o=e[r];o.getID()===t?(o.destroy(),i=!0):n.push(o)}return this.ELEMENT_HOLDERS=n,i}clear(){const{ELEMENT_HOLDERS:t}=this;for(let e=0;e<t.length;e+=1)t[e].destroy();this.ELEMENT_HOLDERS=[]}enableElementHolders(){const{ELEMENT_HOLDERS:t}=this;for(let e=0;e<t.length;e+=1)t[e].enableInteraction()}disableElementHolders(){const{ELEMENT_HOLDERS:t}=this;for(let e=0;e<t.length;e+=1)t[e].disableInteraction()}}var rt=i(8284),ot=i.n(rt),st=i(5047),at=i.n(st);class ct{constructor(t,e,i,n,r,o,s,a){this.GL=t,this.ID=n,this.VERTICES=function(t,e,i){const n=.5*t[0],r=.5*t[1],o=[-n,-r,0],s=[n,-r,0],a=[n,r,0],c=[-n,r,0],l=new Float32Array([o[0],o[1],o[2],s[0],s[1],s[2],a[0],a[1],a[2],a[0],a[1],a[2],c[0],c[1],c[2],o[0],o[1],o[2]]);let h;for(let t=0;t<l.length/3;t+=1)h=3*t,l[h]+=e[0],l[h+1]+=e[1],l[h+2]+=e[2];return l}(r,o),this.VERTEX_TOTAL=this.VERTICES.length/3,this.TEXTURE_COORDINATES=R();const{GL:c}=this;this.PROGRAM=v(c,ot(),at()),c.useProgram(this.PROGRAM),this.U_MATRIX_MVP=c.getUniformLocation(this.PROGRAM,"uMVP"),this.BUFFER_POSITIONS=c.createBuffer(),this.A_POSITION=c.getAttribLocation(this.PROGRAM,"aPosition"),c.enableVertexAttribArray(this.A_POSITION),this.BUFFER_TEXTURE_COORDINATES=c.createBuffer(),this.A_TEXTURE_COORDINATES=c.getAttribLocation(this.PROGRAM,"aTexcoord"),c.enableVertexAttribArray(this.A_TEXTURE_COORDINATES),c.bindBuffer(c.ARRAY_BUFFER,this.BUFFER_TEXTURE_COORDINATES),c.bufferData(c.ARRAY_BUFFER,this.TEXTURE_COORDINATES,c.STATIC_DRAW),c.vertexAttribPointer(this.A_TEXTURE_COORDINATES,2,c.FLOAT,!1,0,0),this.U_SAMPLER=c.getUniformLocation(this.PROGRAM,"uSampler"),this.TEXTURE=new y(c,e,i,this.onTextureLoaded.bind(this),!1),this.TEXTURE.loadImage(a),c.useProgram(null)}render(t){const{GL:e}=this;e.useProgram(this.PROGRAM),e.uniformMatrix4fv(this.U_MATRIX_MVP,!1,t),e.bindBuffer(e.ARRAY_BUFFER,this.BUFFER_POSITIONS),e.bufferData(e.ARRAY_BUFFER,this.VERTICES,e.STATIC_DRAW),e.vertexAttribPointer(this.A_POSITION,3,e.FLOAT,!1,0,0),e.bindBuffer(e.ARRAY_BUFFER,this.BUFFER_TEXTURE_COORDINATES),e.vertexAttribPointer(this.A_TEXTURE_COORDINATES,2,e.FLOAT,!1,0,0),e.activeTexture(e.TEXTURE0),e.uniform1i(this.U_SAMPLER,0),e.bindTexture(e.TEXTURE_2D,this.TEXTURE.getTexture()),e.drawArrays(e.TRIANGLES,0,this.VERTEX_TOTAL),e.bindBuffer(e.ARRAY_BUFFER,null),e.useProgram(null)}onTextureLoaded(t,e){console.log(`Sprite. onTextureLoaded. ${e}`)}destroy(){}}class lt{constructor(t){this.CONTROLLER=t}init(t,e){this.GL=t,this.RENDER_CONTROLLER=e,this.COLOUR_BACKGROUND=[1,1,1],this.SPRITES=[]}tick(){}add(t,e,i,n,r){this.SPRITES.push(new ct(this.GL,this.RENDER_CONTROLLER,this.COLOUR_BACKGROUND,t,e,i,n,r))}clear(){const{SPRITES:t}=this;for(let e=0;e<t.length;e+=1)t[e].destroy();this.SPRITES=[]}getSpriteTotal(){return this.SPRITES.length}getSprites(){return this.SPRITES}}class ht{constructor(t){this.fps=0,this.timeStartPreviousFrame=0,this.timeStartPreviousSample=0,this.frameCount=0,this.FRAME_DURATION_EXPECTED_MS=1/60,this.HOLDER=document.createElement("div"),this.HOLDER.id="debug_performance",this.HOLDER.style.position="absolute",this.HOLDER.style.bottom="10px",this.HOLDER.style.left="10px",this.HOLDER.style.fontFamily="Arial, Helvetica, sans-serif",this.HOLDER.style.fontSize="12px",t.appendChild(this.HOLDER)}tick(t,e,i){this.frameCount+=1,t>this.timeStartPreviousSample+1e3&&(this.fps=this.frameCount,this.timeStartPreviousSample=t,this.frameCount=0);const n=(t-this.timeStartPreviousFrame).toFixed(1),r=(e-t).toFixed(1),o=(i-e).toFixed(1);this.HOLDER.innerHTML=`${n}ms ${this.fps}Hz.\n\t\t\tTick ${r}ms. Render ${o}ms`,this.timeStartPreviousFrame=t}}class ut{constructor(t){this.PERFORMANCE=new ht(t),this.QUARTER=document.createElement("div"),this.QUARTER.id="debug_quarter",this.QUARTER.style.position="absolute",this.QUARTER.style.left=0,this.QUARTER.style.top="50%",this.QUARTER.style.width="50%",this.QUARTER.style.height="50%",this.QUARTER.style.background="#ffffff",this.QUARTER.style.opacity=.2,this.QUARTER.style.pointerEvents="none",t.appendChild(this.QUARTER)}tick(t,e,i){this.PERFORMANCE.tick(t,e,i)}}class dt{constructor(t){this.CONTAINER=t.container,this.CALLBACK_HOTSPOT_CLICK=t.callbackHotspotClick,this.DEVICE_PIXEL_RATIO=window.devicePixelRatio||1,this.IS_DEBUG=!!t.isDebug&&t.isDebug,!0===this.IS_DEBUG&&(console.log("PikViewerPano 1.0.7. Created with:"),console.log(t));const e=t.cubeDetail?t.cubeDetail:4,i=t.cubeCullAngle?t.cubeCullAngle:.4*Math.PI,n=t.colourClear?t.colourClear:[1,1,1],r=t.colourBackground?t.colourBackground:[1,1,1],o=t.colourBackgroundInitialDetail?t.colourBackgroundInitialDetail:[1,1,1];this.CANVAS=document.createElement("canvas"),this.CONTAINER.appendChild(this.CANVAS),this.GL=void 0;const s=function(){try{const t=document.createElement("canvas");return!(!window.WebGL2RenderingContext||!t.getContext("webgl2"))}catch(t){return!1}}();this.log(`webgl 2 available: ${s}`),!0===s?this.GL=this.CANVAS.getContext("webgl2",{alpha:!1,depth:!1,antialias:!0}):(this.GL=this.CANVAS.getContext("webgl",{alpha:!1,depth:!1,antialias:!0}),this.GL||(this.log("webgl context not found, trying experimental-webgl"),this.GL=this.CANVAS.getContext("experimental-webgl",{alpha:!1,antialias:!0}))),this.CAMERA_CONTROLLER=new g,this.CUBE_CONTROLLER=new x(this),this.RENDER_CONTROLLER=new q(this),this.HOTSPOT_CONTROLLER=new et(this),this.ELEMENT_HOLDER_CONTROLLER=new nt(this),this.SPRITE_CONTROLLER=new lt(this),this.RENDER_CONTROLLER.init(this.GL,this.CUBE_CONTROLLER,this.SPRITE_CONTROLLER,n,s),this.CAMERA_CONTROLLER.init({}),this.CUBE_CONTROLLER.init(this.GL,this.RENDER_CONTROLLER,e,i,r,o),this.HOTSPOT_CONTROLLER.init(t.containerHotspot,t.dimensionsHotspot,t.pathAssetHotspot),this.ELEMENT_HOLDER_CONTROLLER.init(t.containerElementHolder),this.SPRITE_CONTROLLER.init(this.GL,this.RENDER_CONTROLLER),this.INTERACTION_SURFACE=new T(this,this.CANVAS),!0===this.IS_DEBUG&&(this.log("isDebug. Debug display is enabled."),this.DEBUG_CONTROLLER=new ut(this.CONTAINER),this.CANVAS.onclick=this.onCanvasDebugClick.bind(this)),this.log(`EXT_texture_filter_anisotropic. ${this.RENDER_CONTROLLER.getIsExtensionAnisotropic()}. Max ${this.RENDER_CONTROLLER.getExtensionAnisotropicMax()}`),this.clientWidth=-1,this.clientHeight=-1,this.width=-1,this.height=-1,void 0!==t.pathTilesInitial&&(this.tick(),this.setPathTiles(t.pathTilesInitial)),this.overrideRenderThisFrame=!1}tick(){const{CONTAINER:t,CAMERA_CONTROLLER:e,CUBE_CONTROLLER:i}=this;let n=!1;const r=performance.now(),o=t.clientWidth,s=t.clientHeight;o===this.clientWidth&&s===this.clientHeight||(this.setSize(o,s),n=!0),e.tick(),!0===e.getHasChangedThisFrame()&&(n=!0);const a=e.getMatrixMVP(),c=e.getDirectionNormalised(),l=e.getDirectionNormalisedInverted();i.tick(l),!0===i.getHasChangedThisFrame()&&(n=!0),!0===this.overrideRenderThisFrame&&(n=!0,this.overrideRenderThisFrame=!1),!0===n&&(this.HOTSPOT_CONTROLLER.tick(this.clientWidth,this.clientHeight,c,a),this.ELEMENT_HOLDER_CONTROLLER.tick(this.clientWidth,this.clientHeight,c,a),this.SPRITE_CONTROLLER.tick());const h=performance.now();!0===n&&this.RENDER_CONTROLLER.render(a);const u=performance.now();!0===this.IS_DEBUG&&this.DEBUG_CONTROLLER.tick(r,h,u)}setPathTiles(t){t!==this.pathTiles?(this.pathTiles=t,this.log(`setPathTiles:\n${this.pathTiles}`),this.CUBE_CONTROLLER.setPathTiles(t,this.CAMERA_CONTROLLER.getDirectionNormalised())):this.log(`setPathTiles. Ignoring as identical to current:\n${this.pathTiles}`)}addHotspot(t,e,i){this.log(`addHotspot '${t}' at ${e} ${i}`),this.HOTSPOT_CONTROLLER.add(t,e,i),this.overrideRenderThisFrame=!0}removeHotspot(t){this.log(`removeHotspot '${t}'`),!1===this.HOTSPOT_CONTROLLER.remove(t)&&this.log(` - Hotspot ${t} not found, abandoning`),this.overrideRenderThisFrame=!0}clearHotspots(){this.log("clearHotspots"),this.HOTSPOT_CONTROLLER.clear(),this.overrideRenderThisFrame=!0}focusHotspot(t){this.log(`focusHotspot '${t}'`);const e=this.HOTSPOT_CONTROLLER.getHotspotById(t);if(void 0===e)return void this.log(`focusHotspot. Hotspot '${t}' not found, abandoning`);const i=e.getThetaPhi();this.CAMERA_CONTROLLER.setRotationTarget(i[0],i[1]),this.overrideRenderThisFrame=!0}onHotspotClick(t,e,i){this.log(`onHotspotClick '${t}' ${e},${i}`),this.CALLBACK_HOTSPOT_CLICK(t,e,i)}highlightHotspot(t){this.log(`highlightHotspot '${t}'`),this.HOTSPOT_CONTROLLER.highlight(t)}lowlightHotspots(){this.log("lowlightHotspots"),this.HOTSPOT_CONTROLLER.lowlightAll()}addElementHolder(t,e,i){return this.log(`addElementHolder ${t} ${e} ${i}`),this.overrideRenderThisFrame=!0,this.ELEMENT_HOLDER_CONTROLLER.add(t,e,i)}removeElementHolder(t){this.log(`removeElementHolder ${t}`),!1===this.ELEMENT_HOLDER_CONTROLLER.remove(t)&&this.log(` - ElementHolder ${t} not found, abandoning`),this.overrideRenderThisFrame=!0}clearElementHolders(){this.log("clearElementHolders"),this.ELEMENT_HOLDER_CONTROLLER.clear(),this.overrideRenderThisFrame=!0}addSprite(t,e,i,n,r){this.log(`addSprite [${e}] [${i}] [${n}] ${r}`),this.SPRITE_CONTROLLER.add(t,e,i,n,r),this.overrideRenderThisFrame=!0}clearSprites(){this.log("clearSprites"),this.SPRITE_CONTROLLER.clear(),this.overrideRenderThisFrame=!0}setZoom(t){this.log(`setZoom ${t}`),this.CAMERA_CONTROLLER.setZoom(t)}getZoomTarget(){return this.CAMERA_CONTROLLER.getZoomTarget()}setZoomTarget(t){this.log(`setZoomTarget ${t}`),this.CAMERA_CONTROLLER.setZoomTarget(t)}zoomIn(){this.log("zoomIn"),this.CAMERA_CONTROLLER.zoomIn()}zoomOut(){this.log("zoomOut"),this.CAMERA_CONTROLLER.zoomOut()}onInteractionZoom(t){t<0?this.CAMERA_CONTROLLER.zoomIn():this.CAMERA_CONTROLLER.zoomOut()}rotateHorizontal(t){this.CAMERA_CONTROLLER.rotateHorizontal(t)}rotateVertical(t){this.CAMERA_CONTROLLER.rotateVertical(t)}setRotation(t,e){this.CAMERA_CONTROLLER.setRotation(t,e)}setRotationTarget(t,e){this.CAMERA_CONTROLLER.setRotationTarget(t,e)}getRotation(){const{CAMERA_CONTROLLER:t}=this;return{theta:t.getRotationTheta(),phi:t.getRotationPhi()}}setRotationLimitsTheta(t,e){this.log(`setRotationLimitsTheta ${t} ${e}`),this.CAMERA_CONTROLLER.setRotationLimitsTheta(t,e)}clearRotationLimitsTheta(){this.log("clearRotationLimitsTheta"),this.CAMERA_CONTROLLER.clearRotationLimitsTheta()}setRotationLimitsPhi(t,e){this.log(`setRotationLimitsPhi ${t} ${e}`),this.CAMERA_CONTROLLER.setRotationLimitsPhi(t,e)}clearRotationLimitsPhi(){this.log("clearRotationLimitsPhi"),this.CAMERA_CONTROLLER.clearRotationLimitsPhi()}getCanvas(){return this.CANVAS}enableInteraction(){this.log("enableInteraction"),this.INTERACTION_SURFACE.enable()}disableInteraction(){this.log("disableInteraction"),this.INTERACTION_SURFACE.disable()}onInteractionStart(){this.HOTSPOT_CONTROLLER.disableHotspots(),this.ELEMENT_HOLDER_CONTROLLER.disableElementHolders()}onInteractionEnd(){this.HOTSPOT_CONTROLLER.enableHotspots(),this.ELEMENT_HOLDER_CONTROLLER.enableElementHolders()}devSetExternalView(t){this.log(`devSetExternalView ${t}`),this.CAMERA_CONTROLLER.setExternalView(t)}onCanvasDebugClick(t){t.preventDefault(),this.logCameraInfo()}logCameraInfo(){const{CAMERA_CONTROLLER:t}=this,e=t.getRotationTheta(),i=t.getRotationPhi();console.log("PikViewerPano. logCameraInfo:"),console.log(` - Client             ${this.clientWidth} ${this.clientHeight} px`),console.log(` - Device Pixel Ratio ${this.DEVICE_PIXEL_RATIO}`),console.log(` - Canvas             ${this.width} ${this.height} px`),console.log(` - Camera. Theta, Phi ${e}, ${i}`)}setSize(t,e){const{CANVAS:i,CAMERA_CONTROLLER:n,DEVICE_PIXEL_RATIO:r}=this;this.clientWidth=t,this.clientHeight=e,this.width=t*r,this.height=e*r,i.style.width=`${t}px`,i.style.height=`${e}px`,i.width=this.width,i.height=this.height,n.setSize(t,e),this.RENDER_CONTROLLER.setSize(this.width,this.height)}log(t){!0===this.IS_DEBUG&&console.log(`PikViewerPano. ${t}`)}getScreenshot(t,e){console.log("PikViewerPano. getScreenshot");const i=this.CAMERA_CONTROLLER.getMatrixMVP();this.RENDER_CONTROLLER.render(i);const n=this.CANVAS.toDataURL(`image/${t}`,e),r=document.createElement("img");return r.src=n,this.CONTAINER.appendChild(r),n}}class pt{constructor(t){this.CONTROLLER=new dt(t),this.tick()}tick(){requestAnimationFrame(this.tick.bind(this)),this.CONTROLLER.tick()}setPathTiles(t){this.CONTROLLER.setPathTiles(t)}addHotspot(t,e,i){this.CONTROLLER.addHotspot(t,e,i)}removeHotspot(t){this.CONTROLLER.removeHotspot(t)}clearHotspots(){this.CONTROLLER.clearHotspots()}focusHotspot(t){this.CONTROLLER.focusHotspot(t)}highlightHotspot(t){this.CONTROLLER.highlightHotspot(t)}lowlightHotspots(){this.CONTROLLER.lowlightHotspots()}addElementHolder(t,e,i){return this.CONTROLLER.addElementHolder(t,e,i)}removeElementHolder(t){this.CONTROLLER.removeElementHolder(t)}clearElementHolders(){this.CONTROLLER.clearElementHolders()}addSprite(t,e,i,n,r){this.CONTROLLER.addSprite(t,e,i,n,r)}clearSprites(){this.CONTROLLER.clearSprites()}rotateHorizontal(t){this.CONTROLLER.rotateHorizontal(t)}rotateVertical(t){this.CONTROLLER.rotateVertical(t)}setRotation(t,e){this.CONTROLLER.setRotation(t,e)}setRotationTarget(t,e){this.CONTROLLER.setRotationTarget(t,e)}getRotation(){return this.CONTROLLER.getRotation()}setZoom(t){this.CONTROLLER.setZoom(t)}getZoomTarget(){return this.CONTROLLER.getZoomTarget()}setZoomTarget(t){this.CONTROLLER.setZoomTarget(t)}zoomIn(){this.CONTROLLER.zoomIn()}zoomOut(){this.CONTROLLER.zoomOut()}setRotationLimitsTheta(t,e){this.CONTROLLER.setRotationLimitsTheta(t,e)}clearRotationLimitsTheta(){this.CONTROLLER.clearRotationLimitsTheta()}setRotationLimitsPhi(t,e){this.CONTROLLER.setRotationLimitsPhi(t,e)}clearRotationLimitsPhi(){this.CONTROLLER.clearRotationLimitsPhi()}enableInteraction(){this.CONTROLLER.enableInteraction()}disableInteraction(){this.CONTROLLER.disableInteraction()}onInteractionStart(){this.CONTROLLER.onInteractionStart()}onInteractionEnd(){this.CONTROLLER.onInteractionEnd()}getCanvas(){return this.CONTROLLER.getCanvas()}devLogCameraInfo(t){this.CONTROLLER.logCameraInfo(t)}devSetExternalView(t){this.CONTROLLER.devSetExternalView(t)}getScreenshot(t,e){return this.CONTROLLER.getScreenshot(t,e)}}class mt{constructor(){this.IS_AVAILABLE_FULLSCREEN=!0;const t=!!navigator.userAgent.match(/Version\/[\d\.]+.*Safari/),e=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream;!0===t&&!0===e&&(this.IS_AVAILABLE_FULLSCREEN=!1)}isAvailableFullscreen(){return this.IS_AVAILABLE_FULLSCREEN}}class ft{constructor(t,e,i,n){this.CONFIGURATOR=t,this.CONTAINER_UI=i,this.ELEMENT_FULLSCREEN=n,this.HIDE_MENU=e.hideMenu||!1,n||(this.HIDE_MENU=!1),this.BUTTON_HOLDER=document.createElement("div"),this.BUTTON_HOLDER.className="fullscreen-button-holder",this.CONTAINER_UI.appendChild(this.BUTTON_HOLDER),this.BUTTON_OPEN=document.createElement("div"),this.BUTTON_OPEN.className="fullscreen-button-open",this.BUTTON_HOLDER.appendChild(this.BUTTON_OPEN),this.BUTTON_CLOSE=document.createElement("div"),this.BUTTON_CLOSE.className="fullscreen-button-close",this.BUTTON_HOLDER.appendChild(this.BUTTON_CLOSE),this.BUTTON_HOLDER.onclick=this.toggleFullScreen.bind(this),document.addEventListener("fullscreenchange",this.onFullScreenChanged.bind(this)),document.addEventListener("mozfullscreenchange",this.onFullScreenChanged.bind(this)),document.addEventListener("webkitfullscreenchange",this.onFullScreenChanged.bind(this)),document.addEventListener("msfullscreenchange",this.onFullScreenChanged.bind(this)),this.showButtonOpen()}showButtonOpen(){this.BUTTON_OPEN.classList.add("active"),this.BUTTON_CLOSE.classList.remove("active")}showButtonClose(){this.BUTTON_OPEN.classList.remove("active"),this.BUTTON_CLOSE.classList.add("active")}onFullScreenChanged(t){t.preventDefault(),document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement?(this.showButtonClose(),this.CONFIGURATOR.onEnterFullscreen()):(this.showButtonOpen(),this.CONFIGURATOR.onLeaveFullscreen())}toggleFullScreen(){const t=window.document,e=this.ELEMENT_FULLSCREEN,i=t.fullscreenElement||t.mozFullScreenElement||t.webkitFullscreenElement||t.msFullscreenElement,n=e.requestFullscreen||e.mozRequestFullScreen||e.webkitRequestFullScreen||e.msRequestFullscreen,r=t.exitFullscreen||t.mozCancelFullScreen||t.webkitExitFullscreen||t.msExitFullscreen;i?(!0===this.HIDE_MENU&&this.showMenu(),r.call(t)):(!0===this.HIDE_MENU&&this.hideMenu(),n.call(e))}hideMenu(){this.ELEMENT_FULLSCREEN.classList.add("full-screen")}showMenu(){this.ELEMENT_FULLSCREEN.classList.remove("full-screen")}}class Et{constructor(t,e,i,n){this.CONFIGURATOR=t;const r=e||{};this.reset(),this.name=e.safe_name,this.filterCategoryName=i.name,this.filterCategory=i,n.registerFilter(e.name,this.name),this.set(r,{})}activate(t){if(this.CONFIGURATOR.log(`Filter. activate. '${this.filterCategoryName}' '${this.name}'`),!0===t);else{for(const t in this.filterCategory.filters){if(!this.filterCategory.filters.hasOwnProperty(t))continue;const e=this.filterCategory.filters[t];e!==this&&e.deactivate()}this.active=!0,this.filterCategory.currentActive=this,this.updateFilters(),void 0!==this.el&&(Array.isArray(this.el)?this.el.forEach((t=>{t.classList.add("active")})):this.el.classList.add("active"))}}deactivate(){this.active&&(this.CONFIGURATOR.log(`Filter. '${this.filterCategoryName}' '${this.name}' deactivating`),this.filterCategory.currentActive=!1,this.active=!1,this.updateFilters(),void 0!==this.el&&(Array.isArray(this.el)?this.el.forEach((t=>{t.classList.remove("active")})):this.el.classList.remove("active")))}triggerReactivate(){for(const t in this.filterCategory.filters)this.filterCategory.filters.hasOwnProperty(t)&&(this.filterCategory.filters[t].reactive=!1);this.filterCategory.isReactiveSet=!0,this.filterCategory.currentReactive=this,this.reactive=!0}setListener(){}removeListener(){}addItem(){}getOption(){}setOption(){}updateFilters(t="reactive"){return this.hideInvalidatedFilters({hideMode:"disabled"}),"reactive"===t&&this.filterCategory.reactive.length>0?(this.CONFIGURATOR.log(`Filter. updateFilter. ${this.filterCategoryName} ${this.name} is reactive. Updating ${this.filterCategory.reactive.length} Items`),this.filterCategory.reactive.forEach((t=>{t.filterUpdate()}))):"reactive"===t&&0!==this.filterCategory.reactive.length||(this.CONFIGURATOR.log(`Filter. updateFilter. ${this.filterCategoryName} ${this.name} is active. Updating ${this.filterCategory.active.length} Items`),this.filterCategory.active.forEach((t=>{t.filterUpdate()}))),this}getFiltersWhichMayLoseValidity(t){const e=[];return this.filterCategory.active.forEach((t=>{t.filters.map((t=>{-1===e.indexOf(t)&&e.push(t)}))})),e}hideInvalidatedFilters(t){(t=t||{}).hideMode&&t.hideMode;const e=t.groupsToCheck?t.groupsToCheck:[],i=t.groupsToExclude?t.groupsToExclude:[];let n=t.layersToCheck?t.layersToCheck:[];const r=t.layersToExclude?t.layersToExclude:[];t.filterMode&&t.filterMode,e.length||i.length&&this.getFiltersWhichMayLoseValidity().forEach((t=>{e.push(t.filterCategoryName)})),n.length||r.length||(n=["Feature","Floors","Walls","Worktops","Handles_Base"])}countValidItems(){return this.allNotifiables.reduce(((t,e)=>t+!e.visibility),0)}countValidItemsPerLayer(){const t={};return this.allNotifiables.forEach((e=>{const i=e.layer.attributes.file_path,n=Number(e.filterCheck().active);t[i]?t[i]+=n:t[i]=n})),t}updateFilterMatchCount(){const t=this.layers.reduce(((t,e)=>t+!e.hidden),0);return this.itemsMatch=t,t}set(t,e,i){let n;"object"==typeof t?n=t:(n={})[t]=e;const r=this.attributes;for(const t in n)r[t]=n[t];this.get("disabled")&&(this.disabled=!0)}get(t){return this.attributes[t]}getItemsInLayer(t){const e=[];return this.allNotifiables.forEach((i=>{i.layer.attributes.file_path===t&&e.push(i)})),e}reset(){this.type=!1,this.image=new Image,this.itemsMatch=0,this.active=!1,this.disabled=!1,this.currentActive=!1,this.reactive=!1,this.options={},this.allNotifiables=[],this.attributes={}}}class gt{constructor(t,e){this.CONFIGURATOR=t,this.reset();const i=this;e.forEach((t=>{i.registerFilterCategory(t,t.filters)}))}registerFilterCategory(t,e){const i=this;this.byGroup[t.safe_name]={name:t.name,filters:{},items:[],active:[],reactive:[],render_as:t.render_as};const n=this.byGroup[t.safe_name];e.forEach((t=>{t=new Et(this.CONFIGURATOR,t,n,i),i.filters.push(t),n.filters[t.name]=t}))}set(t,e,i){return i=i||"active",(e=this.byGroup[t].filters[e]).activate(i),e}get(t){return this.filters[this.byName[t]]||!1}getFilterByName(t){if(!t)return!1;for(let e=0;e<this.filters.length;e+=1){const{attributes:i}=this.filters[e];if(i.name===t||i.safe_name===t)return{name:i.name,filter:this.filters[e]}}}getFiltersByGroup(t){if(!t)return!1;const e=[],i=this.byGroup[t];for(const t in i.filters)e.push(i.filters[t]);return{name:i.name,filters:e,items:[]}||!1}getItemsInLayer(t){const e=[];return this.allNotifiables.forEach((i=>{const n=i.layer.attributes.file_path;Number(i.filterCheck().active)&&n===t&&e.push(i)})),e}registerFilter(t,e){const i=this.filterByName[t];i?i.push(e):this.filterByName[t]=[e]}updateAll(){this.filters.forEach((function(t){t.itemsMatch<1||t.el}))}on(t,e,i){const n=this.byGroup[t.group];if(void 0!==n){if(t.options.length){const r=i.filter.indexOf(t);i.filter[r].group=n;for(let o=0,s=t.options.length;o<s;o+=1){const s=n.filters[t.options[o].toLowerCase()];s?(s.setListener(e,i),s.allNotifiables.push(i),s.itemsMatch+=1):console.warn(`The filter group ${n.name} doesnt have a filter for ${t.options[o]}`),i.filters.push(s),i.filter[r].filters||(i.filter[r].filters=[]),i.filter[r].filters.push(s),n.visible||(n.visible=0),n[t.type].push(i),n.items.push(i),n.visible+=1}}}else console.log(`Missing Filter Group for ${t.group} on ${i.get("name")}`)}off(t,e,i){const n=this.byName[t];void 0===n||(t=this.filters[n]),t.removeListener(e,i)}reset(){this.filters=[],this.byName={},this.byGroup={},this.filterByName={}}}class Tt{constructor(t,e={},i={}){this.CONFIGURATOR=t,this.reset();const n=e;i.layer&&(this.layer=i.layer),this.set(n,i),this.set("hidden",!1),this.disabled=!1,this.hidden=!1;const r=this.CONFIGURATOR.getWebp()?".webp":".jpg";this.set("thumbnail",this.CONFIGURATOR.getDynamicThumbUrl()+this.get("image_path")+r),this.setCustomAttributes()}set(t,e){let i;"object"==typeof t?i=t:(i={})[t]=e,i.filter&&i.filter.length&&(this.filter=i.filter,delete i.filter);const n=this.attributes;for(const t in i)n[t]=i[t];this.get("disabled")&&(this.disabled=!0)}get(t){return this.attributes[t]}setCustomAttributes(){const t=this.getCustomAttributes();if(t)for(const[e,i]of Object.entries(t))this.set(e,i)}getCustomAttributes(){const t=this.get("description");if(!t)return!1;try{return JSON.parse(t)}catch(t){return!1}}registerFilters(){if(!this.filter||!this.filter.length)return!1;for(let t=this.filter.length,e=0;e<t;e+=1){const t=this.filter[e];this.layer.filters.on(t,t.type,this)}}parseFilters(){if(!this.filters||!this.filters.length)return!1;const t=[];for(let e=this.filters.length,i=0;i<e;i+=1){const e=this.filters[i],n={name:e.filterCategoryName,value:e.attributes.safe_name};e.attributes.thumbnail&&("#"===e.attributes.thumbnail.charAt(0)?n.colour=e.attributes.thumbnail:n.thumbnail=this.CONFIGURATOR.getStaticImageUrl()+e.attributes.thumbnail),t.push(n)}return t}getFilters(t){return this.filter?this.filter.filter((e=>e.name===t)).flatMap((t=>t.options)):[]}filterUpdate(){if(this.disabled)return!1;const t=this.filterCheck();return this.checkIfAlternativeNeeded(t.reactive,"reactive"),this.toggleVisible(t.status,t.filter),t.status}checkIfAlternativeNeeded(t,e){if(this.active&&!t||this.disabled){this.CONFIGURATOR.log(`Item. Index:${this.attributes.index} Id:${this.attributes.id} checkIfAlternativeNeeded ${t} ${e}`),this.CONFIGURATOR.log(` - Looking for alternative ${this.layer.get("name")} found.`);const i=this.findAlternative(e);i?i.setActive():this.CONFIGURATOR.log(` - No valid alternative ${this.layer.get("name")} found.`)}}findAlternative(t){this.CONFIGURATOR.log(`Item. Index:${this.index} Id:${this.id} findAlternative ${t}`);const e=t||"reactive";let i,n,r,o;if(r=this.checkForValidSibling(e),r)return r;if(this.layer.previousActive){const t=this.layer.previousActive;if(t.filterCheck()[e])return t;if(r=t.checkForValidSibling(e),r)return r}for(i=0,n=this.layer.items.length;i<n;i+=1){const t=this.layer.items[i];if(t.filterCheck()[e]&&(void 0!==o||t.disabled||(o=t),t.attributes.name===this.attributes.name))return t}return void 0!==o&&o}checkForValidSibling(t){if(this.siblings.length)for(let e=0,i=this.siblings.length;e<i;e+=1)if(this.siblings[e].filterCheck()[t])return this.siblings[e];return!1}filterCheck(){let t=!0,e=!1;return this.filter||console.warn("Missing filter for item: ",this),this.filter?.forEach((i=>{"reactive"===i.type&&i.group.isReactiveSet&&-1===i.options.indexOf(i.group.currentReactive.name)?t=!1:e=!0})),{active:!0,reactive:t,status:t,filter:e}}registerSibling(t){this.sibling=t,t.siblings.push(this)}layerUpdate(){}setActive(t={}){const e=t.resetting||!1;return this.layer.events.linked.length&&this.layer.events.linked[this.get("index")].setActive(),this.active&&!e||(this.active=!0,this.layer.newItemActive(this)),this}clearActive(){this.active=!1}toggleActive(t){!0===t&&this.set("active",t)}toggleVisible(t,e){this.visibility!==t&&this.visible&&(this.visibility=t,!0===t?this.show():this.hide()),e?this.filters.map((t=>{t.itemsMatch+=1})):this.filters.map((t=>{t.itemsMatch-=1}))}show(){this.hidden=!1,this.sibling&&this.sibling.set("hidden",!1),this.set("hidden",!1)}hide(){this.hidden=!0,this.sibling&&this.sibling.set("hidden",!0),this.set("hidden",!0)}getImage(){return this.get("thumbnail")}reset(){this.attributes={},this.active=!1,this.visible=!0,this.visibility=!0,this.loadedThumbs=!1,this.siblings=[],this.filters=[],this.menuEl=[]}}function vt(t){const e=t[0],i=t[1],n=t[2],r=Math.max(e,i,n),o=Math.min(e,i,n);let s,a;const c=(r+o)/2;if(r===o)s=0,a=0;else{const t=r-o;switch(a=c>.5?t/(2-r-o):t/(r+o),r){case e:s=(i-n)/t+(i<n?6:0);break;case i:s=(n-e)/t+2;break;case n:s=(e-i)/t+4}s/=6}return[s,a,c]}function Rt(t,e){const i=t[0];let n=-1,r=1/0;for(let t=0;t<e.length;t+=1){const o=e[t][0],s=Math.abs(i-o);s<r&&(r=s,n=t)}return n}function At(t){const e=t.split(" ");for(let t=0;t<e.length;t+=1)e[t]/=256;return e}class It{constructor(t){this.CONFIGURATOR=t,this.LAYER_TYPE="LAYER_DEFAULT",this.attributes={},this.events={range:[],events:[],linked:[]},this.options={}}init(){this.reset()}get length(){return this.items.length}create(t,e){const i=t;this.init(),"NULL"===i.layer_group&&(i.layer_group=null),i.markers&&i.markers.length&&(i.marker=i.markers[0]),this.set(i,e),this.type=this.get("type"),this.filters=this.CONFIGURATOR.getFilters()||!1,this.get("render_into")?this.parentComponent=this.CONFIGURATOR.get(this.get("render_into")):this.get("layer_group")&&(this.layerGroup=this.CONFIGURATOR.getLayerGroup({name:this.get("layer_group"),safeName:this.get("layer_group"),order:this.get("order"),container:!!e.menu&&e.menu.componentContainer}),this.parentComponent=this.layerGroup,this.layerGroup.addLayer(this)),this.panoViewer=this.CONFIGURATOR.panoViewer;const n=this.CONFIGURATOR.getCameraRotationLimits();n.limit_camera_rotation>0&&this.panoViewer.setRotationLimitsTheta&&this.panoViewer.setRotationLimitsTheta(n.camera_rotation_min,n.camera_rotation_max);const{items:r}=i;let o=!1;const s=[];for(let t=0;t<r.length;t+=1){const{filterIds:e}=r[t];if(e.length>0)for(let i=0;i<e.length;i+=1){const e=r[t].filterIds[i];-1===s.indexOf(e)&&s.push(e)}}this.renderIntoFilterHolders=!1;let a=null;i.linked_layer&&(a=this.CONFIGURATOR.findLayerByName(i.linked_layer));for(let t=0,{length:i}=r;t<i;t+=1){const i=new Tt(this.CONFIGURATOR,r[t],e);i.get("siblings")&&i.get("siblings").length&&(o=!0);const n=i.get("index")||t;i.set("index",n),this.addReference(i,e),i.registerFilters(),this.items.push(i),a&&a.events.linked.push(i),i.visible&&!i.disabled&&!0===this.renderIntoFilterHolders&&r[t].filterIds[0]}if(o)for(let t=0,e=this.items.length;t<e;t+=1){const e=this.items[t],i=e.get("siblings");if(i&&i.length)for(let t=0,n=i.length;t<n;t+=1){const n=this.getItemById(i[t]);n&&e.siblings.push(n)}}return this}chooseReactiveNeighbours(){if(this.CONFIGURATOR.log("----------------------------------------"),this.CONFIGURATOR.log(`Layer. '${this.get("name")}' chooseReactiveNeighbours:`),!this.activeItem)return;if(!1===this.activeItem.get("hidden"))return void this.CONFIGURATOR.log(` - Item ${this.activeItem.get("id")} '${this.activeItem.get("name")}' is still visible, no change`);this.CONFIGURATOR.log(` - Finding neighbour for ${this.activeItem.get("id")} '${this.activeItem.get("name")}'`);const t=this.activeItem.siblings;if(this.CONFIGURATOR.log(` - Checking ${t.length} siblings`),t&&t.length>0)for(let e=0;e<t.length;e+=1){const i=t[e],n=i.get("hidden");if(this.CONFIGURATOR.log(`Checking sibling ${t[e].get("id")}. '${t[e].get("name")}' hidden ${n} disabled ${i.disabled}`),!n&&!i.disabled)return this.CONFIGURATOR.log(`   - Choosing sibling ${t[e].get("id")}. '${t[e].get("name")}'`),void i.setActive()}this.CONFIGURATOR.log(` - Checking RGB ${this.activeItem.get("rgb")}`);const e=this.activeItem.get("rgb");if(e){const t=At(e),i=vt(t),n=[],r=[];for(let t=0;t<this.items.length;t+=1){const e=this.items[t];if(!e.get("hidden")&&!e.disabled){const i=vt(At(e.attributes.rgb));n.push(t),r.push(i)}}if(this.CONFIGURATOR.log(`   - Matching RGB ${t[0].toFixed(2)} ${t[1].toFixed(2)} ${t[2].toFixed(2)} HSV ${i[0].toFixed(2)} ${i[1].toFixed(2)} ${i[2].toFixed(2)} Against ${r.length} available neighbours`),r.length>0){const t=n[Rt(i,r)];return this.CONFIGURATOR.log(`   - Choosing Item ${this.items[t].get("id")} '${this.items[t].get("name")}'`),void this.items[t].setActive()}}for(let t=0;t<this.items.length;t+=1){const e=this.items[t];if(!e.get("hidden")&&!e.disabled)return this.CONFIGURATOR.log(` - Choosing first available from visible items. ItemId ${e.get("id")} '${e.get("name")}'`),void e.setActive()}this.CONFIGURATOR.log(" - No neighbour found")}activateFilter(t,e){this.CONFIGURATOR.log(`Layer. activateFilter ${type}`),this.CONFIGURATOR.log(` - this.itemsVisible: ${this.itemsVisible}`);const i=this.CONFIGURATOR.getFilters().byGroup[t].filters[e];return i.disabled?(console.log("filter is disabled abandoning"),!1):(i.activate(),!0)}set(t,e,i){let n;"object"==typeof t?(n=t,i=e):(n={})[t]=e;const r=this.attributes;this.options=i;for(const t in n)"items"!==t&&(r[t]=n[t])}setActive(t,e){if(this.active||this.get("layer_type")>=4)return this;if(this.configurator.newLayerActive(this,t,e),this.marker&&this.marker.el.classList?this.marker.el.classList.add("active"):this.marker&&this.marker.el.setAttribute("class","active"),this.active=!0,"function"==typeof this.options.layerActivatedCallback)this.options.layerActivatedCallback(this);else if(void 0!==this.options.layerActivatedCallback)throw new Error("layerActivatedCallback is not a function");return this}newItemActive(t){if(this.activeItem&&(this.activeItem.active=!1),this.activeItem=t,this.configurator.updateNotify(),this.events)for(const t in this.events)for(let e=0,i=this.events.length;e<i;e+=1)t[e].layerUpdate();if(t.filter){const e=[];for(let i=0,n=t.filter.length;i<n;i+=1){const{group:n}=t.filter[i];if("reactive"===t.filter[i].type)continue;let r=t.filter[i].options[0];r=n.filters[r],e.push(r),r.triggerReactivate()}e.forEach((t=>{t.updateFilters("reactive")}))}if("function"==typeof this.options.itemChangeCallback)this.options.itemChangeCallback(t);else if(null!=this.options.itemChangeCallback)throw new Error("layerChangeCallback is not a function")}clearActive(){this.marker&&this.marker.el.classList?this.marker.el.classList.remove("active"):this.marker&&this.marker.el.setAttribute("class",""),this.active=!1,this.panoViewer&&this.panoViewer.layerDeactivated&&this.panoViewer.layerDeactivated()}filterUpdate(){}get validItemCount(){return Number.isInteger(this.itemsVisible)?this.itemsVisible:""}getNextItem(){let t=this.items.indexOf(this.activeItem);const e=t,{length:i}=this.items;for(t+=1,t===i&&(t=0);!this.items[t].visible;)if(t+=1,t===i&&(t=0),e===t)return!1;return this.items[t]}getItem(t){if(null===t)return;let e=this.byIndex[t]||this.byIndex[t.id];return!!e&&(e.disabled&&(e=e.checkForValidSibling()),e)}getItemById(t){if(null!==t)return this.byId[t]||this.byId[t.id]}getFilter(t){for(let e=0,i=this.filters.length;e<i;e+=1)if(this.filters[e].name===t)return this.filters[e];return!1}find(t,e){for(let e=0,i=this.items.length;e<i;e+=1)this.items[e].get(t);return[]}addReference(t,e){return this.byId[t.get("id")]=t,this.byIndex[t.get("index")]=t,t.layer||(t.layer=this),this.get("parent_layer")&&(t.parentLayer=this.CONFIGURATOR.get(this.get("parent_layer"))),this}deactive(){}reset(){this.CURRENT_CONFIGURATION="",this.itemsVisible=0,this.items=[],this.byId={},this.byIndex={},this.active=!1,this.activeItem=!1,this.activeSubMenuEl=!1,this.activeSubmenu=!1,this.filters=[],this.panoViewer=!1,this.type=!1,this.scrollValue=0,this.previouslyActive=!1,this.previousActive=!1}getItemTotalFiltered(t){const e=this.items;let i=0;for(let n=0;n<e.length;n+=1){const r=e[n].filters;for(let e=0;e<r.length;e+=1)r[e].name===t&&(i+=1)}return i}getItemsInFilter(t){const{filter:e}=this.CONFIGURATOR.getFilterByName(t);return e.getItemsInLayer(this.get("file_path"))}onHotspotClick(t,e,i){this.CONFIGURATOR.onHotspotClick(t,e,i)}destroy(){this.reset()}get(t){return this.attributes[t]}}class _t{constructor(t){this.reset(),this.init(t)}init(t){this.name=t.name,this.safeName=t.safeName;const e=function(t){t=t||{};const e=document.createElement("a");e.className=`collection__title list_order_${t.order}`,e.dataset.collection=t.safeName,e.innerHTML=t.name;const i=document.createElementNS("http://www.w3.org/2000/svg","svg");if(void 0!==i.innerHTML)i.innerHTML='<g fill="none" stroke="%2327ae60"><path d="M31.9 19.2h5.8M31 21.2h16.8v23H31v-23z"/><path d="M31 29.2h-7.4v-13H46v5"/><path d="M23.6 27.7l-10.9-4.4v-8.1l11 4"/><path d="M12.7 23.4v-8.5h22.4l3.4 1.4M44.4 24.2v3.7"/></g>';else{const t=(new DOMParser).parseFromString('<svg xmlns="http://www.w3.org/2000/svg"><g fill="none"><path d="M32.3 16.7h7.2m-8.3 2.5H52v28.5H31.2V19.2z"/><path d="M31.2 29.1H22V13h27.7v6.2"/><path d="M22 27.3L8.5 21.9V11.8l13.6 5"/><path d="M8.5 21.9V11.4h27.7l4.2 1.7m7.4 9.8v4.6"/></g></svg>',"image/svg+xml");i.appendChild(document.adoptNode(t.documentElement))}e.appendChild(i);const n=document.createElement("li");n.dataset.collection=t.safeName,n.className="js-select-component",n.className="js-select-component-group configuration__elements__components__component configuration__elements__components__component--group",n.appendChild(e);const r=document.createElement("ul");r.className="configuration__elements__components__component__group_menu",n.appendChild(r);const o=document.createElement("ul");return o.className="configuration__elements__components__component__group__container",n.appendChild(o),{layerGroupContainer:n,layerGroupMenu:r,layerGroupComponentContainer:o}}(t);this.el.container=e.layerGroupContainer,this.el.menu=e.layerGroupMenu,this.el.componentContainer=e.layerGroupComponentContainer}addLayer(t){const e=document.createElement("li");e.className="js-select-component js-layer-group",e.dataset.collection=t.get("file_path"),e.innerText=t.get("name"),this.el.menu.appendChild(e),this.layers.push(t)}newLayerActive(t){t.options.menu&&(Array.prototype.forEach.call(this.el.menu.getElementsByTagName("li"),(t=>{t.classList.remove("active")})),this.el.menu.querySelectorAll(`[data-collection="${t.get("file_path")}"]`)[0].classList.add("active"),this.el.container.classList.add("active"))}setActive(t){t||(t=this.lastActiveLayer||this.layers[0]),this.lastActiveLayer=this.activeLayer,this.activeLayer=this.layers.filter((e=>e===t))[0],this.activeLayer.setActive(!0),this.active=!0,this.el.container.classList.add("active")}deactivate(){this.el.container.classList.remove("active"),this.active=!1}reset(){this.layers=[],this.activeLayer=!1,this.lastActiveLayer=!1,this.el={},this.active=!1}}class Ot{constructor(t,e,i){this.CONFIGURATOR=t,this.INTERACTION_SURFACE=e,this.GESTURE_HANDLE_CONTAINER=i,this.rotationScalar=600*Math.min(window.devicePixelRatio,2),this.touchZoomDelta=25*Math.min(window.devicePixelRatio,2),this.touchZoomOutputScalar=.01,this.isTouchToZoom=!1,this.touchZoomScale=0,this.isTouchToRotate=!1,this.touchRotateTotal=0,this.hinterMessageZoom="Use ctrl + scroll to zoom",this.hinterMessageTouch="Use two fingers to look around",this.hinterMessageZoomShown=!1,this.hinterMessageTouchShown=!1;const n=t.options.gestureHandling;this.gestureHandlingMode=n.mode,this.enabledZoom=n.enabledZoom,this.enabledRotate=n.enabledRotate,this.enabledZoomFullscreen=n.enabledZoomFullscreen,this.enabledRotateFullscreen=n.enabledRotateFullscreen,this.rotationScalar=n.rotationScalar*Math.min(window.devicePixelRatio,2),this.touchZoomDelta=n.touchZoomDelta*Math.min(window.devicePixelRatio,2),this.CONFIGURATOR.log(`GestureHandler. ${this.gestureHandlingMode} zoom/rotate: ${this.enabledZoom} ${this.enabledRotate} fullscreen zoom/rotate: ${this.enabledZoomFullscreen} ${this.enabledRotateFullscreen} rotationScalar: ${this.rotationScalar} touchZoomDelta: ${this.touchZoomDelta}`),this.isFullscreen=!1,this.positionPreviousX=-1,this.positionPreviousY=-1,this.isDown=!1,this.enable()}enable(){const{INTERACTION_SURFACE:t}=this;this.disable(),t.addEventListener("touchstart",this.onTouchStart.bind(this)),t.addEventListener("touchend",this.onTouchEnd.bind(this)),t.addEventListener("touchmove",this.onTouchMove.bind(this)),t.addEventListener("mousedown",this.onMouseDown.bind(this)),t.addEventListener("mousemove",this.onMouseMove.bind(this)),t.addEventListener("mouseup",this.onMouseUp.bind(this)),t.addEventListener("mouseout",this.onMouseOut.bind(this)),t.addEventListener("wheel",this.onWheel.bind(this))}disable(){const{INTERACTION_SURFACE:t}=this;t.removeEventListener("touchstart",this.onTouchStart.bind(this)),t.removeEventListener("touchend",this.onTouchEnd.bind(this)),t.removeEventListener("touchmove",this.onTouchMove.bind(this)),t.removeEventListener("mousedown",this.onMouseDown.bind(this)),t.removeEventListener("mousemove",this.onMouseMove.bind(this)),t.removeEventListener("mouseup",this.onMouseUp.bind(this)),t.removeEventListener("mouseout",this.onMouseOut.bind(this)),t.removeEventListener("wheel",this.onWheel.bind(this))}onMouseDown(t){t.preventDefault();const e=this.INTERACTION_SURFACE.getBoundingClientRect();this.onInteractionStart(t.clientX-e.left,t.clientY-e.top)}onTouchStart(t){const e=t.changedTouches[0],i=t.touches.length,n=this.INTERACTION_SURFACE.getBoundingClientRect();if("cooperative"===this.gestureHandlingMode&&i>=2){t.preventDefault();let e=!1;if(this.enabledRotate&&!1===this.isFullscreen&&(e=!0),this.enabledRotateFullscreen&&!0===this.isFullscreen&&(e=!0),t.touches&&t.touches.length<2&&!0===e)return void(!1===this.hinterMessageTouchShown&&(this.showHinter(this.hinterMessageTouch),this.hinterMessageTouchShown=!0))}else"greedy"===this.gestureHandlingMode&&1===i&&t.preventDefault();this.onInteractionStart(e.clientX-n.left,e.clientY-n.top)}onInteractionStart(t,e){this.positionPreviousX=t,this.positionPreviousY=e,this.isDown=!0,this.CONFIGURATOR.onInteractionStart()}onMouseMove(t){t.preventDefault();const e=this.INTERACTION_SURFACE.getBoundingClientRect();this.onInteractionMove(t.clientX-e.left,t.clientY-e.top)}onTouchMove(t){const e=this.INTERACTION_SURFACE.getBoundingClientRect(),i=t.targetTouches,n=i.length;let r=0,o=0;if(n>=2){t.preventDefault();let s=!1;const a=this.getTouchScale(t);if(!1===this.isTouchToZoom)this.touchZoomScale=a,this.isTouchToZoom=!0;else{const t=this.touchZoomScale-a;Math.abs(t)>this.touchZoomDelta&&(this.CONFIGURATOR.onInteractionZoom(t*this.touchZoomOutputScalar),this.touchZoomScale=a,s=!0)}if(!0===s)return;if("cooperative"===this.gestureHandlingMode){for(let t=0;t<n;t+=1)r+=i[t].clientX-e.left,o+=i[t].clientY-e.top;r/=n,o/=n}}else{if("greedy"!==this.gestureHandlingMode||1!==n)return;t.preventDefault(),r+=i[0].clientX-e.left,o+=i[0].clientY-e.top}!1===this.isTouchToRotate||n!==this.touchRotateTotal?(this.positionPreviousX=r,this.positionPreviousY=o,this.isTouchToRotate=!0,this.touchRotateTotal=n):this.onInteractionMove(r,o)}onInteractionMove(t,e){if(!0===this.isDown){const{CONFIGURATOR:i,rotationScalar:n}=this;i.rotateHorizontal(-(t-this.positionPreviousX)/n),i.rotateVertical(-(e-this.positionPreviousY)/n)}this.positionPreviousX=t,this.positionPreviousY=e}onMouseUp(t){t.preventDefault();const e=this.INTERACTION_SURFACE.getBoundingClientRect();this.onInteractionEnd(t.clientX-e.left,t.clientY-e.top)}onTouchEnd(t){t.preventDefault();const e=t.changedTouches[0],i=this.INTERACTION_SURFACE.getBoundingClientRect();this.onInteractionEnd(e.clientX-i.left,e.clientY-i.top)}onMouseOut(t){t.preventDefault();const e=this.INTERACTION_SURFACE.getBoundingClientRect();this.onInteractionEnd(t.clientX-e.left,t.clientY-e.top)}onInteractionEnd(t,e){this.positionPreviousX=t,this.positionPreviousY=e,this.isDown=!1,this.isTouchToZoom=!1,this.isTouchToRotate=!1,this.CONFIGURATOR.onInteractionEnd()}onWheel(t){let e=!1;if("cooperative"===this.gestureHandlingMode){let i=!1;if(this.enabledZoom&&!1===this.isFullscreen&&(i=!0),this.enabledZoomFullscreen&&!0===this.isFullscreen&&(i=!0),i&&!0!==t.ctrlKey)return void(!1===this.hinterMessageZoomShown&&(this.showHinter(this.hinterMessageZoom),this.hinterMessageZoomShown=!0));e=!0}else"greedy"===this.gestureHandlingMode&&(e=!0);e&&(t.preventDefault(),t.deltaY<0?this.CONFIGURATOR.onInteractionZoom(-1):t.deltaY>0&&this.CONFIGURATOR.onInteractionZoom(1))}startTimer(){this.clearTimer(),this.timer=setTimeout(this.hideHinter.bind(this),1500)}clearTimer(){this.timer&&(clearTimeout(this.timer),this.timer=void 0)}showHinter(t){const{GESTURE_HANDLE_CONTAINER:e}=this;e.innerHTML=`<p>${t}</p>`,e.classList.remove("configurator__gesture-hinter--hidden"),this.startTimer()}hideHinter(){this.GESTURE_HANDLE_CONTAINER.classList.add("configurator__gesture-hinter--hidden")}getTouchScale(t){let e,i,n,r,o,s=0;for(r=0;r<t.targetTouches.length;r+=1)for(o=0;o<t.targetTouches.length;o+=1)e=t.targetTouches[r].clientX-t.targetTouches[o].clientX,i=t.targetTouches[r].clientY-t.targetTouches[o].clientY,n=Math.sqrt(e*e+i*i),n>s&&(s=n);return s}onEnterFullscreen(){this.isFullscreen=!0}onLeaveFullscreen(){this.isFullscreen=!1}}class yt{constructor(){this.currentConfigurationString=null,this.defaultConfigurationString="defaultConfigString",this.LAYER_DETAILS=[],this.SCENE_LAYER_DETAILS={}}setString(t){this.currentConfigurationString=t}getString(){return this.currentConfigurationString}setDefaultConfigString(t){this.defaultConfigurationString=t}getDefaultConfigString(){return this.defaultConfigurationString}setLayerDetails(t,e){this.LAYER_DETAILS=[];const{length:i}=t;let n;void 0===this.SCENE_LAYER_DETAILS[e]&&(this.SCENE_LAYER_DETAILS[e]=[]);for(let r=0;r<i;r+=1){let i,o;n=t[r],"LAYER_GROUP_BY"===n.LAYER_TYPE?(i=n.LAYERDATA.name,o=parseInt(n.itemIndexActive)):(i=n.attributes.name,o=n.activeItem.attributes.index),this.LAYER_DETAILS.push({name:i,index:o}),this.SCENE_LAYER_DETAILS[e].push({name:i,index:o})}}getIndexForLayer(t){const{LAYER_DETAILS:e}=this;for(let i=0;i<e.length;i+=1)if(e[i].name===t)return e[i].index;return 0}getAreLayerDetailsSet(){return 0!==this.LAYER_DETAILS.length}getAreSceneLayerDetailsSet(t){return void 0!==this.SCENE_LAYER_DETAILS[t]&&0!==this.SCENE_LAYER_DETAILS[t].length}}class Ct{constructor(t,e){this.CONFIGURATOR=t,this.HOLDER=document.createElement("div"),this.HOLDER.className="zoom-controller-holder",e.appendChild(this.HOLDER),this.BUTTON_IN=document.createElement("div"),this.BUTTON_IN.className="zoom-controller-in",this.HOLDER.appendChild(this.BUTTON_IN),this.BUTTON_OUT=document.createElement("div"),this.BUTTON_OUT.className="zoom-controller-out",this.HOLDER.appendChild(this.BUTTON_OUT),this.BUTTON_IN.onclick=this.onZoomIn.bind(this),this.BUTTON_OUT.onclick=this.onZoomOut.bind(this)}onZoomIn(t){t.preventDefault(),this.CONFIGURATOR.onInteractionZoom(-1)}onZoomOut(t){t.preventDefault(),this.CONFIGURATOR.onInteractionZoom(1)}}class Nt{constructor(t,e){this.CONFIGURATOR=t,this.options=e,this.remoteControl=!1}setRemoteType(t){if("slave"!==t.type&&"master"!==t.type)return void(this.remoteControl=!1);window.WebSocket=window.WebSocket||window.MozWebSocket;let e=t.wsURL;t.port&&(e+=`:${t.port}`),e=new WebSocket(e),this.remoteControl={type:t.type,ws:e,connected:!1},e.onerror=this.webSocketError,e.onmessage=this.webSocketReceive.bind(this),e.onopen=this.webSocketOpened.bind(this),e.onclose=this.webSocketClosed.bind(this)}webSocketOpened(){this.remoteControl.connected=!0;const t={type:"register",data:this.remoteControl.type,id:!1,date:Date.now()};this.remoteControl.ws.send(JSON.stringify(t))}webSocketClosed(){if("master"===this.remoteControl.type){const t=document.getElementsByClassName("ws-status")[0];t&&(t.classList.remove("connected"),t.classList.remove("populated"),t.innerText="0")}this.remoteControl.connected=!1}webSocketDisconnect(){this.remoteControl.ws.close(),this.remoteControl.connected=!1;const t=document.getElementsByClassName("ws-status")[0];t&&(t.classList.remove("connected"),t.innerText="0")}webSocketStatus(){switch(this.remoteControl.ws.readyState){case this.remoteControl.ws.CLOSED:case this.remoteControl.ws.CLOSING:case this.remoteControl.ws.CONNECTING:case this.remoteControl.ws.OPEN:}}webSocketError(){this.remoteControl=!1}webSocketReceive(t){const e=JSON.parse(t.data);let i;switch(e.type){case"message":case"connection:destroyed":default:break;case"connection:created":if(this.remoteControl.id=e.id,"slave"===this.remoteControl.type){const t=document.createElement("div");t.className="pairing";const i=new Image;i.src=e.qr,t.appendChild(i),document.body.appendChild(t)}else i=document.getElementsByClassName("ws-status")[0],i||(i=document.createElement("div"),i.className="ws-status",document.body.append(i)),i.classList.add("connected");break;case"room:join":"slave"===this.remoteControl.type&&document.getElementsByClassName("pairing")[0]&&document.getElementsByClassName("pairing")[0].remove(),void 0!==e.config&&this.setRemoteConfig(e.config);break;case"room:left":"master"===this.remoteControl.type&&(i=document.getElementsByClassName("ws-status")[0],i&&(i.innerText=e.userCount-1));break;case"room:userJoined":"slave"===this.remoteControl.type||(i=document.getElementsByClassName("ws-status")[0],i||(i=document.createElement("div"),i.className="ws-status",document.body.append(i)),i.classList.remove("connected"),i.classList.add("populated"),i.innerText=e.userCount-1);break;case"room:userLeft":"slave"===this.remoteControl.type||(i=document.getElementsByClassName("ws-status")[0],i||(i=document.createElement("div"),i.className="ws-status",document.body.append(i)),e.userCount>1?(i.classList.remove("connected"),i.classList.add("populated")):(i.classList.remove("populated"),i.classList.add("connected")),i.innerText=e.userCount-1);break;case"config:update":void 0!==e.config&&this.setRemoteConfig(e.config)}}webSocketAuthUser(t){const e={type:"room:authorise",userId:t,room:this.remoteControl.room};this.remoteControl.ws.send(JSON.stringify(e))}webSocketSend(t){const e={config:t,type:"config"};this.remoteControl.ws.send(JSON.stringify(e))}close(){}}class Lt{constructor(t,e,i){this.CONFIGURATOR=t,this.APPLICATION_OPTIONS=e,this.FILTER_DATA=i,this.FILTER_GROUP_ID=i.safe_name,this.items=[],this.attributes={name:i.name,layer_type:"pallets"};const n=i.filters;for(let t=0;t<n.length;t+=1){const e=n[t];this.items.push({itemIndex:t,filterGroupId:i.safe_name,filterId:e.safe_name,attributes:{thumbnail:`${this.CONFIGURATOR.getDynamicThumbUrl()}${e.thumbnail}`,name:e.safe_name},disabled:e.disabled,active:!1})}this.isActive=!1,this.itemIndexActive=0,this.activeItem={attributes:{}}}setActive(){this.isActive=!0}clearActive(){!1!==this.isActive&&(this.isActive=!1)}toggleActive(){return!0===this.isActive?this.clearActive():this.setActive(),this.isActive}onItemClick(t){t.preventDefault();const{CONFIGURATOR:e}=this,i=t.target;this.setItemByIndex(i.dataset.itemIndex),e.onItemClick()}chooseReactiveNeighbours(){}setItemByFilterId(t){const e=this.getItemIndexByFilterId(t);this.setItemByIndex(e)}getItemIndexByFilterId(t){const e=this.FILTER_DATA.filters;let i=0;for(let n=0;n<e.length;n+=1)e[n].safe_name===t&&(i=n);return i}setItemByIndex(t){const{CONFIGURATOR:e}=this,i=this.FILTER_DATA.filters[t];e.setFilter(this.FILTER_GROUP_ID,i.safe_name),this.highlightItemByIndex(t),this.itemIndexActive=t,e.chooseReactiveNeighbours(),e.updateNotify(),this.updateActiveItem()}highlightItemByIndex(t){const{items:e}=this;for(let i=0;i<e.length;i+=1){const n=e[i];i===parseInt(t,10)?n.active=!0:n.active=!1}}updateActiveItem(){this.activeItem.attributes=this.FILTER_DATA.filters[this.itemIndexActive]}getIsActive(){return this.isActive}getSafeName(){return this.FILTER_DATA.safe_name}getName(){return this.FILTER_DATA.name}}class bt{constructor(t,e,i){this.LAYERDATA=t,this.APPLICATION_OPTIONS=e,this.CONFIGURATOR=i,this.LAYER_TYPE="LAYER_GROUP_BY",this.FILTER_GROUP_ID=parseInt(t.group_by,10),this.FILTER_SUBGROUP_ID=parseInt(t.sub_group,10),this.FILTER_DATA_GROUP=this.getFilterGroupDataById(this.FILTER_GROUP_ID),this.FILTER_GROUP_NAME=this.FILTER_DATA_GROUP.safe_name,isNaN(this.FILTER_SUBGROUP_ID)||(this.FILTER_DATA_SUBGROUP=this.getFilterGroupDataById(this.FILTER_SUBGROUP_ID),this.FILTER_SUBGROUP_NAME=this.FILTER_DATA_SUBGROUP.safe_name),console.log(`LayerGroupBy. Created '${t.name}' Group ${this.FILTER_GROUP_ID} ${this.FILTER_GROUP_NAME} SubGroup ${this.FILTER_SUBGROUP_ID} ${this.FILTER_SUBGROUP_NAME} _____`),this.FILTER_ELEMENTS=[],this.items=[],this.groupedItems=[];const n=this.LAYERDATA.items;for(let t=0;t<n.length;t+=1){const e=n[t];0===t&&(e.active=!0),e.index=t,this.items.push(e),this.groupItem(e)}this.itemsVisible=1,this.itemIndexActive=0,this.isActive=!1,this.activeItem={attributes:{}},this.AVAILABLE_FILTERED_ITEM_INDEXES=[]}setActive(){this.applyFiltering(),this.isActive=!0,this.CONFIGURATOR.newLayerActive(this)}clearActive(){!1!==this.isActive&&(this.isActive=!1)}toggleActive(){return!0===this.isActive?this.clearActive():this.setActive(),this.isActive}chooseReactiveNeighbours(){const{LAYERDATA:t,items:e}=this,i=this.itemIndexActive;if(this.CONFIGURATOR.log("----------------------------------------"),this.CONFIGURATOR.log(`LayerGroupBy. '${t.name}' chooseReactiveNeighbours:`),this.applyFiltering(),!1===e[i].hidden)return void this.CONFIGURATOR.log(` - Item ${t.items[i].id} '${t.items[i].name}' is still visible, no change`);this.CONFIGURATOR.log(` - Finding neighbour for ${t.items[i].id} '${t.items[i].name}'`);const n=this.LAYERDATA.items[i].siblings;if(this.CONFIGURATOR.log(` - Checking ${n.length} siblings ${n}`),n&&n.length>0)for(let i=0;i<n.length;i+=1){const r=n[i];for(let i=0;i<e.length;i+=1){const n=t.items[i],o=e[i];if(n.id===r){const t=o.hidden;if(this.CONFIGURATOR.log(`    - Found sibling ${r} hidden ${t}`),!t)return this.CONFIGURATOR.log(`   - Choosing sibling ${n.id} ${n.name}.`),void this.setItemByIndex(i)}}}this.CONFIGURATOR.log(` - Checking RGB '${this.activeItem.attributes.rgb}'`);const r=this.activeItem.attributes.rgb;if(r){const e=At(r),i=vt(e),n=[];for(let e=0;e<this.AVAILABLE_FILTERED_ITEM_INDEXES.length;e+=1){const i=vt(At(t.items[this.AVAILABLE_FILTERED_ITEM_INDEXES[e]].rgb));n.push(i)}if(this.CONFIGURATOR.log(`   - Matching RGB ${e[0].toFixed(2)} ${e[1].toFixed(2)} ${e[2].toFixed(2)} HSV ${i[0].toFixed(2)} ${i[1].toFixed(2)} ${i[2].toFixed(2)} Against ${n.length} available neighbours`),n.length>0){const e=Rt(i,n),r=this.AVAILABLE_FILTERED_ITEM_INDEXES[e];return this.CONFIGURATOR.log(`   - Choosing Item ${t.items[r].id} '${t.items[r].name}'`),void this.setItemByIndex(r)}}for(let t=0;t<this.AVAILABLE_FILTERED_ITEM_INDEXES.length;t+=1){const e=this.AVAILABLE_FILTERED_ITEM_INDEXES[t],i=this.LAYERDATA.items[e];if(this.activeItem.attributes.name===i.name)return this.CONFIGURATOR.log(` - Found neighbour with same name. Index ${e}`),void this.setItemByIndex(e)}if(this.AVAILABLE_FILTERED_ITEM_INDEXES.length>0)return this.CONFIGURATOR.log(` - Choosing first available from visible items. Index ${this.AVAILABLE_FILTERED_ITEM_INDEXES[0]}`),void this.setItemByIndex(this.AVAILABLE_FILTERED_ITEM_INDEXES[0]);this.CONFIGURATOR.log(" - No neighbour found")}applyFiltering(){const t=this.CONFIGURATOR.filters,e=this.LAYERDATA.items,{items:i}=this;this.AVAILABLE_FILTERED_ITEM_INDEXES=[];let n=0;this.groupedItems=[];for(let r=0;r<i.length;r+=1){const o=e[r],s=o.filter,a=[];for(let t=0;t<s.length;t+=1){const e=s[t];e.group!==this.FILTER_SUBGROUP_NAME&&e.group!==this.FILTER_GROUP_NAME&&a.push({group:e.group,option:e.options})}let c=0;for(let e=0;e<a.length;e+=1){const i=a[e].group,n=a[e].option;null!=t.byGroup[i].currentActive&&n.includes(t.byGroup[i].currentActive.name)&&(c+=1)}c>=a.length?"true"!==o.disabled&&(this.showItem(r),n+=1,this.AVAILABLE_FILTERED_ITEM_INDEXES.push(r)):this.hideItem(r),this.groupItem(i[r])}this.itemsVisible=n}showItem(t){this.items[t].hidden=!1}hideItem(t){this.items[t].hidden=!0}hideEmptyFilterHolders(){const{CONTENT_HOLDER:t}=this,e=t.children;for(let t=0;t<e.length;t+=1){const i=e[t];let n,r=0;n=this.FILTER_SUBGROUP_NAME?i.getElementsByClassName("filter-holder"):i.getElementsByClassName("filter-items");for(let t=0;t<n.length;t+=1){const e=n[t],i=e.getElementsByClassName("js-select-item"),o=e.getElementsByClassName("js-select-item hidden");i.length===o.length?e.classList.add("hidden"):e.classList.remove("hidden"),r+=i.length-o.length}r-1<=0?i.classList.add("hidden"):i.classList.remove("hidden")}}onItemClick(t){t.preventDefault();const e=t.target.dataset.itemIndex;this.setItemByIndex(e),this.CONFIGURATOR.updateNotify(),this.CONFIGURATOR.onItemClick()}setItemByIndex(t){this.itemIndexActive=t,this.highlightItemByIndex(t),this.updateActiveItem(),this.CONFIGURATOR.updateNotify(),this.CONFIGURATOR.onItemClick()}setItemByItemId(t){const e=this.LAYERDATA.items;let i=0;for(let n=0;n<e.length;n+=1)e[n].id===t&&(i=n);this.itemIndexActive=i,this.highlightItemByIndex(i),this.updateActiveItem(),this.CONFIGURATOR.updateNotify()}highlightItemByIndex(t){const{items:e}=this;for(let i=0;i<e.length;i+=1){const n=e[i];i===parseInt(t,10)?n.active=!0:n.active=!1}}updateActiveItem(){this.activeItem.attributes=this.LAYERDATA.items[this.itemIndexActive]}parseFilters(){if(!this.activeItem.attributes.filter||!this.activeItem.attributes.filter.length)return!1;const t=[];for(let e=this.activeItem.attributes.filter.length,i=0;i<e;i+=1){const e=this.activeItem.attributes.filter[i],n={name:e.name,value:e.options[0]};t.push(n)}return t}getIsActive(){return this.isActive}getItemIndexActive(){return this.itemIndexActive}getSafeName(){return this.LAYERDATA.file_path}getName(){return this.LAYERDATA.name}get(t){switch(t){case"build_order":return this.LAYERDATA.build_order;case"file_path":return this.LAYERDATA.file_path;case"name":return this.LAYERDATA.name}}getItem(t){return this.ITEMS[t]}getElement(t){if("menuContainer"===t)return this.COMPONENT_ELEMENT}groupItem(t){let e,i=this.getItemFilter(t,this.FILTER_GROUP_NAME).options[0];if(i.replace(/_/g," "),this.FILTER_SUBGROUP_NAME){e=this.groupedItems.findIndex((t=>t.group.safe_name===i&&t.sub_group.safe_name===n));let n=this.getItemFilter(t,this.FILTER_SUBGROUP_NAME).options[0];e<0?this.groupedItems.push({group:{name:i.replace(/_/g," "),safe_name:i},sub_group:{name:n.replace(/_/g," "),safe_name:n},items:[t]}):this.groupedItems[e].items.push(t)}else e=this.groupedItems.findIndex((t=>t.group.safe_name===i)),e<0?this.groupedItems.push({group:{name:i.replace(/_/g," "),safe_name:i},items:[t]}):this.groupedItems[e].items.push(t)}getOrCreateItemHolder(t){const{CONTENT_HOLDER:e}=this,i=this.getItemFilter(t,this.FILTER_GROUP_NAME),n=`filter-holder filter-holder-${i.options[0]}`;let r=e.getElementsByClassName(n)[0];if(!r){r=document.createElement("div"),r.className=n,e.appendChild(r);const t=document.createElement("div");t.innerHTML=`${i.options[0].replace(/_/g," ")}`,t.className="filter-title",r.appendChild(t)}if(this.FILTER_SUBGROUP_NAME){const e=this.getItemFilter(t,this.FILTER_SUBGROUP_NAME),i=`filter-holder filter-holder-${e.options[0]}`;let n=r.getElementsByClassName(i)[0];if(!n){n=document.createElement("div"),n.className=i,r.appendChild(n);const t=document.createElement("div");t.innerHTML=`${e.options[0]}`,t.className="subfilter-title",n.appendChild(t);const o=document.createElement("ul");o.className="subfilter-items",n.appendChild(o)}return n.children[1]}{const t=document.createElement("ul");return t.className="filter-items",r.appendChild(t),r.children[1]}}sortSubfiltergroupElements(t){const e=t.children;[].slice.call(e).sort(this.compareSubfilterElements).forEach((function(e){t.appendChild(e)}))}compareSubfilterElements(t,e){return t.classList<e.classList?1:t.classList>e.classList?-1:0}getItemFilter(t,e){const i=t.filter;for(let t=0;t<i.length;t+=1){const n=i[t];if(n.group===e)return n}}getFilterGroupDataById(t){const e=this.LAYERDATA.filter_groups;for(let i=0;i<e.length;i+=1){const n=e[i];if(parseInt(n.id,10)===t)return n}}destroy(){}}class St{constructor(t){this.CONFIGURATOR=t,this.HISTORY=[]}add(t){const{HISTORY:e}=this;(0===e.length||t!==e[e.length-1])&&e.push(t)}rewind(t){const{HISTORY:e,CONFIGURATOR:i}=this;let n;for(let i=0;i<=t;i+=1)n=e.pop();void 0!==n&&(i.openLayerFilterByName(n),i.openLayerByName(n))}reset(){this.HISTORY=[]}}function xt(t){return`0${Number(t).toString(16)}`.slice(-2).toUpperCase()}function Mt(t){return parseInt(t,16).toString()}function Pt(t,e){return`00${parseInt(t,10).toString(36)}`.slice(-e).toUpperCase()}function Dt(t){return parseInt(t,36)}i(7865);const wt={};class Ut{constructor(t){this.INITIALISED=!1,this.IS_DEBUG=t.isDebug,this.log("Configurator 1.0.7. Created with:"),this.log(t),this.filters=[],this.options=t,this.USER_AGENT_INFO=new mt,this.CONFIG_STRING_BASE=t.configStringBase||16,this.log(` - ConfigStringBase ${this.CONFIG_STRING_BASE}`),this.mode=!1,this.notify=!0,this.loaded=!1,this.touchState=!0,this.attributes={},this.layers=[],this.layerGroups=[],this.allLayers=[],this.el={},this.touchClick=!1,this.activeLayer=null,this.byId=[],this.menu=!1,this.remoteControl=!1,this.data={},this.options=t,this.enableKeyShortcuts=t.enableKeyShortcuts||!1,this.CONTAINER={},this.CONTAINER.main=t.configuratorElement,this.CONTAINER.stage=this.createContainer({type:"section",id:"stage",class:"",container:this.CONTAINER.main}),this.CONTAINER.stage.style.height="100%",this.CONTAINER.stage.style.width="100%",this.CONTAINER.stage.style.position="relative",this.CONTAINER.stage.style.overflow="hidden",this.CONTAINER.gestureHinter=this.createContainer({type:"section",id:"gesture-hinter",className:"configurator__gesture-hinter configurator__gesture-hinter--hidden",container:this.CONTAINER.main}),this.CONTAINER.hotspot=this.createContainer({type:"section",id:"hotspot-holder",className:"configurator__hotspot-holder",container:this.CONTAINER.main}),this.CONTAINER.elementHolder=this.createContainer({type:"section",id:"element-holder",className:"configurator__element-holder",container:this.CONTAINER.main}),this.CONTAINER.hotspot.style.position="absolute",this.CONTAINER.hotspot.style.top=0,this.CONTAINER.hotspot.style.left=0,this.CONTAINER.hotspot.style.width="100%",this.CONTAINER.hotspot.style.height="100%",this.CONTAINER.hotspot.style.pointerEvents="auto",this.CONTAINER.hotspot.style.zIndex=1,this.CONTAINER.hotspot.style.overflow=1,t.filters&&t.filters.length&&(this.postLoadFilters=t.filters),this.cache="none",this.isMobile=window.matchMedia("only screen and (max-width: 600px)").matches||window.matchMedia("only screen and ( max-height : 640px) and ( orientation: landscape )").matches,t.hideUI&&this.hideUI(),!0===this.USER_AGENT_INFO.isAvailableFullscreen()&&t.fullscreen.enabled&&(this.FULLSCREEN_CONTROLLER=new ft(this,t.fullscreen,this.CONTAINER.stage,t.configuratorElement)),this.ZOOM_CONTROLLER=new Ct(this,this.CONTAINER.stage),t.remote&&(this.WEBSOCKET_CONTROLLER=new Nt(this,t)),this.GESTURE_HANDLER=new Ot(this,this.CONTAINER.stage,this.CONTAINER.gestureHinter),this.LAYER_HISTORY_CONTROLLER=new St(this),this.enableKeyShortcuts&&document.addEventListener("keydown",(t=>{"n"===t.key&&this.nextLayer()})),t.mode?this.mode=t.mode:this.mode="web",this.CACHEABLE=t.settings.CACHEABLE||!1,this.CONFIGURATION=new yt,this.scene=t.scene;const e=t.settings.BASE_PATH||"/";if(this.setBasePath(e),wt.DYNAMIC_BASE_URL=t.settings.DYNAMIC_BASE_URL,wt.DYNAMIC_DATA_FILENAME=t.settings.DYNAMIC_DATA_FILENAME||"liveDataExport",wt.DYNAMIC_VERSION=t.settings.DYNAMIC_VERSION,this.generateDynamicUrls(this.scene),wt.STATIC_BASE_URL=t.settings.STATIC_BASE_URL,wt.STATIC_IMAGE_URL=`${wt.STATIC_BASE_URL}image/`,wt.ASSETURL="/",wt.IMAGEPATH="/",wt.DATAPATH="/",wt.THUMBPATH="/",!0===this.options.updateUrl||"true"===this.options.updateUrl){const t=this.parseUrl();t&&(this.options.config=t)}if(wt.WEBP=t.settings.WEBP||!1,t.settings.WEBP){const t=document.createElement("canvas");if(t.getContext&&t.getContext("2d")){const e=t.getContext("2d");e.width=1,e.height=1,wt.WEBP=0===t.toDataURL("image/webp").indexOf("data:image/webp")}else wt.WEBP=!1}}get(t){if(this.byId.length){if(e=t,!isNaN(parseFloat(e))&&isFinite(e))return this.allLayers[t];var e;for(let e=0,{length:i}=this.allLayers;e<i;e+=1)if(this.allLayers[e].get("file_path")===t)return this.allLayers[e]}}getActiveLayer(){return this.activeLayer}get listLayers(){return this.layers.map((t=>{const{order:e,name:i,layer_type:n,marker:r}=t.attributes;return{order:e,name:i,type:n,marker:r}}))}findLayerByName(t){return this.allLayers.find((e=>e.attributes.name===t||e.attributes.file_path===t))}nextLayer(){let t=this.layers.indexOf(this.activeLayer);t+=1,t===this.layers.length&&(t=0),this.get(t).setActive()}previousLayer(){let t=this.layers.indexOf(this.activeLayer);t-=1,t<0&&(t=this.layers.length-1),this.get(t).setActive()}getLayerGroup(t){"string"==typeof t&&(t={safeName:t});let e=this.layerGroups.filter((e=>e.safeName===t.safeName))[0];return e||(e=new _t(t),t.container&&t.container.appendChild(e.el.container),this.layerGroups.push(e)),e}create(t){this.log("Create"),!0===this.isMobile&&!1===this.ENABLE_MOBILE_HOTSPOTS&&(this.options.hotspots=!1),0==this.INITIALISED&&this.initialiseAPI();const{length:e}=t;for(let i=0;i<e;i+=1)if("true"!==t[i].disabled)if(null===t[i].group_by){this.log(` - Creating layer ${t[i].name}`);const e=new It(this);e.create(t[i],this.options,this),this.addReference(e),this.allLayers.push(e),"pallets"!==e.get("layer_type")&&"palletoptions"!==e.get("layer_type")||this.layers.push(e),this.length+=1}else{this.log(` - Creating layerGroupBy ${t[i].name}`);const e=new bt(t[i],this.options,this);this.layerGroupBys.push(e),this.allLayers.push(e)}return this.postLoadFilters&&this.postLoadFilters.forEach((t=>{this.setFilter(t[0],t[1])})),!0===this.CONFIGURATION.getAreLayerDetailsSet()?this.setConfigurationFromLayerDetails():this.setConfiguration(this.options.config),this}randomise(){this.setting=!0;for(let t=0,e=this.layers.length;t<e;t+=1){const e=this.get(t),i=Math.floor(Math.random()*e.items.length);e.byIndex[i].setActive()}this.setting=!1,this.updateNotify()}combinationCount(){let t=1;for(let e=0,i=this.layers.length;e<i;e+=1)t*=this.get(e).items.length;return t}setRemoteConfig(t){this.notify=!1,this.setConfiguration(t),this.notify=!0}setConfiguration(t){this.log(`setConfiguration. ${t}`);const e=t||[];let i;if("string"==typeof e&&e.length===2*this.allLayers.length)i=e.match(/.{1,2}/g);else if("string"==typeof e&&e.length===3*this.allLayers.length)i=e.match(/.{1,3}/g);else if(Array.isArray(e)&&e.length===this.allLayers.length)i=e;else{i=[];const{length:t}=this.allLayers;for(let e=0;e<t;e+=1)i[e]=0}this.setting=!0;for(let t in i)if(i.hasOwnProperty(t)){const e=this.get(t);if("LAYER_GROUP_BY"===e.LAYER_TYPE)16===this.CONFIG_STRING_BASE?e.setItemByIndex(Mt(i[e.get("build_order")])):e.setItemByIndex(Dt(i[e.get("build_order")]));else if(t=16===this.CONFIG_STRING_BASE?e.getItem(Mt(i[e.get("build_order")])):e.getItem(Dt(i[e.get("build_order")])),t||(t=e.getItem(0)),t){t.setActive();const e={};t.filters.forEach((t=>{e[t.filterCategoryName]||(e[t.filterCategoryName]=[]),e[t.filterCategoryName].push(t)}));for(let t in e)if(1===e[t].length){const i=this.layerFilters.find((e=>t===e.FILTER_DATA.name));i?i.setItemByFilterId(e[t][0].name):!1===e[t].reactive&&e[t][0].activate()}}else this.log(" - Invalid Configuration, defaulting to basic load."),this.setConfiguration()}this.setting=!1,this.updateNotify()}setConfigurationFromLayerDetails(){const{length:t}=this.allLayers;let e,i,n;for(let r=0;r<t;r+=1){let t;e=this.allLayers[r],t="LAYER_GROUP_BY"===e.LAYER_TYPE?e.LAYERDATA.name:e.attributes.name,i=this.CONFIGURATION.getIndexForLayer(t),"LAYER_GROUP_BY"===e.LAYER_TYPE?e.setItemByIndex(i):(n=e.getItem(i),n&&n.setActive())}}setDefaultConfig(t){this.CONFIGURATION.setDefaultConfigString(t)}getDefaultConfig(){return this.CONFIGURATION.getDefaultConfigString()}activateFilter(){}setFilter(t,e){if(this.log(`setFilter. group:${t} filter:${e}`),!this.filters)return this.log("setFilter. this.filters not found. Abandoning"),!1;const i=this.filters.byGroup[t];if(!i)return this.log("setFilter. The filter group does not exist. Abandoning"),!1;const n=i.filters[e];return n?(this.log(" - Activating filter."),n.activate(),this.log(" - Activating filter. Complete"),"layer"===i.render_as&&(this.log(" - found Filter render_as ",n),this.setLayerFilterHighlight(t,e)),n):(this.log("setFilter. The filter group was found but no filter with that name exists."),i)}activateFiltersInGroup(t){if(this.log(`activateFiltersInGroup. group:${t}`),!this.filters)return this.log("activateFiltersInGroup. this.filters not found. Abandoning"),!1;const e=this.filters.byGroup[t];if(!e)return this.log(`activateFiltersInGroup. The filter group '${t}' does not exist. Abandoning`),!1;const i=e.filters;return Object.keys(i).forEach((t=>{const e=i[t];e.activate(!0),e.updateFilters()})),!0}getFilters(){return this.filters}setFilters(t){this.filters=t}getFilterByName(t){return this.filters.getFilterByName(t)}getFiltersByGroup(t){return this.filters.getFiltersByGroup(t)}setLayerFilterHighlight(t,e){const i=this.layerFilters.find((e=>e.FILTER_GROUP_ID===t));if(i){const t=i.getItemIndexByFilterId(e);i.highlightItemByIndex(t)}}closeLayerFilters(){const t=this.layerFilters;for(let e=0;e<t.length;e+=1)t[e].clearActive()}updateNotify(t=!0){if(t&&this.setting)return;const e=this.CONFIGURATION.getString(),i=this.buildConfigString();if(i===e)return;const n=[];if(e)for(let t=0,r=i.length/2;t<r;t+=1)i.charAt(t)+i.charAt(t+1)!==e.charAt(t)+e.charAt(t+1)&&n.push(t);if(this.log(`Configurator. updateNotify. Setting config to ${i}`),this.CONFIGURATION.setString(i),i){"web"===this.mode&&1===this.options.urlUpdate?"true"===this.options.updateUrl&&window.history.replaceState({set:"system"},"",`${wt.BASEPATH}${i}`):"web"===this.mode&&2===this.options.urlUpdate&&"true"===this.options.updateUrl&&window.history.replaceState({set:"system"},"",`${wt.BASEPATH}${this.scene}/${i}`);const t=`${wt.DYNAMIC_TILE_URL}${i}_${this.CONFIG_STRING_BASE}_`;if(this.panoViewer.setPathTiles(t),i.length/2===this.allLayers.length){const t=this.getActiveElements();delete t.previewImage;const e=new CustomEvent("config-update",{detail:{config:t}});this.CONTAINER.main.dispatchEvent(e)}}}buildConfigString(){if(this.setting)return!1;let t;return this.log(`buildConfigString. base ${this.CONFIG_STRING_BASE}`),16===this.CONFIG_STRING_BASE?t=this.buildConfigStringHex():36===this.CONFIG_STRING_BASE?t=this.buildConfigStringBase36(2):336===this.CONFIG_STRING_BASE&&(t=this.buildConfigStringBase36(3)),t||(t=this.options.config),t}buildConfigStringHex(){this.log("buildConfigStringHex");let t=[];const e=this.allLayers;for(let i=0;i<e.length;i+=1){const n=e[i],r=n.get("build_order");if("LAYER_GROUP_BY"===n.LAYER_TYPE)t[r]=xt(n.getItemIndexActive());else{if(!n.activeItem)break;t[r]=xt(n.activeItem.get("index"))}}return t=t.join(""),t}buildConfigStringBase36(t=2){this.log(`buildConfigStringBase36 with ${t} chars`);let e=[];const i=this.allLayers;for(let n=0;n<i.length;n+=1){const r=i[n],o=r.get("build_order");if("LAYER_GROUP_BY"===r.LAYER_TYPE){const i=Pt(r.getItemIndexActive(),t);e[o]=i}else{if(!r.activeItem)break;e[o]=Pt(r.activeItem.get("index"),t)}}return e=e.join(""),e}getScreenshot(){const{format:t,quality:e}=this.options.screenshot;this.log("getScreenshot");const i=this.panoViewer.getScreenshot(t,e),n=document.createElement("img");return n.src=i,this.CONTAINER.main.appendChild(n),this.onInteractionZoom(100),n}openLayerByName(t){this.log(`openLayerByName '${t}'`);const e=this.allLayers;for(let i=0;i<e.length;i+=1){const n=e[i];n.get("name")===t&&n.setActive()}}closeLayers(){const t=this.allLayers;for(let e=0;e<t.length;e+=1)t[e].clearActive();this.activeLayer=!1}newLayerActive(t){if(this.log(`newLayerActive ${t}`),this.addLayerHistory(t.get("name")),t.get("render_into")){const e=this.get(t.get("render_into"));this.activeLayer!==e&&e.setActive(),e.active=!1}else if(t.get("layer_group")){const e=this.getLayerGroup(t.get("layer_group"));this.activeLayer?(this.activeLayer.get("render_into")?this.get(this.activeLayer.get("render_into")).clearActive():this.activeLayer.clearActive(),this.activeLayer.get("layer_group")&&this.activeLayer.get("layer_group")!==t.get("layer_group")?this.getLayerGroup(this.activeLayer.get("layer_group")).deactivate():e.newLayerActive(t)):e.newLayerActive(t)}else this.activeLayer&&(this.activeLayer.get("render_into")&&this.activeLayer.get("render_into")!==t.get("file_path")&&(this.activeLayer.parentComponent.clearActive(),this.activeLayer.parentComponent.get("layer_group")&&this.activeLayer.parentComponent.parentComponent.deactivate()),this.activeLayer.get("layer_group")&&this.activeLayer.parentComponent&&this.activeLayer.parentComponent.deactivate(),this.activeLayer.clearActive());t.get("layer_group")&&this.getLayerGroup(t.get("layer_group")).newLayerActive(t),this.activeLayer=t,"LAYER_GROUP_BY"!==this.activeLayer.LAYER_TYPE&&this.options.hotspotFocus&&this.panoViewer.focusHotspot(this.activeLayer.attributes.name)}openMenu(){this.CONTAINER.menu.parentElement.classList.add("active")}collapseMenu(){this.CONTAINER.menu.parentElement.classList.remove("active")}menuItemClicked(t){let e,{target:i}=t;if("change"===t.type&&"itemGroup"===i.name){const e=t.target.getAttribute("data-item-index");return void this.getActiveLayer().getItem(e).setActive()}if("BUTTON"===i.tagName)return!0;if("UL"===i.tagName)return!1;if(i.classList&&i.classList.contains("js-hide-config-menu"))return void this.collapseMenu();for(;null!==i&&"LI"!==i.tagName;)i=i.parentNode;if(null===i)return!1;if(i.classList.contains("js-select-submenu"),i.classList.contains("js-select-component-group")){const t=this.getLayerGroup({safeName:i.dataset.collection});return void(this.menu.accordianMediaQuery.matches&&t.active?(t.deactivate(),this.activeLayer.clearActive(),this.activeLayer=!1,this.collapseMenu()):t.setActive())}if(i.classList.contains("js-select-component")){e=this.get(i.dataset.collection);const t=e.active;if(this.activeLayer===e&&t)return e.el.itemContainer.classList.remove("active"),void(e.active=!1);if(i.classList.contains("js-layer-group")&&e.layerGroup)return void e.layerGroup.setActive(e);e.setActive(!0);const n=this.menu.accordianMediaQuery.matches;let r,o;return e.get("layer_group")?(r=e.el.itemContainer.offsetTop,n?(r+=e.parentComponent.el.componentContainer.offsetTop,o=e.el.menuContainer.parentElement):o=e.parentComponent.el.componentContainer):(r=e.el.itemContainer.offsetTop,n?(r+=e.el.itemMenu.parentElement.offsetTop,o=e.el.menuContainer.parentElement):o=e.el.itemMenu.parentElement),void(t||function(t,e,i,n){const r=t,o=t.scrollTop,s=e-o,a=Date.now();!function t(){const e=Date.now()-a,i=Math.easeInOutQuad(e,o,s,500);e<500?(r.scrollTop=i,requestAnimationFrame(t,20)):r.scrollTop=o+s}()}(o,r))}if(i.classList.contains("js-select-filter-group"))return void(i.parentElement.classList.contains("active")&&i.parentElement.classList.remove("active"));if(this.activeLayer&&i.dataset.collection===this.activeLayer.get("file_path"))return this.menu.accordianMediaQuery.matches?(this.activeLayer.clearActive(),this.activeLayer.get("layer_group")&&this.getLayerGroup(this.activeLayer.get("layer_group")).deactivate(),this.activeLayer=!1):this.CONTAINER.menu.parentElement.classList.add("active"),!1;void 0!==i.dataset.collection?(e=this.get(i.dataset.collection),e&&(this.closeLayerFilters(),e.setActive(!0))):void 0!==i.dataset.itemIndex&&(e=this.get(i.dataset.zone),this.setting=!0,e&&("LAYER_GROUP_BY"===e.LAYER_TYPE?e.setItemByIndex(i.dataset.itemIndex):(e.getItem(i.dataset.itemIndex).setActive({scroll:!1,linked:!0,details:!0}),this.onItemClick())),this.setting=!1,this.updateNotify());const n=this.layerFilters;let r,o=!1;for(let t=0;t<n.length;t+=1){const e=n[t];i.dataset.collection===e.getSafeName()&&(o=e.toggleActive(),r=e.getName())}!0===o&&(this.addLayerHistory(r),this.closeLayers())}getDownloadLink(){return`${wt.ASSETURL+this.buildConfigString()}.jpg`}getScaledLink(t){return`${wt.ASSETURL+t}/${this.buildConfigString()}.jpg`}getTile(t,e){return`${wt.ASSETURL}tile/1024/${t}/${e}/${this.buildConfigString()}.jpg`}getCubicTile(t,e,i,n){return`${wt.DYNAMIC_TILE_URL}${this.buildConfigString()}_${e}_${i}_${n}.jpg`}getSocialImage(){return 36===this.CONFIG_STRING_BASE?`${wt.DYNAMIC_SOCIAL_URL+this.buildConfigString()}_36.jpg`:336===this.CONFIG_STRING_BASE?`${wt.DYNAMIC_SOCIAL_URL+this.buildConfigString()}_336.jpg`:`${wt.DYNAMIC_SOCIAL_URL+this.buildConfigString()}.jpg`}addReference(t){const e=t.get("id");e?this.byId[e]=t:this.byId.push(t),t.layers||(t.configurator=this)}chooseReactiveNeighbours(){const t=this.allLayers;for(let e=0;e<t.length;e+=1)t[e].chooseReactiveNeighbours()}showScene(t){this.CONFIGURATION.setLayerDetails(this.allLayers,this.scene),this.reset(),this.generateDynamicUrls(t),this.scene=t,this.loadData()}setScene(t){t!==this.scene&&(this.clearHotspots(),this.showScene(t))}reset(){let t;for(t=0;t<this.allLayers.length;t+=1)this.allLayers[t].destroy();this.filters=[],this.attributes={},this.layers=[],this.layerGroups=[],this.layerFilters=[],this.layerGroupBys=[],this.allLayers=[],this.el={},this.activeLayer=null,this.byId=[],this.postLoadTickboxElements=[]}resetMenus(){}getActiveElements(){const t={current:this.buildConfigString(),sceneName:this.getCurrentSceneDisplayName(),url:document.location.href,previewImage:this.getSocialImage(),items:[]};for(let e=0;e<this.allLayers.length;e++){const i=this.allLayers[e],n=i.activeItem;if(!n)break;let r;if(r=i.layerGroup?i.layerGroup.name:i.parentComponent?i.parentComponent.layerGroup?i.parentComponent.layerGroup.name:i.parentComponent.get("name"):i.get("name"),"LAYER_GROUP_BY"===i.LAYER_TYPE){let e={component:i.get("name"),componentGroup:r,componentId:i.get("build_order"),id:n.attributes.id,name:n.attributes.name,thumbnail:`${wt.THUMBPATH+n.attributes.image_path}.jpg`,description:n.attributes.description,productCode:n.attributes.product_code,filters:i.parseFilters()};void 0!==e.productCode&&null!==e.productCode||delete e.productCode,t.items.push(e)}else{let e={component:i.get("name"),componentGroup:r,componentId:i.get("build_order"),id:n.get("index"),name:n.get("name"),thumbnail:`${wt.THUMBPATH+n.get("image_path")}.jpg`,description:n.get("description"),productCode:n.get("product_code"),filters:n.parseFilters()};void 0!==e.productCode&&null!==e.productCode||delete e.productCode,t.items.push(e)}}return t}reload(t){this.options.url=t,this.reset(),this.resetMenus(),this.loadData()}loadData(){const t=new XMLHttpRequest;t.open("GET",wt.DYNAMIC_DATA_URL,!0);const e=this;t.onreadystatechange=function(){if(t.readyState===XMLHttpRequest.DONE&&200===t.status){e.data=JSON.parse(t.responseText),!0===e.IS_DEBUG&&(console.log("Configurator. loaded data:"),console.log(e.data)),e.reset(),this.panoViewer&&this.panoViewer.clearHotspots(),e.LAYER_HISTORY_CONTROLLER.reset();const i=e.data.filter_groups;if(e.filters=!(!i||!i.length)&&new gt(e,i),!e.postLoadFilters){e.postLoadFilters=[];for(const t in e.filters.byGroup){const i=Object.keys(e.filters.byGroup[t].filters)[0];e.postLoadFilters.push([t,i])}}for(let t=0;t<i.length;t+=1){const n=i[t];"layer"!==n.render_as&&"layerFilter"!==n.menu_type||e.layerFilters.push(new Lt(e,e.options,i[t]))}e.options.sceneSelector=e.options.sceneSelector||e.data.project_info.scene_selector;const{layers:n}=e.data;e.create(n),e.loaded=!0;const r=new CustomEvent("scene-data-loaded",{});e.CONTAINER.main.dispatchEvent(r)}else t.readyState===XMLHttpRequest.DONE&&t.status},t.send()}postLoad(){this.filters.filters.forEach((t=>{void 0!==t.el&&t.active?Array.isArray(t.el)?t.el.forEach((t=>{t.classList.add("active")})):t.el.classList.add("active"):t.el&&(Array.isArray(t.el)?t.el.forEach((t=>{t.classList.remove("active")})):t.el.classList.remove("active"))}))}onItemClick(){const t=new CustomEvent("item-click",{detail:{}});this.CONTAINER.main.dispatchEvent(t)}rotateHorizontal(t){this.panoViewer.rotateHorizontal&&this.panoViewer.rotateHorizontal(t)}rotateVertical(t){this.panoViewer.rotateVertical&&this.panoViewer.rotateVertical(t)}onInteractionZoom(t){t<0?this.panoViewer.zoomIn&&this.panoViewer.zoomIn():this.panoViewer.zoomOut&&this.panoViewer.zoomOut()}onInteractionStart(){this.panoViewer.onInteractionStart&&this.panoViewer.onInteractionStart()}onInteractionEnd(){this.panoViewer.onInteractionEnd&&this.panoViewer.onInteractionEnd()}setRotation(t,e){this.panoViewer.setRotation(t,e)}setRotationTarget(t,e){this.panoViewer.setRotationTarget(t,e)}getRotation(){return this.panoViewer.getRotation()}setZoom(t){this.onInteractionZoom(t)}getCameraPosition(){return{...this.getRotation(),zoom:this.panoViewer.getZoomTarget()}}setCameraPosition(t,e,i){this.setRotationTarget(t,e),i&&this.panoViewer.setZoomTarget(i)}onHotspotClick(t,e,i){this.log(`onHotspotClick ${t} ${e},${i}`),this.allLayers.forEach((e=>{"LAYER_GROUP_BY"===e.LAYER_TYPE?e.getName()===t&&e.setActive():e.attributes.name===t&&e.setActive()}));const n=new CustomEvent("hotspot-click",{detail:{hotspotId:t,hotspotTheta:e,hotspotPhi:i}});this.CONTAINER.main.dispatchEvent(n)}addLayerHistory(t){this.LAYER_HISTORY_CONTROLLER.add(t)}rewindLayerHistory(t){this.LAYER_HISTORY_CONTROLLER.rewind(t)}onEnterFullscreen(){this.GESTURE_HANDLER.onEnterFullscreen()}onLeaveFullscreen(){this.GESTURE_HANDLER.onLeaveFullscreen()}generateDynamicUrls(t){"liveDataExport"===wt.DYNAMIC_DATA_FILENAME||wt.DYNAMIC_VERSION.includes(".")?(wt.DYNAMIC_DATA_URL=`${wt.DYNAMIC_BASE_URL}${t}/${wt.DYNAMIC_VERSION}/${wt.DYNAMIC_DATA_FILENAME}.json`,wt.DYNAMIC_THUMB_URL=`${wt.DYNAMIC_BASE_URL}${t}/${wt.DYNAMIC_VERSION}/thumb/`,wt.DYNAMIC_SOCIAL_URL=`${wt.DYNAMIC_BASE_URL}${t}/${wt.DYNAMIC_VERSION}/social/`,wt.DYNAMIC_SCENE_URL=`${wt.DYNAMIC_BASE_URL}${t}/${wt.DYNAMIC_VERSION}/`):(wt.DYNAMIC_DATA_URL=`${wt.DYNAMIC_BASE_URL}${t}/${wt.DYNAMIC_DATA_FILENAME}.json`,wt.DYNAMIC_THUMB_URL=`${wt.DYNAMIC_BASE_URL}${t}/thumb/`,wt.DYNAMIC_SOCIAL_URL=`${wt.DYNAMIC_BASE_URL}${t}/social/`,wt.DYNAMIC_SCENE_URL=`${wt.DYNAMIC_BASE_URL}${t}/`),wt.DYNAMIC_PREVIEW_URL=`${wt.DYNAMIC_BASE_URL}${t}/${wt.DYNAMIC_VERSION}/preview/`,wt.DYNAMIC_TILE_URL=`${wt.DYNAMIC_BASE_URL}${t}/${wt.DYNAMIC_VERSION}/tiles/`}getCacheable(){return this.CACHEABLE}getWebp(){return wt.WEBP}getDynamicBaseUrl(){return wt.DYNAMIC_BASE_URL}getStaticImageUrl(){return wt.STATIC_IMAGE_URL}getDynamicThumbUrl(){return wt.DYNAMIC_THUMB_URL}getDynamicSceneUrl(){return wt.DYNAMIC_SCENE_URL}getDynamicVersionUrl(){return wt.DYNAMIC_VERSION}getAssetUrl(){return wt.ASSETURL}getCurrentSceneId(){return this.scene}getCurrentSceneDisplayName(){if(!this.options.sceneSelector||!this.options.sceneSelector.scenes)return this.options.scene;{const{scenes:t}=this.options.sceneSelector;for(let e=0;e<t.length;e+=1)if(t[e].id===this.scene)return t[e].displayName}return""}getCameraRotationLimits(){return{limit_camera_rotation:this.data.limit_camera_rotation,camera_rotation_min:this.data.camera_rotation_min,camera_rotation_max:this.data.camera_rotation_max}}devLogCameraInfo(){this.panoViewer.devLogCameraInfo()}log(t,e){let i;"success"===e?i="green":"warning"===e?i="blue":"error"===e&&(i="red"),!0===this.IS_DEBUG&&console.log(`%cConfigurator. ${t}`,`color:${i}`)}createContainer(t){const e=document.createElement(t.type);return e.id=t.id,e.className=t.className,void 0!==t.container&&t.container.appendChild(e),e}initialiseAPI(){this.INITIALISED=!0;const{options:t}=this,e=t.dimensionsHotspot||[32,32];let i;i=void 0!==t.pathAssetHotspot?`${t.settings.STATIC_BASE_URL}${t.pathAssetHotspot}`:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACCCAYAAACO9sDAAAAAAXNSR0IArs4c6QAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAgKADAAQAAAABAAAAggAAAAARhnUtAAAPLklEQVR4Ae2dWYwcVxWGZ8aT2I63SbAzNnbiGdtJlNXOhi3LgEHigRdeWAQ8AC+AEBIRQgICElGiCFCQEA9ErEJ5AQmBxCIQvBAcObGceHdsjPcZr5lxjMfJeBtv/F9PV890Ty9VXedUV3fXkX5XdXXVufee8997zz11e9zZ0YJy8+bNW9SsOcLsSUeuTSsB15CrwvUScG1UeDc4dnZ2cq2lpLMVWiOHv0ftCIDjpzu164r0QoizQITg2NTSdASQs7tk8TuEwOE9OqdnN0IYNUaEtwXIcE6kuKFj00jTEECOnyWrLsnjtpRa+KLqdVw4KSJcSGkdi6qVagLI6fTsxQKOp8c3kzAiQIZTIgMjRSollQSQ4wnOlgt9QhCo6bQphcBxQDgsIqQuiEwVAeT4GTLUMmGp0C20klxTYwaFIyLC5bQ0LBUEkOOZ0+8RGOoJ8lpZCBKZGg6JCMQMDZWGEiA/x98rC9DrW93xpY6GCEeEA42MERpGADm/V41/WJgptLNcUuPfFAmGGmGExAkgx+NwHA8BMpmwAATYJSKQbEpMEiWAnH+nWvaocGtiLWyugsZU3R0iwXBS1U6EAHI88ztz/QohkTKTMqBDOTel85CwX0Tg3FXcnZEf8h9XK253bUnrKSeRxGhAjOAmrgTIhvzYfnOfEtwIIOf3q/kPCm5lxDZvcyhgGtitkeCYR3VdnCPn43jW9pnYWeC/IsFBO3XjmkwJIMej7xHhbuuKZvpyFhgUCXZb2sKMAHI+kf6TAku9TPwscFKqd4oIZBJjC06zEiL9zPlW1qysh9fj2NpETEYA9f6HVJt+kxr5KSH5RPaR5Sh7Bdlgwkso3kCSfePFDJs42Ad4XnhLSM1bO9WlVI5qFNhTejHq59ivXOV8Ejxpcz7OXiUwJbGvAMfPEaIKpDgj8NLmDWGHwLU0SL9sPyYSHIhTmVgjgCrQp8LJ66dB2DH0hPA+YaUACayFnT30ui3CZiGxlK3KqiTbRQLigrqkbgLI+fQqeljdOuqqcfFDlM2q40PCWoHhPClhgwdEeFnYJvC5EUIwuFUkqOttYl3Ok/N5o7deiD2FSEc9Qr3XC58WFgmNlnOqwB+EfwqNIAJlviISRJ6eIhNAzmflQG9rRG6f+lL2Z4W7hLQJ8cLvhX8JSW8EhYSbRAJGhNBSDwHul3be6iUtBJtfFfqTLriO8k7omV8L2+t4Ns4jbDPbF0VBJAKo98+X8jVCpOeiVKjMvZT5OeGDQpLllqlK5EvEBj8X6pqfI5fW0cF7g80iAT9UCSWhDSrnsz17vZBkoLVa5T0lsG5vViHH8DOBYDEJuaxCNogEobagRyEA6+qk5t1pKutLwkeFVhHigl8KlxJo0HERYGeYckIRQL2/R8reH0ahwT0LpeObQiPiDIPqV1VxSt/+QBisepfNlxtFgpFaqojoq4qcD0mSSvYsVVkvCK3ofOz8XuFHArkLbyE9X1NqEkAa7hYYAbyFKJ/ekURZ3m2ppp8Y6hmBjKWn3K7OW3PKrkoAKbhVNbzPs5Z53fSI54VmDvaimImA+mmBlY2n3C8fdlcroCoB9GCfML2aAoPv7pGO7whJri4Mqh1bBYEuK5yVsTVVVoDv+ip/XeXnWGIOFeyv9rDBdwR8DIe8lm1HoXcyEjD9eUlf3pdl9VcbAZboCaYAL5kjxc8Kc70KaBK9kP97gtc7jZnSjS/LSlkCiDGduntZ2SfsLrLU82q0XS2T0UQnYBqsOl/HqEpFX5YlgArCMZ4B2cek33Pui2Grhj3KEvgLTqXPVqdmup0ilRhXkTFTNES/QND3+eiP2TwxNjbWsWnTprLK1q1b19HdXckkZR+xvkjH2CLsslYsfSuEt0r1MtQXiZjCzpq1RRftPhBTvCj02qmMpmloaKhj4cKynaFjZGSkY968edEU2t99TiqfEmpm8eoo+lVlB9FfkHJTQHnrFB6JdfIZPd0w58eqeXIPs8/ii07FkYkskiIC5IM/th17CK91GeIyqW0B3rt4LA0X531cqEERAXQVJ3klfr4s3WTAMglnAY9RAN/i44KUEsCr9y9Tid6570KjWuTkPrVjtUNbinxcCHk1NJD581qXM/dPCTgdGldTZVdXV8UgUAFSzecTvuFTKu914zIXydf8KZqb6C0QQOcLSj7zvYVAqtT0/gULFnScPn3aol1J6GDJ/Jiw3bAwfM7fWj6LzslTAMs/D4HFqetaHg110vkJB70FX3sTgN6/3qEB7aSSjR2hNndEMEohEMwRQHMC0fncCArC3vqAbiS2yCSeBQgILaVHPs/5PhgBGBI8hmnmr0ziW2BNfBVFGuiUuR/2TCZA0R0GHwg2HjfQk6kYTwoV5m0jg+T0BQTwSIA/ooqmbqPH8PBwR09PT1mcP3/eyLbmahidVxlrzcUBwTLQ49VvKod/zX0dKXZ0NR9jT35bYCU5n3flA0BShNaSDf+2FoUAQYe10Dwd3zMFePR+0o1FKUeLGre5jllqP9Oqpcz0IoB11GrZ6GbWZT2tzoYAbBq0lmXWCjN9OQtY5wNyBPCYAhiuMrG3gLWvcgTwWKrlkgz27W97jdY/m5vBFACsJSOAtUXH9TGyWm6q0ctx+1w9aUbroWq8+dm/WMByes0tAy0ZRQX5xY/lehWdmUxYwHJ0zY0A1lOAJUMnmp2dBRawJMA0jxjAsoJBo7PjhAUs7dtt3fuppmUFJ5qdnQUWMF0JQIAbgWajY9EvT4x0ZmomLGD5i6FrGQEmDNssZ5Yd7DoEuGrcckuGGletJdRZEuCGBwEuOJCqJTxn1AhLAlz1mAJop2UljezWEmquqxXvGLYkR4CLhgoDVRkBAkvYHvkxh2XQfoURwIMAWRxg6/hAm3XHuggBPP52rXVFAwO0+9G6Y13yGgGOtLunnNp/wljvKAQYNVaKui1C7tenDrrbWeVm48aPdulnwlek1DoXQLAyYFzZdlfH8nq/oRGuyve5VQA6PQJBy580G7a7aVVZ2zPnc6YAxHJtOa5x/P/VC86zY3wLWA//OZ8HBMj9sYD4dSzSwHDFsJVJfAsQT22Lr6ZIQ87nAQHeLvrK7oP1sGVXs+bSdEDVtZ6mcz7PEUDBALkA6wIwcUYArBBfrIf/0bzPi3YEe0wDO9X2bDkYnwDWHWk4qFIwBfDZgwDofDUoLDvWZQFiqaN1PVn5oYKvJxNgSPdbvmgIiv+TTrJRILBG9OMfoz9S9Ql8fCa4o0AAzQljulgYGoIbDI6HpGOHgZ52VHFSjbb+O4HD8jWvlXNSIED+8/H80frwV2uF9err7e3t4I9ElEMK/lJ4abOsez/6i3xcSgCmAVLD1kIQQ0CYSXgL8OLnlfC3h7oT3+LjghQRQEMDc/WU/1SgcHe8k1/p8cLQE09VWzzN/z5+zbilJ/M+LqgtIkD+KvOOhzD0/N1DcQvqZN63XvphpqLhnwtTCCCGsETw2tDxW+k+T8GZVLQACblfVPy2/i/OybdT3vlMIUBeP5G7h5BxfNFDcQvp/J3a4pGaL+vTsgQQU4gDPDaK4CfSmqlZFVChFAlDv4dtSP2Wje3KEiBvEM9tXS+pDF5wZDJhAaLzn0x8ND0r2/spoRoBWIZ4bBilXKLb7wuFlCQX21iY958TPF6fX5beinsJKxJAQwZLtgHBS/4nxc8IUwITrwJTqpcM7PPClAjdqL6H5MuKqfiKBMgXPqCj1yhAEceEZwWM0I5CJ/uhsMep8fiuKrGqEkDMYaj2qlzQ5oM6eUFoxyTRj9XurYEhHI578j6sqLoqAXhKCogePV4STa7UG/rwLcFr5TG5rDScMy8/J2x0rAwvfcpG/pPLrEmA/M17dfTuoawKnhasf/2Sb0JqDpD8u4Jnz8dX+KymhCKAmESlj9bUFv+GQan4mtCqS8RTats3BKY9TyHwCzWahiJAvqY4JYmInRHg24JHQiTflIYcXlOpXxdOO5f+rvQfDlsG/xNFaNE79Dm6eZ3QHfqheDeu1eOMCLfFU9PQpwmkfyP8LYFaUNbGsL2f+kQiAA+IBHfpsIrzhGS+yvmK8GRC5VkWs0/KfipUXYoZFrhTzo9UVmQCUFmR4DEdFhtWPIyqJ3QTRFgQ5uYG38Pb1JeEDULFJIy+s5Tjcv7OqArrJcAtKugDQtJD860q8yPCxwVGhrQJ8y+xy18ElnpJCankDSJA5JVaXQSgVRoF5urAHA0ZkpZpKvDDwieFhUkXXqY8evyfhX8ISTqeqlwVXpPzIV9kqZsAlCQSMByvFmLpQVedQrmPCpBhjcAIkZQQcPF3EF4Wtgl8TlpuqMDX5fy69w/EdpxI0K9KPJR0y8uUN1PX1gkEqA8KdwjWQi/7j7Bb+LcwKjRSdsv5g3EqEJsAFC4SYPBlcSri8Owi6YSY1Av0CZAkrIzpxmPCgEDiBsfHMraet5Qjcv7euApNCEAlRAKidIyeZmHKImYgnzFLIIidIVwRCKQuCPTqYcE7YaMi6pbTcr5JKtmSAF1qDiTorbtZ2YNhLDCkm7aKAMz/scWMANREowD6HhaW8jkTcwsMSuObcr5ZbsGUAEFzRYQHdL48+JwdTSxwWI4nDjEVFwJQQ5EAAkCETOJZgN6+T84P/YInSnFuBKASIgFBIcuypF4eUWwrCbkF8vtuAakrAfCESEC0TXBI5jCT8BZ4R7cS7LEycRN3AlBzkYDULcEhbxIzqW2B47qFYC9ybr+26uI7EiFAUKSIAAEgAoTIZKoFcDiOhwCJSKIEoEUiAcmXlcJ8PmdSsAD5/F1yPgmpxCRxAgQtExFIGJGqhRDtLDh8rxxfcwevh5EaRgAak48N7tUpuXoyie0kZPKOCvuTmOsrGbahBAgqlZ8WVugzMUKrEwHHnxAOJj3cq8wpkgoCBLUSEXgxw2hAKrnVcges6Y8JZPSS3jSiYstLqggQVFFEYJfRcqFPaMSOIxVrJuzYGRBwPOepklQSILBQPkYgm7hEYNWQ6voG9daR9C1RPUM9r27d1/Mqpy5pFoMSME5XCyECSGtWcUR1w+mn5HT2GKRemoYAky0pMrCz506BDR6MDI2aJtg1RE8/A+T0Szo2lTQlAUotLEL06BpEAIwOjBYeQq8mR39WwOH0+KaWliBAqQdECEaEOcLsSUeukYKejGDkIDhjnp4Mro0KbATNHeXw1AVxqlss+T+JiCV7XFaNoQAAAABJRU5ErkJggg==",t.isDebug=!1,this.IS_DEBUG=t.isDebug,this.panoViewer=new pt({container:this.CONTAINER.stage,containerHotspot:this.CONTAINER.hotspot,containerElementHolder:this.CONTAINER.elementHolder,dimensionsHotspot:e,pathAssetHotspot:i,callbackHotspotClick:this.onHotspotClick.bind(this),isDebug:t.isDebug,colourClear:t.colourClear,colourBackground:t.colourBackground,colourBackgroundInitialDetail:t.colourBackgroundInitialDetail})}showUI(){this.CONTAINER.main.classList.remove("hide-ui")}hideUI(){this.CONTAINER.main.classList.add("hide-ui")}parseUrl(){if(document.location){let t=document.location.pathname.replace(wt.BASEPATH,"");if(this.log(`Checking document location for config: ${t}`),t=t.split("/"),2===t.length?(this.log(`Setting scene and config from url ${t[0]} ${t[1]}`),this.scene=t[0],t=t[1]):1===t.length&&(this.log(`Setting config from url: ${t[0]}`),t=t[0]),t.length)return t}}setBasePath(t){wt.BASEPATH=t}toggleFullScreen(){this.FULLSCREEN_CONTROLLER.toggleFullScreen()}addHotspot(t,e,i){this.panoViewer.addHotspot(t,e,i)}clearHotspots(){this.panoViewer.clearHotspots()}addElementHolder(t,e,i){this.panoViewer.addElementHolder(t,e,i)}clearElementHolders(){this.panoViewer.clearElementHolders()}getSkuList(){let t=[];return this.getActiveElements().items.forEach((e=>{e.productCode&&t.push(e.productCode)})),t}setSku(t){let e=null;if("string"==typeof t?e=this.getItemBySku(t):"object"==typeof t&&(e=this.getItemByData(t)),!e)return`API. Couldn't find Item with matching SKU: '${t.sku||t}'!`;const{item:i}=e;this.log("setSku item:",i),i.setActive()}setSkuList(t){let e=!1;const i=[];t.forEach((t=>{let n=null;if("string"==typeof t?n=this.getItemBySku(t):"object"==typeof t&&(n=this.getItemByData(t)),!n)return`API. Couldn't find Item with matching SKU: '${t.sku||t}'!`;const{item:r,layerIndex:o,attributes:s}=n;let a=!1;r.filter&&r.filter.forEach((t=>{"reactive"===t.type&&(a=!0)})),a?i.push({layerIndex:o,item:r,sku:r.attributes.product_code,...s&&{attributes:s}}):(r.setActive(),e=!0)})),i.forEach((t=>{if(e){const e=this.getItemFromLayerBySku(t.layerIndex,t.sku,t.attributes);e&&e.setActive()}else t.item.setActive()}))}getItemBySku(t,e=!1){let i=null;return this.log("getItemBySku sku: ",t),this.allLayers.forEach(((n,r)=>{if(i)return;const o=this.getItemFromLayerBySku(r,t,e);o&&(i={item:o,layerIndex:r})})),this.log("getItemBySku itemFound: ",i),i}getItemFromLayerBySku(t,e,i=!1){const n=this.allLayers[t];if(!n.items)return!1;let r;return n.items.find((t=>{if(t.attributes.product_code!==e)return!1;if(!0!==t.visibility)return!1;if(i){r=t;for(const[e,n]of Object.entries(i))if(void 0!==t[e]){if(t[e]!==n)return r=t,!1}else if(void 0!==t.attributes[e]){if(t.attributes[e]!==n)return r=t,!1}else{if(void 0===t.attributes.description)return!1;{let i;if(i="string"==typeof t.attributes.description?JSON.parse(t.attributes.description):t.attributes.description,void 0===i[e])return!1;if(i[e]!==n)return r=t,!1}}}return!0}))||(r?(this.log(`API. Couldn't find matching attributes: '${Object.entries(i).join(", ")}' for Item with SKU: ${e} in '${n.attributes.name}' layer. Returning closest match!`,"warning"),r):void 0)}getItemByData(t){const{zone:e,sku:i,...n}=t;let r;if(!i)return void this.log("No SKU provided! Aborting!","error");const o=this.allLayers.findIndex((t=>t.attributes.file_path===e||t.attributes.name===e));if(this.log("API.",o),-1!==o){const t=0!==Object.keys(n).length,s=this.getItemFromLayerBySku(o,i,!!t&&n);s&&(r={item:s,zone:e,sku:i,attributes:n})}if(-1===o){void 0!==e&&(n.type=e);const t=this.getItemBySku(i,n);t&&(r={item:t.item,zone:e,sku:i,attributes:n})}return r||void 0}}wt.Configurator=Ut;const Ft={updateUrl:!1,updateBrowserUrlMode:2,isDebug:!0,fullscreen:{hideMenu:!0,enabled:!0},hotspots:!0,hotspotFocus:!0,configStringBase:16,gestureHandling:{mode:"cooperative",container:document.getElementById("gesture-hinter"),enabledZoom:!0,enabledRotate:!0,enabledZoomFullscreen:!0,enabledRotateFullscreen:!0,enabledZoomRotate:!0,hinterMessageZoom:"Use ctrl + scroll to zoom",hinterMessageTouch:"Use two fingers to look around",rotationScalar:500,touchZoomDelta:25},remote:!1,screenshot:{format:"jpeg",quality:.85},colourClear:[1,1,1],colourBackground:[.917,.914,.894],colourBackgroundInitialDetail:[.702,.631,.415]};class Bt{constructor(t={}){this.viewerElName="onfigr",this.create(t);const e=new CustomEvent("viewer-loaded",{});this.container.dispatchEvent(e)}create(t){const e=document.querySelectorAll(this.viewerElName);if(0===e.length)throw new Error(`The configurator couldn't locate a DOM element named <${this.viewerElName}>. Stopping initialisation.`);if(e.length>1)throw new Error(`Multiple <${this.viewerElName}> elements found in page. Stopping initialisation.`);this.container=e[0];let i=Bt.updateDefaults(t);return i.configuratorElement=this.container,i=this.setUserAttributes(i),this.Configurator=new Ut(i),new MutationObserver(this.loadAttributeChange.bind(this)).observe(this.container,{attributes:!0,childList:!1,subtree:!1}),Object.defineProperty(this.container,"getAttribute",{value:t=>"config"===t?this.Configurator.buildConfigString():"screenshot"===t?this.Configurator.getScreenshot():window.HTMLElement.prototype.getAttribute.call(this.container,t),configurable:!0}),Object.defineProperty(this.container,"buildConfigString",{value:()=>this.Configurator.buildConfigString(),configurable:!0}),Object.defineProperty(this.container,"setConfiguration",{value:t=>{this.Configurator.setConfiguration(t)},configurable:!0}),Object.defineProperty(this.container,"getActiveElements",{value:()=>this.Configurator.getActiveElements(),configurable:!0}),Object.defineProperty(this.container,"api",{value:this.Configurator,configurable:!0}),this.Configurator}setUserAttributes(t){const e=t;e.settings={},e.configuratorElement=this.container;const i=this.container.getAttribute("config");if(null!==i&&0!==i.length&&(e.config=i),null===this.container.getAttribute("image-src"))throw new Error(`Missing 'image-src' attribute of <${this.viewerElName}>.`);if(e.settings.DYNAMIC_BASE_URL=this.container.getAttribute("image-src"),null!==this.container.getAttribute("gesture-handling")&&(e.gestureHandling.mode=this.container.getAttribute("gesture-handling")),null!==this.container.getAttribute("base-path")&&(e.settings.BASE_PATH=this.container.getAttribute("base-path")),null===this.container.getAttribute("asset-src"))throw new Error(`Missing 'asset-src' attribute of <${this.viewerElName}>.`);if(e.settings.STATIC_BASE_URL=this.container.getAttribute("asset-src"),null===this.container.getAttribute("scene"))throw new Error(`Missing 'scene' attribute of <${this.viewerElName}>.`);if(e.scene=this.container.getAttribute("scene"),null===this.container.getAttribute("version"))throw new Error(`Missing 'version' attribute of <${this.viewerElName}>.`);return e.settings.DYNAMIC_VERSION=this.container.getAttribute("version"),null!==this.container.getAttribute("url-update")&&(e.updateBrowserUrl=this.container.getAttribute("url-update")),null!==this.container.getAttribute("data-filename")?e.settings.DYNAMIC_DATA_FILENAME=this.container.getAttribute("data-filename"):void 0===e.settings.DYNAMIC_DATA_FILENAME&&(e.settings.DYNAMIC_DATA_FILENAME="liveDataExport"),e}static updateDefaults(t){return{...Ft,...t}}loadAttributeChange(t){for(const e of t){if("attributes"===e.type&&"config"===e.attributeName){const t=window.HTMLElement.prototype.getAttribute.call(this.container,"config");this.Configurator.setConfiguration(t)}if("attributes"===e.type&&"scene"===e.attributeName){const t=window.HTMLElement.prototype.getAttribute.call(this.container,"scene");this.Configurator.setScene(t)}if("attributes"===e.type&&"base-path"===e.attributeName){const t=window.HTMLElement.prototype.getAttribute.call(this.container,"base-path");this.Configurator.setBasePath(t)}}}}var Gt=Bt,Ht=(i(9826),i(1817),i(6699),i(7042),i(1038),i(8783),i(4916),i(2165),i(6992),i(3948),function(){function t(t,e,i){var n=this;this.mainContainer=t,this.HOLDER=e,this.CONTAINER=document.createElement("div"),this.CONTAINER.className="menu-bar__container active",this.API=i,this.BACK_BUTTON=document.createElement("div"),this.BACK_BUTTON.classList.add("back_btn"),this.BACK_BUTTON.onclick=function(t){n.mainContainer.dispatchEvent(new CustomEvent("nav-back"))},this.RESET_BUTTON=document.createElement("div"),this.RESET_BUTTON.classList.add("reset_btn"),this.RESET_BUTTON.onclick=function(t){n.mainContainer.dispatchEvent(new CustomEvent("refresh-config"))},this.MENU_CONTAINER=document.createElement("div"),this.MENU_CONTAINER.classList.add("menu-container"),this.CONTAINER.appendChild(this.BACK_BUTTON),this.CONTAINER.appendChild(this.RESET_BUTTON),this.CONTAINER.appendChild(this.MENU_CONTAINER),this.HOLDER.appendChild(this.CONTAINER),this.ITEMS=[]}var e=t.prototype;return e.reset=function(){void 0!==this.MENU_CONTAINER&&this.MENU_CONTAINER.replaceChildren()},e.updateLayers=function(t){var e=this,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.reset();var n=document.createDocumentFragment();i?i.forEach((function(r,o){var s;if(r.nested_layers)s=e.createMenuItem({name:r.name,type:"pallets",thumbnail:r.thumbnail,isNested:!0},o,!0),e.ITEMS.push(s),e.UI_LAYERS=i;else{var a=t.findIndex((function(t){return r.layer_name===t.name}));if(a<0)return;s=e.createMenuItem({name:r.name,type:t[a].type,thumbnail:r.thumbnail},a),e.ITEMS.push(s)}n.appendChild(s)})):t.forEach((function(t,i){var r=e.createMenuItem(t,i);n.appendChild(r),e.ITEMS.push(r)})),this.MENU_CONTAINER.appendChild(n)},e.activateLayer=function(t){this.mainContainer.dispatchEvent(new CustomEvent("activate-layer",{detail:{layerIndex:t,isNested:!1}}))},e.activateNestedLayer=function(t){this.mainContainer.dispatchEvent(new CustomEvent("activate-layer",{detail:{layerIndex:t,isNested:!0,nestedLayers:this.UI_LAYERS[t].nested_layers}}))},e.createMenuItem=function(t,e){var i=this,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if("hidden"!==t.type){var r=document.createElement("div");r.className="menu-bar__option";var o=document.createElement("p");if(o.innerText=t.name,r.dataset.name=t.name.toLowerCase(),r.appendChild(o),t.thumbnail){var s=document.createElement("img");s.src="./image/".concat(t.thumbnail),r.appendChild(s)}return r.addEventListener("click",(function(t){i.ITEMS.forEach((function(t){t.classList.remove("active"),t.classList.add("add-opacity")})),r.classList.add("active"),r.classList.remove("add-opacity"),n?i.activateNestedLayer(e,n):i.activateLayer(e)})),r}},e.manualClick=function(t){this.ITEMS.forEach((function(e){e.dataset.name===t&&(console.log("open panel: ",t),e.click())}))},e.onMenuClose=function(){this.ITEMS.forEach((function(t){t.classList.remove("active"),t.classList.remove("add-opacity")}))},e.showResetButton=function(){this.RESET_BUTTON.classList.add("active")},e.hideResetButton=function(){this.RESET_BUTTON.classList.remove("active")},e.setActiveItemAsEdited=function(){this.ITEMS.forEach((function(t){t.classList.contains("active")&&t.classList.add("edited")}))},e.clearEdited=function(){this.ITEMS.forEach((function(t){t.classList.remove("edited")}))},e.hide=function(){this.CONTAINER.classList.remove("active")},e.show=function(){this.CONTAINER.classList.add("active")},t}()),kt=(i(2023),i(5306),i(7207),function(){function t(t,e,i,n,r){var o=this;this.HOLDER=i,this.PARENT=t,this.NAME=e,this.ITEMS=n,this.CONTAINER=document.createElement("div"),this.CONTAINER.classList.add("drop-down"),this.SELECTED=document.createElement("div"),this.SELECTED.classList.add("drop-down___selected");var s=document.createElement("p");s.classList.add("drop-down___name"),s.innerText=e,this.CURRENT_VALUE=document.createElement("p"),this.CURRENT_VALUE.classList.add("drop-down___value"),this.SELECTED.appendChild(s),this.SELECTED.appendChild(this.CURRENT_VALUE),this.OPTIONS=document.createElement("div"),this.OPTIONS.classList.add("drop-down___options"),this.CONTAINER.appendChild(this.SELECTED),this.CONTAINER.appendChild(this.OPTIONS),this.HOLDER.appendChild(this.CONTAINER),this.optionsActive=!1,this.SELECTED.onclick=function(t){t.stopPropagation(),o.optionsActive?o.hideOptions():o.showOptions()},this.SELECTED_INDEX=r,this.RADIO_BUTTONS=[],this.buildOptions(),null==r&&(r=n[0]),this.setSelected(r),this.INDEX=null}var e=t.prototype;return e.clearOptions=function(){void 0!==this.OPTIONS&&this.OPTIONS.replaceChildren()},e.changeOptions=function(t){this.OPTIONS_EL.forEach((function(e){t.includes(e.dataset.option)?e.classList.remove("disable"):e.classList.add("disable")}))},e.buildOptions=function(){var t=this;this.clearOptions(),this.OPTIONS_EL=[];for(var e=function(e){var i,n=document.createElement("div");n.classList.add("drop-down___option"),n.dataset.option=t.ITEMS[e],n.dataset.type=t.NAME.toLowerCase();var r=document.createElement("input");r.type="radio",r.dataset.option=t.ITEMS[e],t.RADIO_BUTTONS.push(r),t.ITEMS[e]==t.SELECTED_INDEX&&(r.checked=!0);var o=document.createElement("p");o.innerText=null===(i=t.ITEMS[e])||void 0===i?void 0:i.replaceAll("inch",'"'),n.appendChild(r),n.appendChild(o),t.OPTIONS.appendChild(n),t.OPTIONS_EL.push(n),n.onclick=function(i){i.stopPropagation(),t.setSelected(t.ITEMS[e]),t.RADIO_BUTTONS.forEach((function(t){t.checked=!1})),r.checked=!0}},i=0;i<this.ITEMS.length;i++)e(i)},e.changeSelected=function(t){this.setSelected(t),this.RADIO_BUTTONS.forEach((function(e){e.dataset.option===t?e.checked=!0:e.checked=!1}))},e.setSelected=function(t){void 0!==t&&(this.SELECTED_INDEX=t,this.CURRENT_VALUE.innerText=t.replaceAll("inch",'"'),this.hideOptions())},e.setIndex=function(t){this.INDEX=t},e.showOptions=function(){this.OPTIONS.classList.add("active"),this.CONTAINER.classList.add("active"),this.optionsActive=!0,null!==this.INDEX&&this.PARENT.optionsOpened(this.INDEX)},e.hideOptions=function(){this.CONTAINER.classList.remove("active"),this.OPTIONS.classList.remove("active"),this.optionsActive=!1},t}()),Yt=function(){function t(t,e,i,n){this.HOLDER=t,this.itemData=e,this.build(e,i,n)}var e=t.prototype;return e.build=function(t,e,i){t.disabled&&console.warn("Active item is disabled"),this.CONTAINER=document.createElement("div"),this.CONTAINER.className="menu-item",this.CONTAINER.dataset.index=e,t.hidden&&this.CONTAINER.classList.add("hidden"),this.HOLDER.appendChild(this.CONTAINER),this.createItemHeader();var n=document.createElement("p");n.className="menu-item__name",n.innerText=t.attributes.name;var r=document.createElement("p");r.className="menu-item__price",void 0!==t.attributes.price?r.innerText="$".concat(t.attributes.price):r.innerText="Missing";var o=document.createElement("img");if(o.className="menu-item__thumb",o.src=t.attributes.thumbnail,this.CONTAINER.appendChild(o),this.CONTAINER.appendChild(n),this.CONTAINER.appendChild(r),t.get("unavailable")){this.CONTAINER.classList.add("unavailable");var s=document.createElement("p");s.className="unavailable-text",s.innerText="Currently unavailable",this.CONTAINER.appendChild(s)}t.active&&this.setActive(!0)},e.setActive=function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];t?(this.CONTAINER.classList.add("active"),this.active=!0):(this.CONTAINER.classList.remove("active"),this.active=!1)},e.createItemHeader=function(){var t=document.createElement("div");t.classList.add("item-header__container");var e=document.createElement("div");e.classList.add("selected_indicator"),t.appendChild(e),this.CONTAINER.appendChild(t)},e.createColorSelector=function(t){var e=document.createElement("div");e.className="colour-selector__container",this.CONTAINER.appendChild(e);var i=document.createElement("div");i.className="colour-thumb__container",e.appendChild(i);var n=document.createDocumentFragment();t.forEach((function(t){var e,i=document.createElement("div");i.className="colour__thumb active",t.rgb?(e=document.createElement("div")).style.backgroundColor="".concat(t.rgb):(e=document.createElement("img")).src=t.thumbnail,i.appendChild(e),n.appendChild(i)})),i.appendChild(n);var r=document.createElement("p");r.className="colour__selected",r.innerText=t[0].name,e.appendChild(r)},e.getItemData=function(){return this.itemData},t}(),Xt=function(){function t(t,e,i,n){this.MENU=t,this.ITEM_CONTAINER=document.createElement("div"),this.ITEM_CONTAINER.className="item__container",this.createFilter(e),e.appendChild(this.ITEM_CONTAINER),this.selectedIndex=0,this.selectedItem=null,this.build(i,n)}var e=t.prototype;return e.build=function(t,e){var i,n=this,r=document.createDocumentFragment(),o=[];t.forEach((function(t,s){if((!t.disabled||t.active)&&"Blank"!==t.attributes.name){var a=new Yt(r,t,s,e);o.push(a),a.CONTAINER.addEventListener("click",(function(t){n.setItemActive(a.CONTAINER.dataset.index),n.selectedIndex!=a.CONTAINER.dataset.index&&n.MENU.showSelectMenu()})),t.active&&(i=a,n.selectedIndex=s,n.MENU.setPreviousItem(t))}})),this.ITEM_CONTAINER.appendChild(r),this.ITEMS=o,this.ITEM_CONTAINER.prepend(i.CONTAINER);var s=this.createDecisionPanel();this.ITEM_CONTAINER.appendChild(s)},e.createFilter=function(t){var e=document.createElement("div");e.className="filter__container",this.itemCount=document.createElement("p"),this.itemCount.className="item__count",this.filterButton=document.createElement("div"),this.filterButton.className="filter__button";var i=document.createElement("div");i.className="filter__icon";var n=document.createElement("p");n.className="filter__text",n.innerText="Filter",this.filterButton.appendChild(i),this.filterButton.appendChild(n),e.appendChild(this.itemCount),e.appendChild(this.filterButton),t.appendChild(e)},e.createDecisionPanel=function(){var t=this,e=document.createElement("div");e.className="decision_panel__container";var i=document.createElement("div");i.className="decision__heaading",i.innerText="Don't see anything you love?";var n=document.createElement("p");n.className="decision__text",n.innerText="Work directly with a Made designer to make updates to your chosen Design Package.";var r=document.createElement("button");return r.className="button transparent",r.innerText="Talk to our design Team",r.onclick=function(){t.MENU.HOLDER.dispatchEvent(new CustomEvent("design-team"))},e.appendChild(i),e.appendChild(n),e.appendChild(r),e},e.setItemActive=function(t){var e=this;this.ITEMS.forEach((function(i){i.CONTAINER.dataset.index===t?(e.setActiveMenuEdit(),i.setActive(!0)):i.setActive(!1)}))},e.setActiveMenuEdit=function(){this.MENU.setActiveMenuEdit()},e.setProductInfo=function(t){this.MENU.setProductInfo(t)},t}(),$t=(i(189),i(1249),i(1532),i(2222),function(){function t(t,e,i,n){this.HOLDER=t,this.build(e,i,n),this.COLOUR_EL=[],this.DROP_DOWN={},this.thumbUrl}var e=t.prototype;return e.build=function(t,e,i){if(!t.disabled&&"Blank"!==t.attributes.name){this.CONTAINER=document.createElement("div"),this.CONTAINER.className="menu-item",this.CONTAINER.dataset.index=e,t.hidden&&this.CONTAINER.classList.add("hidden"),this.HOLDER.appendChild(this.CONTAINER),this.createItemHeader();var n=document.createElement("p");n.className="menu-item__name",n.innerText=t.attributes.name;var r=document.createElement("p");if(r.className="menu-item__price",void 0!==t.attributes.price?r.innerText="$".concat(t.attributes.price):r.innerText="$ Missing",this.thumbnail=document.createElement("img"),this.thumbnail.className="menu-item__thumb",this.thumbnail.src=t.attributes.thumbnail,this.CONTAINER.appendChild(this.thumbnail),this.CONTAINER.appendChild(n),this.CONTAINER.appendChild(r),t.get("unavailable")){this.CONTAINER.classList.add("unavailable");var o=document.createElement("p");o.className="unavailable-text",o.innerText="Unavailable",this.CONTAINER.appendChild(o)}this.thumbUrl=t.attributes.thumbnail.substr(0,t.attributes.thumbnail.lastIndexOf("/")),t.active&&this.setActive(!0)}},e.createDropdown=function(t,e,i,n){this.dropDownContainer||(this.dropDownContainer=document.createElement("div"),this.dropDownContainer.classList.add("dropdown-container"),this.CONTAINER.appendChild(this.dropDownContainer)),this.DROP_DOWN[i]={};var r="type"===i?"placement":i;return this.DROP_DOWN[i]=new kt(this,r,this.dropDownContainer,t,e),this.DROP_DOWN[i].setIndex(n),this.DROP_DOWN[i]},e.optionsOpened=function(t){var e=0;for(var i in this.DROP_DOWN)e!==t&&this.DROP_DOWN[i].hideOptions(),e++},e.setActive=function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];t?(this.CONTAINER.classList.add("active"),this.active=!0):(this.CONTAINER.classList.remove("active"),this.active=!1)},e.createItemHeader=function(){var t=document.createElement("div");t.classList.add("item-header__container");var e=document.createElement("div");e.classList.add("selected_indicator"),t.appendChild(e),this.CONTAINER.appendChild(t)},e.createColorSelector=function(t,e){var i=this,n=document.createElement("div");n.className="colour-selector__container",this.CONTAINER.appendChild(n);var r=document.createElement("div");r.className="colour-thumb__container",n.appendChild(r);var o=document.createDocumentFragment(),s=document.createElement("p");s.className="colour__selected",s.innerText=e,t.forEach((function(t){var n,r=document.createElement("div");r.className="colour__thumb",r.dataset.colour=t.colour,t.colour===e&&r.classList.add("active"),null!==t.rgb?(n=document.createElement("div")).style.backgroundColor="rgb(".concat(t.rgb,")"):(n=document.createElement("img")).src="".concat(i.thumbUrl,"/").concat(t.colour,".png"),r.appendChild(n),o.appendChild(r),i.COLOUR_EL.push(r),r.onclick=function(){i.COLOUR_EL.forEach((function(t){t.classList.remove("active")})),r.classList.add("active"),s.innerText=t.colour}})),r.appendChild(o),n.appendChild(s)},t}());function Vt(t){return function(t){if(Array.isArray(t))return jt(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return jt(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?jt(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function jt(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function zt(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function Wt(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?zt(Object(i),!0).forEach((function(e){Zt(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):zt(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function Zt(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var qt=function(){function t(t,e,i,n){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;this.MENU=t,this.ITEM_CONTAINER=document.createElement("div"),this.ITEM_CONTAINER.className="item__container",this.parentIndex=r,this.createFilter(e),e.appendChild(this.ITEM_CONTAINER),this.groupedItems={},this.dropdownSettings={},this.build(i,n),this.updateCount()}var e=t.prototype;return e.createFilter=function(t){var e=document.createElement("div");e.className="filter__container",this.itemCount=document.createElement("p"),this.itemCount.className="item__count",this.filterButton=document.createElement("div"),this.filterButton.className="filter__button";var i=document.createElement("div");i.className="filter__icon";var n=document.createElement("p");n.className="filter__text",n.innerText="Filter",this.filterButton.appendChild(i),this.filterButton.appendChild(n),e.appendChild(this.itemCount),e.appendChild(this.filterButton),t.appendChild(e)},e.updateCount=function(){this.itemCount.innerText="".concat(this.ITEM_CONTAINER.getElementsByClassName("menu-item").length," items")},e.build=function(t,e){var i=this,n=document.createDocumentFragment(),r=[],o=this.groupedItems;t.forEach((function(t,i){var n=t.get("name");if(null==o[n]&&(o[n]=[]),!t.disabled&&!1!==t.visibility&&"blank"!==n){var r=t.getCustomAttributes();"wallpaper"===e.toLowerCase()&&"wp"!==r.type||"tile"===e.toLowerCase()&&"fwt"!==r.type&&"hwt"!==r.type&&"swt"!==r.type||("fwt"===r.type?r.type="Full Wall Tile":"hwt"===r.type?r.type="Half Wall Tile":"swt"===r.type&&(r.type="Split Wall Tile"),"mirrors"===e.toLowerCase()&&"mr"!==r.type||"medicine cabinets"===e.toLowerCase()&&"mc"!==r.type||o[t.attributes.name].push(Wt(Wt({item:t},r),{},{index:i})))}}));var s=function(t){if(0===o[t].length)return"continue";var s=o[t].find((function(t){return!0===t.item.active}));void 0===s?s=o[t][0]:(i.set=s,i.activeItem=s,i.MENU.setPreviousItem(s.item));var a=Vt(new Set(o[t].map((function(t){return{colour:t.colour,rgb:t.item.attributes.rgb}})))),c=Vt(new Map(a.map((function(t){return[t.colour,t]}))).values()),l={};for(var h in o[t][0])if("index"!==h&&"item"!==h&&"colour"!==h){var u=void 0;"size"===h?(u=Vt(new Set(o[t].reduce((function(t,e){return void 0!==e.size&&t.push(e.size),t}),[]))),i.activeItem&&(i.dropdownSettings[h]=i.activeItem.size)):"placement"===h?(u=Vt(new Set(o[t].reduce((function(t,e){return void 0!==e.placement&&t.push(e.placement),t}),[]))),i.activeItem&&(i.dropdownSettings[h]=i.activeItem.placement)):"type"===h?"Full Wall Tile"!==o[t][0].type&&"Half Wall Tile"!==o[t][0].type||(u=Vt(new Set(o[t].reduce((function(t,e){return void 0!==e.type&&t.push(e.type),t}),[])))):"pattern"===h&&(u=Vt(new Set(o[t].reduce((function(t,e){return void 0!==e.pattern&&t.push(e.pattern),t}),[])))),l[h]=u}if(l.placement){var d=l.placement;delete l.placement,l.placement=d}var p=new $t(n,s.item,s.index,e);p.CONTAINER.addEventListener("click",(function(e){e.stopPropagation(),i.ITEMS.forEach((function(t){return t.setActive(!1)})),p.setActive(),i.MENU.showSelectMenu(),i.setActiveMenuEdit();var n=i.findItem(t,p.colourSelected,p);console.log(n.item.layer),n.item.setActive(),i.triggerItemSelected(n.item.layer),p.thumbnail.src=n.item.attributes.thumbnail})),r.push(p),i.set&&(i.set=!1,n.prepend(p.CONTAINER)),p.createColorSelector(c,s.colour),p.colourSelected=s.colour,p.COLOUR_EL.forEach((function(e){e.addEventListener("click",(function(n){n.stopPropagation();var r=i.findItem(t,e.dataset.colour,p);r.item.setActive(),i.MENU.showSelectMenu(),i.triggerItemSelected(r.item.layer),p.colourSelected=e.dataset.colour,p.thumbnail.src=r.item.attributes.thumbnail}))})),p.dropdownSettings={},p.dropdownOptions=l;var m=0;for(var f in p.dropdownOptions){var E=p.dropdownOptions[f];if(p.dropdownSettings[f]=s[f],i.activeItem&&(i.dropdownSettings[f]=i.activeItem[f]),E&&E.length>1){var g=void 0;g=i.activeItem?p.createDropdown(E,i.activeItem[f],f,m):p.createDropdown(E,s[f],f,m),m++,g.OPTIONS_EL.forEach((function(e){e.addEventListener("click",(function(n){n.stopPropagation(),p.dropdownSettings[e.dataset.type]=e.dataset.option,i.dropdownSettings[e.dataset.type]=e.dataset.option;var r=i.findItem(t,p.colourSelected,p);r.item.setActive(),i.MENU.showSelectMenu(),i.triggerItemSelected(r.item.layer),p.dropdowmSelected=e.dataset.option,p.thumbnail.src=r.item.get("thumbnail")}))})),p.dropdownSettings[f]=s[f]}}};for(var a in o)s(a);this.ITEM_CONTAINER.appendChild(n),this.ITEMS=r;var c=this.createDecisionPanel();this.ITEM_CONTAINER.appendChild(c)},e.setNested=function(){this.NESTED=!0},e.createDecisionPanel=function(){var t=this,e=document.createElement("div");e.className="decision_panel__container";var i=document.createElement("div");i.className="decision__heaading",i.innerText="Don't see anything you love?";var n=document.createElement("p");n.className="decision__text",n.innerText="Work directly with a Made designer to make updates to your chosen Design Package.";var r=document.createElement("button");return r.className="button transparent",r.innerText="Talk to our design Team",r.onclick=function(){t.NESTED?t.MENU.MENU.HOLDER.dispatchEvent(new CustomEvent("design-team")):t.MENU.HOLDER.dispatchEvent(new CustomEvent("design-team"))},e.appendChild(i),e.appendChild(n),e.appendChild(r),e},e.setItemActive=function(t){this.ITEMS.forEach((function(e){e.CONTAINER.dataset.index===t?e.setActive(!0):e.setActive(!1)}))},e.setActiveMenuEdit=function(){this.NESTED?this.MENU.MENU.setActiveMenuEdit():this.MENU.setActiveMenuEdit()},e.prependSelectedItem=function(){var t=this.ITEMS.find((function(t){return t.active}));t&&this.ITEM_CONTAINER.prepend(t.CONTAINER)},e.setProductInfo=function(t){this.MENU.setProductInfo(t)},e.triggerItemSelected=function(t){document.getElementsByTagName("onfigr")[0].dispatchEvent(new CustomEvent("item-selected",{detail:{itemLayer:t}}))},e.findItem=function(t,e,i){var n,r,o=this,s=this.groupedItems;return i.dropdownSettings.hasOwnProperty("size")&&i.dropdownSettings.hasOwnProperty("placement")&&i.dropdownSettings.hasOwnProperty("pattern")?(n=s[t].find((function(t){return t.colour===e&&t.size===o.dropdownSettings.size&&t.type===o.dropdownSettings.placement&&t.pattern===i.dropdownSettings.pattern})),this.setDropdown(i,"size",this.dropdownSettings.size),r=!0,void 0===n&&(r=!1,void 0===(n=s[t].find((function(t){return t.colour===e&&t.size===i.dropdownSettings.size&&t.type===i.dropdownSettings.placement&&t.pattern===i.dropdownSettings.pattern})))&&(n=s[t].find((function(t){return t.colour===e&&t.size==i.dropdownSettings.size})),r=!1),this.setDropdown(i,"size",i.dropdownSettings.size)),this.refreshDropdown(i,s[t],r)):i.dropdownSettings.hasOwnProperty("size")&&i.dropdownSettings.hasOwnProperty("pattern")?(n=s[t].find((function(t){return t.colour===e&&t.size==o.dropdownSettings.size&&t.pattern==i.dropdownSettings.pattern})),this.setDropdown(i,"size",this.dropdownSettings.size),r=!0,void 0===n&&(r=!1,void 0===(n=s[t].find((function(t){return t.colour===e&&t.size==i.dropdownSettings.size&&t.pattern==i.dropdownSettings.pattern})))&&(n=s[t].find((function(t){return t.colour===e&&t.size==i.dropdownSettings.size})),r=!1),this.setDropdown(i,"size",i.dropdownSettings.size)),this.refreshDropdown(i,s[t],r)):i.dropdownSettings.hasOwnProperty("size")?(n=s[t].find((function(t){return t.colour===e&&t.size===o.dropdownSettings.size})),this.setDropdown(i,"size",this.dropdownSettings.size),void 0===n&&(n=s[t].find((function(t){return t.colour===e&&t.size===i.dropdownSettings.size})),this.setDropdown(i,"size",i.dropdownSettings.size))):i.dropdownSettings.hasOwnProperty("placement")?(n=s[t].find((function(t){return t.colour===e&&t.placement===o.dropdownSettings.placement})),this.setDropdown(i,"placement",this.dropdownSettings.placement),void 0===n&&(n=s[t].find((function(t){return t.colour===e&&t.placement==i.dropdownSettings.placement})),this.setDropdown(i,"placement",i.dropdownSettings.placement))):n=s[t].find((function(t){return t.colour===e})),n},e.setDropdown=function(t,e,i){t.DROP_DOWN[e]&&t.DROP_DOWN[e].changeSelected(i)},e.refreshDropdown=function(t,e){var i=this,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=e.filter((function(e){return n?e.size===i.dropdownSettings.size:e.size===t.dropdownSettings.size})),o=Vt(new Set(r.map((function(t){return t.pattern})))),s=Vt(new Set(r.map((function(t){return t.type}))));t.DROP_DOWN.pattern&&(t.DROP_DOWN.pattern.changeOptions(o),this.setDropdown(t,"pattern",o.includes(this.dropdownSettings.pattern)?this.dropdownSettings.pattern:o[0])),t.DROP_DOWN.placement&&(t.DROP_DOWN.placement.changeOptions(s),this.setDropdown(t,"placement",s.includes(this.dropdownSettings.placement)?this.dropdownSettings.placement:s[0]))},t}(),Qt=function(){function t(t,e,i,n,r){this.MENU=t,this.API=e,this.NESTED_CONTAINER=document.createElement("div"),this.NESTED_CONTAINER.className="nested-menu__container",i.appendChild(this.NESTED_CONTAINER),this.tabs=[],this.tabContainer=document.createElement("div"),this.tabContainer.className="tab__container",this.NESTED_CONTAINER.appendChild(this.tabContainer),this.createFilter(this.NESTED_CONTAINER),this.itemContainer=document.createElement("div"),this.itemContainer.className="item__container",this.NESTED_CONTAINER.appendChild(this.itemContainer),this.layerOptions=[],this.layers=[],this.groupedLayers=[],this.selectedNestedItems=[],this.selectedItem=null,this.activeItem=null,this.selectedLayer=r,this.build(n),this.updateCount()}var e=t.prototype;return e.createFilter=function(t){this.filterContainer=document.createElement("div"),this.filterContainer.className="filter__container",this.itemCount=document.createElement("p"),this.itemCount.className="item__count",this.filterButton=document.createElement("div"),this.filterButton.className="filter__button";var e=document.createElement("div");e.className="filter__icon";var i=document.createElement("p");i.className="filter__text",i.innerText="Filter",this.filterButton.appendChild(e),this.filterButton.appendChild(i),this.filterContainer.appendChild(this.itemCount),this.filterContainer.appendChild(this.filterButton),t.appendChild(this.filterContainer)},e.updateCount=function(){this.itemCount.innerText="".concat(this.itemContainer.getElementsByClassName("menu-item").length," items")},e.build=function(t){var e=this;this.layers=[],this.tabs=[],this.tabContainer.innerHTML="",this.layerOptions=t,this.selectedLayer||(this.selectedLayer=t[0].layerName),t.forEach((function(t,i){var n=e.createTab(t.layerName,i);if("Wallpaper"===e.selectedLayer||"Mirrors"===e.selectedLayer){var r=t.items.find((function(t){return t.active}));if(r){var o=r.get("type");"Mirrors"===t.layerName&&"mr"===o||"Medicine Cabinets"===t.layerName&&"mc"===o||"Wallpaper"===t.layerName&&"wp"===o?(n.classList.add("active"),e.activeItem=i):"Tile"!==t.layerName||"hwt"!==o&&"fwt"!==o&&"swt"!==o||(n.classList.add("active"),e.activeItem=i)}}else e.selectedLayer!==t.name&&e.selectedLayer!==t.layerName||(n.classList.add("active"),e.activeItem=i);n.addEventListener("click",e.tabClick.bind(e,i))})),this.buildItems(this.activeItem)},e.buildItems=function(t){var e=this,i=this.layerOptions[t];if(this.layers=[],this.itemContainer.innerHTML="",this.API.panoViewer.setRotationTarget(i.hotspot.x,i.hotspot.y),"grouped"===i.layerType){this.hideFilter();var n=new qt(this,this.itemContainer,i.items,i.layerName,t);return n.setNested(),void this.groupedLayers.push({id:t,groupedMenu:n})}this.showFilter();var r,o=document.createDocumentFragment(),s=[];i.items.forEach((function(n,a){if(!n.disabled&&"Blank"!==n.attributes.name){var c=new Yt(o,n,a,i.layerName);c.CONTAINER.addEventListener("click",(function(i){e.setItemActive(t,c.CONTAINER.dataset.index),n.setActive(!0),e.MENU.showSelectMenu(),r=c})),c.active&&(r=c,e.selectedItem=c,e.selectedNestedItems.push({layerIndex:i.layerIndex,index:a}),e.MENU.setPreviousItem(n)),s.push(c)}})),this.itemContainer.appendChild(o),r&&this.itemContainer.prepend(r.CONTAINER),this.layers.push({items:s,layerIndex:i.layerIndex});var a=this.createDecisionPanel();this.itemContainer.appendChild(a)},e.hideFilter=function(){this.filterContainer.classList.add("hidden")},e.showFilter=function(){this.filterContainer.classList.remove("hidden")},e.createTab=function(t,e){var i=document.createElement("div");return i.className="tab",i.innerText=t,this.tabContainer.appendChild(i),this.tabs.push(i),i},e.createDecisionPanel=function(){var t=this,e=document.createElement("div");e.className="decision_panel__container";var i=document.createElement("div");i.className="decision__heaading",i.innerText="Need help?";var n=document.createElement("p");n.className="decision__text",n.innerText="Work directly with a Made designer to make updates to your chosen Design Package.";var r=document.createElement("button");return r.className="button transparent",r.innerText="Talk to our design team",r.onclick=function(){t.MENU.HOLDER.dispatchEvent(new CustomEvent("design-team"))},e.appendChild(i),e.appendChild(n),e.appendChild(r),e},e.setItemActive=function(t,e){var i=this;this.layers[t].items.forEach((function(t){t.CONTAINER.dataset.index===e?(t.setActive(!0),i.setActiveMenuEdit()):t.setActive(!1)}))},e.setActiveMenuEdit=function(){this.MENU.setActiveMenuEdit()},e.setProductInfo=function(t){this.MENU.setProductInfo(t)},e.showSelectMenu=function(){this.MENU.showSelectMenu()},e.createHeader=function(t,e){var i=document.createElement("div");i.className="nested-header__container ".concat(e.toLowerCase());var n=document.createElement("h2");n.innerText=e;var r=document.createElement("p");return t.appendChild(i),i.appendChild(n),i.appendChild(r),{container:i,selected:r}},e.tabClick=function(t){this.buildItems(t),this.tabs.forEach((function(t){t.classList.remove("active")})),this.tabs[t].classList.add("active")},e.setPreviousItem=function(t){this.MENU.setPreviousItem(t)},t}(),Kt=function(){function t(t,e,i){this.mainContainer=t,this.HOLDER=e,this.API=i,this.CONTAINER=document.createElement("div"),this.CONTAINER.className="menu__container",this.HOLDER.appendChild(this.CONTAINER),this.prevousItem=null,this.previousItemIndex=0,this.layerIndex=0,this.currentPricing="$0"}var e=t.prototype;return e.updatePrice=function(t,e){this.currentPricing=t,this.leadTime=e,void 0!==this.PRICE&&(this.PRICE.innerText=t),void 0!==this.SUMMARY_LEAD_TIME&&(this.SUMMARY_LEAD_TIME.innerText=e)},e.reset=function(){void 0!==this.CONTAINER&&(this.CONTAINER.replaceChildren(),this.CONTAINER.classList.remove("active"),this.createCancelHeader(this.CONTAINER),this.createBody(this.CONTAINER),this.createMenuHeader(this.BODY),this.createBottomBar())},e.create=function(t){var e=this,i=t.layerType,n=t.layerDescription,r=t.layerName,o=t.items,s=t.layerIndex;this.reset(),this.addMenuDetails(r,n),console.log("layerName",r),"grouped"===i?this.MENU=new qt(this,this.BODY,o,r):(this.MENU=new Xt(this,this.BODY,o,r),this.MENU.ITEMS.forEach((function(t){t.CONTAINER.addEventListener("click",(function(i){e.setItemActive(t.CONTAINER.dataset.index,s)}))})),this.MENU.ITEMS.forEach((function(t){t.CONTAINER.addEventListener("click",(function(i){e.setItemActive(t.CONTAINER.dataset.index,s)}))}))),this.layerIndex=s,this.show()},e.createNested=function(t){var e=this,i=(t.layerType,t.layerDescription),n=t.layerName,r=(t.items,t.layerIndex),o=t.nestedLayers,s=t.selectedLayer;this.reset(),this.addMenuDetails(n,i),this.MENU=new Qt(this,this.API,this.BODY,o,s),this.previousNestedItems=this.MENU.selectedNestedItems,this.layerIndex=r,this.MENU.layers.forEach((function(t){t.items.forEach((function(i){i.CONTAINER.addEventListener("click",(function(n){e.setItemActive(i.CONTAINER.dataset.index,t.layerIndex)}))}))})),this.show()},e.createCancelHeader=function(t){this.SUB_HEADER=document.createElement("p");var e=document.createElement("div");this.CANCEL_HEADER=document.createElement("div"),this.CANCEL_HEADER.className="menu__canel-header",this.CANCEL_HEADER.appendChild(this.SUB_HEADER),this.CANCEL_HEADER.appendChild(e),e.onclick=this.hide.bind(this),t.appendChild(this.CANCEL_HEADER)},e.createMenuHeader=function(t){this.HEADER=document.createElement("div"),this.HEADER.className="menu__header",t.appendChild(this.HEADER)},e.createBody=function(t){this.BODY=document.createElement("div"),this.BODY.className="menu__body",this.BODY.addEventListener("scroll",this.scrollAnimation.bind(this)),t.appendChild(this.BODY)},e.createBottomBar=function(){var t=this;this.BOTTOM_BAR=document.createElement("div"),this.BOTTOM_BAR.className="menu__bottom-bar";var e=document.createElement("div");e.className="info_btn",e.onclick=function(){t.mainContainer.dispatchEvent(new CustomEvent("active-product-info"))};var i=document.createElement("div");i.className="menu__price-details";var n=document.createElement("p");n.className="menu__price_detail",n.innerText="Est. materials total",this.PRICE=document.createElement("p"),this.PRICE.className="menu__price_value",this.PRICE.innerText=this.currentPricing,i.appendChild(n),i.appendChild(this.PRICE);var r=document.createElement("div");r.className="menu__price-details";var o=document.createElement("p");o.className="menu__price_detail",o.innerText="Est. lead time",this.SUMMARY_LEAD_TIME=document.createElement("p"),this.SUMMARY_LEAD_TIME.class="menu__price_value",this.SUMMARY_LEAD_TIME.innerText=this.leadTime,r.appendChild(o),r.appendChild(this.SUMMARY_LEAD_TIME);var s=document.createElement("div");s.className="menu__buttons-container";var a=document.createElement("button");a.className="menu__button",a.innerText="Apply",a.onclick=this.onApplyClick.bind(this);var c=document.createElement("button");c.className="menu__button transparent",c.innerText="Cancel",c.onclick=this.cancel.bind(this),s.appendChild(a),s.appendChild(c),this.BOTTOM_BAR.appendChild(i),this.BOTTOM_BAR.appendChild(r),this.BOTTOM_BAR.appendChild(s),this.BOTTOM_BAR.appendChild(e),this.BODY.appendChild(this.BOTTOM_BAR)},e.addMenuDetails=function(t,e){var i=document.createElement("h1");i.className="menu__heading",i.innerText=t,this.SUB_HEADER.innerText=t;var n=document.createElement("p");n.className="menu__description",n.innerText=e,this.HEADER.appendChild(i),this.HEADER.appendChild(n)},e.setItemActive=function(t,e){this.API.layers[e].items[t].setActive(),this.mainContainer.dispatchEvent(new CustomEvent("item-selected",{detail:{itemLayer:this.API.layers[e],item:this.API.layers[e].items[t]}}))},e.setGroupedItemActive=function(t,e){},e.setProductInfo=function(t){this.mainContainer.dispatchEvent(new CustomEvent("active-product-info"))},e.scrollAnimation=function(t){t.target.scrollTop>25?this.CANCEL_HEADER.classList.add("scrolled"):this.CANCEL_HEADER.classList.remove("scrolled")},e.setActiveMenuEdit=function(){this.mainContainer.dispatchEvent(new CustomEvent("set-menu-edited",{}))},e.onApplyClick=function(){this.previousItem=null,this.hide()},e.show=function(){this.CONTAINER.classList.add("active")},e.hide=function(){this.CONTAINER.classList.remove("active"),null===this.previousItem||this.isMobile()?this.mainContainer.dispatchEvent(new CustomEvent("change-applied",{})):this.previousItem.setActive(!0),this.previousItem=null,this.mainContainer.dispatchEvent(new CustomEvent("menu-closed",{}))},e.isMobile=function(){return window.innerWidth<=600},e.setActiveItem=function(t){},e.setPreviousItem=function(t){console.log("setPreviousItem",t),this.previousItem=t},e.showSelectMenu=function(){this.BOTTOM_BAR.classList.add("active")},e.cancel=function(){console.log("cancel",this.previousItem),this.previousItem.setActive(!0),this.hide()},t}(),Jt=JSON.parse('{"Q":[{"name":"Vanity","layer_name":"Vanities","description":"One of the hardest-working pieces of furniture in your home, vanities offer exceptional storage and are the anchor for the overall style of the room.","thumbnail":"Vanity.svg","hotspot":{"x":0.81,"y":1.36},"layer_type":"grouped"},{"name":"Mirrors","layer_name":"Mirrors","description":"One of the hardest-working pieces of furniture in your home, vanities offer exceptional storage and are the anchor for the overall style of the room.","thumbnail":"Mirror.svg","hotspot":{"x":0.65,"y":1.82},"nested_layers":[{"name":"Mirrors","layer_name":"Mirrors","thumbnail":"","layer_type":"grouped","hotspot":{"x":0.65,"y":1.82}},{"name":"Medicine Cabinets","layer_name":"Mirrors","thumbnail":"","layer_type":"grouped","hotspot":{"show":false,"x":0.65,"y":1.82}}]},{"name":"Lighting","layer_name":"Wall_Lights","description":"One of the hardest-working pieces of furniture in your home, vanities offer exceptional storage and are the anchor for the overall style of the room.","thumbnail":"Lighting.svg","hotspot":{"x":0.87,"y":1.87},"layer_type":"grouped"},{"name":"Fixtures","thumbnail":"Fixture.svg","layer_name":"Shower Fixtures","description":"One of the hardest-working pieces of furniture in your home, vanities offer exceptional storage and are the anchor for the overall style of the room.","hotspot":{"x":0.77,"y":1.55},"nested_layers":[{"name":"Fixtures","layer_name":"Vanity_Faucets","thumbnail":"","layer_type":"grouped","hotspot":{"x":0.77,"y":1.55}}]},{"name":"Toilet","layer_name":"Toilets","description":"One of the hardest-working pieces of furniture in your home, vanities offer exceptional storage and are the anchor for the overall style of the room.","thumbnail":"Toilet.svg","hotspot":{"x":2.99,"y":1.21},"layer_type":"grouped"},{"name":"Tub","layer_name":"Tubs","description":"One of the hardest-working pieces of furniture in your home, vanities offer exceptional storage and are the anchor for the overall style of the room.","thumbnail":"Tub.svg","hotspot":{"x":1.58,"y":1.3},"layer_type":"grouped"},{"name":"Walls","thumbnail":"Walls.svg","layer_name":"Wall_Paint","description":"One of the hardest-working pieces of furniture in your home, vanities offer exceptional storage and are the anchor for the overall style of the room.","hotspot":{"x":0.9,"y":1.99},"nested_layers":[{"name":"Wall Paint","layer_name":"Wall_Paint","thumbnail":"","hotspot":{"x":1.26,"y":1.8}},{"name":"Wallpaper","layer_name":"Wallpaper","thumbnail":"","layer_type":"grouped","hotspot":{"x":0.9,"y":1.99}},{"name":"Tile","layer_name":"Wallpaper","thumbnail":"","layer_type":"grouped","hotspot":{"show":false,"x":0.9,"y":1.99}}]},{"name":"Floor","layer_name":"Floors","description":"One of the hardest-working pieces of furniture in your home, vanities offer exceptional storage and are the anchor for the overall style of the room.","thumbnail":"Floors.svg","hotspot":{"x":1.24,"y":1.05},"layer_type":"grouped"},{"name":"Shower Tile","layer_name":"Shower Tiles","description":"One of the hardest-working pieces of furniture in your home, vanities offer exceptional storage and are the anchor for the overall style of the room.","thumbnail":"Shower Tile.svg","hotspot":{"x":2.35,"y":1.83},"nested_layers":[{"name":"Wall Tiles","layer_name":"Shower_Wall_Tiles","thumbnail":"","layer_type":"grouped","hotspot":{"x":2.35,"y":1.83}},{"name":"Floor Tiles","layer_name":"Shower_Floor_Tiles","thumbnail":"","layer_type":"grouped","hotspot":{"x":2.31,"y":1.15}}]},{"name":"Storage","layer_name":"Floating_Shelves","description":"One of the hardest-working pieces of furniture in your home, vanities offer exceptional storage and are the anchor for the overall style of the room.","thumbnail":"Storage.svg","hotspot":{"x":3.03,"y":1.86},"nested_layers":[{"name":"Floating Shelves","layer_name":"Floating_Shelves","thumbnail":"","layer_type":"grouped","hotspot":{"x":3.03,"y":1.86}},{"name":"Linen Closets","layer_name":"Linen_Closets","thumbnail":"","layer_type":"grouped","hotspot":{"x":-0.01,"y":1.57}}]}]}'),te=(i(3210),function(){function t(t,e,i){var n=this;this.mainContainer=t,this.HOLDER=e,this.CONTAINER=document.createElement("div"),this.CONTAINER.classList.add("room-title__container","active"),this.ROOM_TITLE=document.createElement("h1"),this.ROOM_TITLE.innerText="";var r=document.createElement("div");r.classList.add("room-title__subtitle"),this.description=document.createElement("p"),this.type="Primary bathroom",this.price=24e3;var o=document.createElement("div");o.classList.add("info-btn"),o.onclick=function(){n.mainContainer.dispatchEvent(new CustomEvent("activate-summary"))},r.appendChild(this.description),r.appendChild(o),this.CONTAINER.appendChild(this.ROOM_TITLE),this.CONTAINER.appendChild(r),this.HOLDER.appendChild(this.CONTAINER)}var e=t.prototype;return e.setTitle=function(t){this.ROOM_TITLE.innerText=t},e.updatePrice=function(t){this.price=t.split("-")[0].trim(),this.updateDescription()},e.updateType=function(t){this.type=t,this.updateDescription()},e.updateDescription=function(){this.description.innerText="".concat(this.type," • Est ").concat(this.price)},e.hide=function(){this.CONTAINER.classList.remove("active")},e.show=function(){this.CONTAINER.classList.add("active")},t}()),ee=function(){function t(t,e,i){this.mainContainer=t,this.HOLDER=e,this.API=i,this.CONTAINER=document.createElement("div"),this.CONTAINER.classList.add("summary-panel"),this.HOLDER.appendChild(this.CONTAINER),this.currentPricing="$8,200-$12,800",this.currentLeadTime="2-3 weeks"}var e=t.prototype;return e.createBody=function(t){this.BODY=document.createElement("div"),this.BODY.className="summary__body",this.BODY.addEventListener("scroll",this.scrollAnimation.bind(this)),t.appendChild(this.BODY)},e.reset=function(){void 0!==this.CONTAINER&&(this.CONTAINER.replaceChildren(),this.CONTAINER.classList.remove("active"),this.createCancelHeader(this.CONTAINER),this.createBody(this.CONTAINER),this.createHeader(this.BODY))},e.create=function(t){this.reset(),this.show(),this.createRoomDetails(),this.createPrice(),this.createProductDetails(),this.createSaveButton()},e.updatePrice=function(t,e){this.currentPricing=t,this.currentLeadTime=e,void 0!==this.PRICE&&(this.PRICE.innerText=t),void 0!==this.PRICE&&(this.PRICE.innerText=e),this.reset()},e.createRoomDetails=function(){var t=document.createElement("div");t.classList.add("details-container"),[{id:1,item:"Room",description:"Primary bathroom"},{id:2,item:"Layout",description:"Separate tub & shower"},{id:3,item:"Size",description:"108 sq ft"},{id:4,item:"Package",description:"Sausalito"},{id:5,item:"Design offering",description:"Design modification"}].forEach((function(e){var i=document.createElement("div");i.classList.add("item-detail");var n=document.createElement("p");n.classList.add("left");var r=document.createElement("p");r.classList.add("right"),n.innerText=e.item,r.innerText=e.description,i.appendChild(n),i.appendChild(r),t.appendChild(i)})),this.BODY.appendChild(t)},e.createPrice=function(){var t=document.createElement("div");t.classList.add("details-container");var e=document.createElement("div");e.classList.add("item-detail"),e.classList.add("price");var i=document.createElement("p");i.classList.add("left");var n=document.createElement("p");n.classList.add("right"),i.innerText="Est. materials price",n.innerText=this.currentPricing,e.appendChild(i),e.appendChild(n),t.appendChild(e);var r=document.createElement("div");r.classList.add("item-detail"),r.classList.add("price");var o=document.createElement("p");o.classList.add("left");var s=document.createElement("p");s.classList.add("right"),o.innerText="Est. lead time",s.innerText=this.currentLeadTime,r.appendChild(o),r.appendChild(s),t.appendChild(r),this.BODY.appendChild(t)},e.createProductDetails=function(){var t=this.getDataItem();console.log("API",t);var e=[{id:1,name:"Your materials",itemCount:t.length,items:t}],i=document.createElement("div");i.classList.add("products-container"),e.forEach((function(t){var e=document.createElement("div");e.classList.add("product-detail");var n=document.createElement("div");n.classList.add("product-detail__header"),n.onclick=function(){e.classList.contains("active")?e.classList.remove("active"):e.classList.add("active")};var r=document.createElement("div");r.classList.add("product-detail__body");var o=document.createElement("p");o.classList.add("set-name"),o.innerText=t.name;var s=document.createElement("p");s.classList.add("set-price"),s.innerText="".concat(t.itemCount," items"),n.appendChild(o),n.appendChild(s),t.items.forEach((function(t){var e=document.createElement("div");e.classList.add("item_list");var i=document.createElement("div");i.classList.add("left");var n=document.createElement("img");n.classList.add("image"),n.src=t.imgUrl;var o=document.createElement("p");o.innerText=t.name,i.appendChild(n),i.appendChild(o);var s=document.createElement("div");s.classList.add("right");var a=document.createElement("p");a.innerText="".concat(t.qty,"x"),s.appendChild(a),e.appendChild(i),e.appendChild(s),r.appendChild(e)})),e.appendChild(n),e.appendChild(r),i.appendChild(e)})),this.BODY.appendChild(i)},e.createSaveButton=function(){var t=this,e=document.createElement("button");e.classList.add("save-button"),e.innerText="Save your design",e.onclick=function(){t.mainContainer.dispatchEvent(new CustomEvent("save-design"))},this.BODY.appendChild(e)},e.createHeader=function(t){var e=document.createElement("h1");e.innerText="Summary",t.appendChild(e)},e.createCancelHeader=function(t){var e=this,i=document.createElement("p");i.innerText="Summary";var n=document.createElement("div");n.classList="made-logo-dark";var r=document.createElement("div");r.className="cancel_icon",this.CANCEL_HEADER=document.createElement("div"),this.CANCEL_HEADER.className="summary__cancel-header",this.CANCEL_HEADER.appendChild(i),this.CANCEL_HEADER.appendChild(r),this.CANCEL_HEADER.appendChild(n),r.onclick=function(){e.mainContainer.dispatchEvent(new CustomEvent("hide-summary",{}))},t.appendChild(this.CANCEL_HEADER)},e.scrollAnimation=function(t){t.target.scrollTop>35?this.CANCEL_HEADER.classList.add("scrolled"):this.CANCEL_HEADER.classList.remove("scrolled")},e.getDataItem=function(){var t=Jt.Q,e=this.API.getSummary().items;return console.log(this.API.getSummary()),t.map((function(t){return{name:t.name,qty:t.nested_layers?t.nested_layers.length:1,imgUrl:t.nested_layers?e.filter((function(e){return e.type===t.nested_layers[0].layer_name}))[0].thumbnail:e.filter((function(e){return e.type===t.layer_name}))[0].thumbnail}}))},e.show=function(){this.CONTAINER.classList.add("active")},e.hide=function(){this.CONTAINER.classList.remove("active")},t}(),ie=function(){function t(t,e,i,n){this.HOLDER=e,this.PARENT=t,this.ITEMS=i,this.CONTAINER=document.createElement("div"),this.CONTAINER.classList.add("radio-menu"),this.OPTIONS=document.createElement("div"),this.OPTIONS.classList.add("radio-menu___options"),this.CONTAINER.appendChild(this.OPTIONS),this.HOLDER.appendChild(this.CONTAINER),this.setSelected(n)}var e=t.prototype;return e.clearOptions=function(){void 0!==this.OPTIONS&&this.OPTIONS.replaceChildren()},e.buildOptions=function(){var t=this;this.clearOptions();for(var e=function(e){var i=document.createElement("div");i.classList.add("radio-menu___option"),t.SELECTED_INDEX===e&&i.classList.add("active"),t.SELECTED_INDEX!==e&&(i.onclick=function(){t.setSelected(e)});var n=document.createElement("div");if(n.classList.add("selector"),t.ITEMS[e].imgUrl){var r=document.createElement("img");n.appendChild(r)}else{var o=document.createElement("div");o.classList.add("dot"),n.appendChild(o)}var s=document.createElement("p");s.classList.add("selector-text"),s.innerText=t.ITEMS[e].value,i.appendChild(n),i.appendChild(s),t.OPTIONS.appendChild(i)},i=0;i<this.ITEMS.length;i++)e(i)},e.setSelected=function(t){this.SELECTED_INDEX=t,this.buildOptions()},t}(),ne=function(){function t(t,e,i){this.mainContainer=t,this.HOLDER=e,this.API=i,this.CONTAINER=document.createElement("div"),this.CONTAINER.classList.add("product-info-panel"),this.HOLDER.appendChild(this.CONTAINER)}var e=t.prototype;return e.reset=function(){void 0!==this.CONTAINER&&(this.CONTAINER.replaceChildren(),this.CONTAINER.classList.remove("active"),this.createCancelHeader(this.CONTAINER))},e.create=function(t){this.reset(),this.show(),this.createInfoContent(),this.createSpecSheet()},e.createCancelHeader=function(){var t=document.createElement("div");this.CANCEL_HEADER=document.createElement("div"),this.CANCEL_HEADER.className="product__canel-header",this.CANCEL_HEADER.appendChild(t),t.onclick=this.hide.bind(this),this.CONTAINER.appendChild(this.CANCEL_HEADER)},e.createInfoContent=function(){var t={title:"Kai",description:"This sculptural, contemporary floating vanity features an offset vessel sink and plenty of countertop space for tools, jars, and anything else you need in the bathroom. The cabinet is made from solid maple or chestnut hardwood, with a vast drawer that seamlessly fits into the wave texture of the sides of the unit. Pull out the drawer to reveal an enormous storage space, ready to be organized however you see fit. To top it all off is the luxurious quartz counter in a striking dark shade.",size:[{value:'30" double sink'},{value:'40" double sink',selected:!0},{value:'30" double sink'}],finishes:[{value:"Natural Teak",selected:!0,imgUrl:""},{value:"Brown Reclaimed Wood",imgUrl:""}],price:1200,brand:"Avanity"},e=document.createElement("div");e.classList.add("content");var i=document.createElement("div");i.classList.add("header-container");var n=document.createElement("h2");n.innerText=t.title;var r=document.createElement("p");r.innerText=t.description;var o=document.createElement("p");o.classList.add("read-more"),o.innerText="Read More",i.appendChild(n),i.appendChild(r),i.appendChild(o);var s=document.createElement("div");s.classList.add("image-container");var a=document.createElement("div");s.appendChild(a);var c=document.createElement("div");c.classList.add("details-container"),t.size&&c.appendChild(this.buildList("Size",t.size)),t.finishes&&c.appendChild(this.buildList("Finishes",t.finishes)),t.price&&c.appendChild(this.buildList("Prices","$".concat(t.price.toLocaleString()))),t.brand&&c.appendChild(this.buildList("Brand",t.brand)),e.appendChild(i),e.appendChild(s),e.appendChild(c),this.CONTAINER.appendChild(e)},e.buildList=function(t,e){var i=document.createElement("div");i.classList.add("list");var n=document.createElement("p");if(n.innerText=t,i.appendChild(n),Array.isArray(e)){var r=e.findIndex((function(t){return t.selected}));new ie(this,i,e,r)}else{var o=document.createElement("p");o.classList.add("value-text"),o.innerText=e,i.appendChild(o)}return i},e.createSpecSheet=function(){var t=document.createElement("div");t.classList.add("spec-sheet-container"),this.SPEC_SHEET=document.createElement("p"),this.SPEC_SHEET.classList.add("spec-sheet"),t.appendChild(this.SPEC_SHEET),this.SPEC_SHEET.innerText="Specification Sheet",t.appendChild(this.SPEC_SHEET),this.CONTAINER.appendChild(t)},e.show=function(){this.CONTAINER.classList.add("active")},e.hide=function(){this.CONTAINER.classList.remove("active")},t}(),re=function(){function t(t,e,i){var n=this;this.mainContainer=t,this.HOLDER=e,this.API=i,this.roomTitle="Primary",this.CONTAINER=document.createElement("div"),this.CONTAINER.classList.add("info-summary__container"),this.CONTAINER.classList.add("active"),this.ROOM_TITLE=document.createElement("h1"),this.ROOM_TITLE.innerText=this.roomTitle;var r=document.createElement("div");r.classList.add("info-btn"),r.onclick=function(){n.mainContainer.dispatchEvent(new CustomEvent("activate-summary"))},this.SUMMARY_LIST_CONTAINER=document.createElement("div"),this.SUMMARY_LIST_CONTAINER.classList.add("summary-list__container");var o=document.createElement("div");o.classList.add("summary-list");var s=document.createElement("p");s.class="summary-list__item type",s.innerText="Est. materials price",this.SUMMARY_PRICE=document.createElement("p"),this.SUMMARY_PRICE.class="summary-list__item",this.SUMMARY_PRICE.innerText="",o.appendChild(s),o.appendChild(this.SUMMARY_PRICE),this.SUMMARY_LIST_CONTAINER.appendChild(o);var a=document.createElement("div");a.classList.add("summary-list");var c=document.createElement("p");c.class="summary-list__item type",c.innerText="Est. lead time",this.SUMMARY_LEAD_TIME=document.createElement("p"),this.SUMMARY_LEAD_TIME.class="summary-list__item",this.SUMMARY_LEAD_TIME.innerText="",a.appendChild(c),a.appendChild(this.SUMMARY_LEAD_TIME),this.SUMMARY_LIST_CONTAINER.appendChild(a);var l=document.createElement("button");l.classList.add("info-summary__button"),l.innerText="Continue",l.onclick=function(){n.mainContainer.dispatchEvent(new CustomEvent("activate-summary"))},this.CONTAINER.appendChild(this.ROOM_TITLE),this.CONTAINER.appendChild(r),this.CONTAINER.appendChild(this.SUMMARY_LIST_CONTAINER),this.CONTAINER.appendChild(l),this.HOLDER.appendChild(this.CONTAINER)}var e=t.prototype;return e.updatePrice=function(t,e){this.currentPricing=t,this.currentLeadTime=e,void 0!==this.PRICE&&(this.PRICE.innerText=t),void 0!==this.SUMMARY_LEAD_TIME&&(this.SUMMARY_LEAD_TIME.innerText=e)},e.setRoomTitle=function(t){this.roomTitle=t,this.ROOM_TITLE.innerText=this.roomTitle},e.show=function(){this.CONTAINER.classList.add("active")},e.hide=function(){this.CONTAINER.classList.remove("active")},t}(),oe=function(t,e,i){var n=this;this.mainContainer=t,this.HOLDER=e,this.API=i,this.BACK_ICON=document.createElement("div"),this.BACK_ICON.className="screen_back_btn",this.BACK_ICON.onclick=function(){n.mainContainer.dispatchEvent(new CustomEvent("hide-summary",{}))},this.MADE_LOGO=document.createElement("div"),this.MADE_LOGO.className="made-logo",this.HOLDER.appendChild(this.BACK_ICON),this.HOLDER.appendChild(this.MADE_LOGO)},se=function(){function t(t,e,i,n){var r=this;this.mainContainer=t,this.CONTAINER=e,this.API=i,this.UI_CONTROLLER=n,this.ROOM_SIZE="medium",this.roomSizePricing={otherMaterials:{small:4193,medium:4436,large:5895},tiles:{small:{showerWall:20,showerFloor:5,floor:60,vanityWall:30},medium:{showerWall:20,showerFloor:5,floor:60,vanityWall:30},large:{showerWall:20,showerFloor:5,floor:60,vanityWall:30}}},this.roundToNearest=500,this.leadTime=0,this.PRICING={primaryMaterials:0,tiles:0,otherMaterials:0,buildingMaterials:0,procurementFees:0,totalLow:0,totalHigh:0,total:0},this.mainContainer.addEventListener("config-update",(function(t){r.calculateRoomPricing()}))}var e=t.prototype;return e.getRoundedPricing=function(){var t=this.PRICING.totalLow.toLocaleString("en-US"),e=this.PRICING.totalHigh.toLocaleString("en-US");return"$".concat(t," - $").concat(e)},e.calculateRoomPricing=function(){var t=this.roundToNearest;this.PRICING.otherMaterials=this.roomSizePricing.otherMaterials[this.ROOM_SIZE];var e=this.roomSizePricing.tiles[this.ROOM_SIZE],i=this.API.layers,n=0,r=0,o=0;i.forEach((function(t){var i=t.activeItem,s=t.get("file_path");void 0!==i.get("price")&&("Shower_Wall_Tiles"===s||"Shower_Floor_Tiles"===s||"Floors"===s||"Shower_Wall_Tiles"===s?r+=parseFloat(i.get("price"))*e.showerWall:n+=parseFloat(i.get("price")));var a=i.get("leadTimeDays");void 0!==a&&parseInt(a)>o&&(o=a)})),this.leadTime=o,this.PRICING.primaryMaterials=n,this.PRICING.tiles=r,this.PRICING.buildingMaterials=.04*this.PRICING.primaryMaterials,this.PRICING.procurementFees=.02*this.PRICING.primaryMaterials,this.PRICING.total=this.PRICING.primaryMaterials+this.PRICING.tiles+this.PRICING.otherMaterials+this.PRICING.buildingMaterials+this.PRICING.procurementFees,this.PRICING.totalLow=Math.round(this.PRICING.total/t)*t,this.PRICING.totalHigh=Math.round(1.15*this.PRICING.total/t)*t,this.updatePricing()},e.updatePricing=function(){var t=this.getRoundedPricing(),e="".concat(Math.ceil(this.leadTime/7),"-").concat(Math.ceil(this.leadTime/7)+1," weeks");this.UI_CONTROLLER.INFO_SUMMARY.SUMMARY_PRICE.innerText=t,this.UI_CONTROLLER.INFO_SUMMARY.SUMMARY_LEAD_TIME.innerText=e,this.UI_CONTROLLER.ITEM_MENU.updatePrice(t,e),this.UI_CONTROLLER.ROOM_TITLE.updatePrice(t),this.UI_CONTROLLER.INFO_SUMMARY.updatePrice(t,e),this.UI_CONTROLLER.SUMMARY_PANEL.updatePrice(t,e)},t}();function ae(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}var ce=function(){function t(t){this.API=t,this.MAIN_CONTAINER=document.querySelector("onfigr"),this.camera={"4-piece":[.810225651880699,1.5827982974824453]},this.hotspots=[],this.UI_ENABLED="true"===this.MAIN_CONTAINER.getAttribute("enable-ui"),this.addEventListeners(),this.set=!0,this.uiContainer=document.createElement("div"),this.uiContainer.classList.add("ui-container"),this.MAIN_CONTAINER.appendChild(this.uiContainer),this.preLoadBuild()}var e=t.prototype;return e.preLoadBuild=function(){var t=this.API,e=this.MAIN_CONTAINER;this.INFO_SUMMARY=new re(e,this.uiContainer,t),this.ROOM_TITLE=new te(e,this.uiContainer,t)},e.build=function(){var t=this.API,e=this.MAIN_CONTAINER;this.MENU_BAR=new Ht(e,this.uiContainer,t),this.PRICING_CONTROLLER=new se(e,this.uiContainer,t,this),this.SCREEN_ICONS=new oe(e,this.uiContainer,t),this.ITEM_MENU=new Kt(e,this.uiContainer,t),this.SUMMARY_PANEL=new ee(e,this.uiContainer,t),this.PRODUCT_INFO_PANEL=new ne(e,this.uiContainer,t),this.PRICING_CONTROLLER.calculateRoomPricing(),Jt.Q?this.MENU_BAR.updateLayers(t.listLayers,Jt.Q):this.MENU_BAR.updateLayers(t.listLayers)},e.addEventListeners=function(){var t=this;this.UI_ENABLED&&this.MAIN_CONTAINER.addEventListener("hotspot-click",(function(e){var i=e.detail;t.API.panoViewer.setRotationTarget(i.hotspotTheta,i.hotspotPhi);var n=t.hotspots[t.hotspots.findIndex((function(t){return t.name===e.detail.hotspotId}))].id;t.setActiveHotspot(e.detail.hotspotId),Jt.Q[n].nested_layers?t.updateMenu(!0,n,e.detail.hotspotId):(n=t.API.layers.findIndex((function(t){return t.attributes.file_path===e.detail.hotspotId})),t.API.layers[n].setActive(),t.updateMenu(!1,n)),t.API.CONTAINER.main.classList.add("menu-open"),t.ROOM_TITLE.hide(),t.SUMMARY_PANEL.hide(),t.INFO_SUMMARY.hide(),t.MENU_BAR.show()})),this.MAIN_CONTAINER.addEventListener("scene-data-loaded",(function(){t.setCameraPosition(),t.observer=new MutationObserver(t.mutatationCallback.bind(t)),t.observer.observe(t.MAIN_CONTAINER,{attributes:!0}),t.UI_ENABLED&&(t.build(),t.setCameraPosition()),t.addHotspots()})),this.MAIN_CONTAINER.addEventListener("activate-layer",(function(e){if(e.detail.isNested||t.API.layers[e.detail.layerIndex].setActive(),t.updateMenu(e.detail.isNested,e.detail.layerIndex),t.ROOM_TITLE.hide(),t.SUMMARY_PANEL.hide(),t.INFO_SUMMARY.hide(),t.API.CONTAINER.main.classList.add("menu-open"),e.detail.isNested){var i=Jt.Q[e.detail.layerIndex];i.hotspot&&t.API.panoViewer.setRotationTarget(i.hotspot.x,i.hotspot.y)}})),this.MAIN_CONTAINER.addEventListener("menu-closed",(function(e){t.ROOM_TITLE.show(),t.MENU_BAR.onMenuClose(),t.INFO_SUMMARY.show(),t.API.CONTAINER.main.classList.remove("menu-open")})),this.MAIN_CONTAINER.addEventListener("change-applied",(function(){t.MENU_BAR.showResetButton()})),this.MAIN_CONTAINER.addEventListener("set-menu-edited",(function(){t.MENU_BAR.setActiveItemAsEdited()})),this.MAIN_CONTAINER.addEventListener("refresh-config",(function(){t.resetConfig()})),this.MAIN_CONTAINER.addEventListener("hide-summary",(function(e){t.SUMMARY_PANEL.hide(),t.MENU_BAR.show(),t.ROOM_TITLE.show(),t.SCREEN_ICONS.BACK_ICON.classList.remove("active")})),this.MAIN_CONTAINER.addEventListener("active-product-info",(function(e){t.PRODUCT_INFO_PANEL.create()})),this.MAIN_CONTAINER.addEventListener("item-selected",(function(e){t.ROOM_TITLE.ROOM_TITLE.innerText="","Wall Lights"===e.detail.itemLayer.attributes.name?t.lightingItem=e.detail.itemLayer.activeItem:"Mirrors"===e.detail.itemLayer.attributes.name?t.forceMirrorLighting(e.detail.itemLayer.activeItem):"Vanity"===e.detail.itemLayer.attributes.name&&t.lightingItem&&t.setLightingPlacement(t.lightingItem)})),this.API.loadData()},e.setLightingPlacement=function(t){for(var e=this.API.layers.find((function(t){return"Wall Lights"===t.attributes.name})),i=0;i<e.items.length;i++){var n=e.items[i];if(!n.disabled&&!1!==n.visibility&&"Blank"!==n.get("name")&&n.get("name")===t.get("name")&&n.get("placement")===t.get("placement")&&n.get("colour")===t.get("colour")){n.setActive();break}}e.items.forEach((function(e,i){e.disabled||!1===e.visibility||"Blank"!==e.get("name")&&e.get("name")===t.get("name")&&e.get("placement")===t.get("placement")&&e.get("colour")===t.get("colour")&&e.setActive()}))},e.openMenu=function(t){this.MENU_BAR.manualClick(t)},e.setRoomName=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;t&&(this.roomName=t),this.INFO_SUMMARY.setRoomTitle(this.roomName),this.ROOM_TITLE.updateType(this.roomName)},e.setDesignName=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;t&&(this.designName=t),this.ROOM_TITLE.setTitle(this.designName)},e.resetConfig=function(){this.setRoomName(),this.setDesignName(),this.API.setConfiguration(this.API.getDefaultConfig()),this.MENU_BAR.clearEdited(),this.MENU_BAR.hideResetButton()},e.setActiveHotspot=function(t){this.activeHotspot&&this.activeHotspot.classList.remove("active"),this.activeHotspot=this.MAIN_CONTAINER.querySelector('[id="hotspot_'.concat(t,'"]')),this.activeHotspot&&this.activeHotspot.classList.add("active")},e.updateMenu=function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(e){var r=[];Jt.Q[i].nested_layers.forEach((function(e){var i=t.API.layers.findIndex((function(t){return e.layer_name===t.attributes.file_path}));r.push({name:e.layer_name,items:t.API.layers[i].items,layerIndex:i,layerType:e.layer_type,hotspot:e.hotspot,layerName:e.name})})),this.ITEM_MENU.createNested({layerType:"nested",layerName:Jt.Q[i].name,layerDescription:Jt.Q[i].description,nestedLayers:r,selectedLayer:n})}else if(Jt.Q){var o=Jt.Q.find((function(e){return t.API.layers[i].attributes.file_path===e.layer_name}));this.ITEM_MENU.create({layerType:o.layer_type,layerName:o.name,layerDescription:o.description,items:this.API.layers[i].items,layerIndex:i})}else{var s=this.API.activeLayer;this.ITEM_MENU.create({layerType:s.LAYER_TYPE,layerDescription:s.attributes.description,layerName:s.attributes.name,items:s.items,layerIndex:s.attributes.order})}},e.setCameraPosition=function(){var t;null===(t=this.API.panoViewer)||void 0===t||t.setRotation(this.camera[this.API.scene][0],this.camera[this.API.scene][1])},e.addHotspots=function(){var t=this;this.hotspots=[],Jt.Q.forEach((function(e,i){e.nested_layers?e.nested_layers.forEach((function(e){if(e.hotspot){if(void 0!==e.hotspot.show&&!e.hotspot.show)return;t.API.addHotspot(e.layer_name,e.hotspot.x,e.hotspot.y),t.hotspots.push({id:i,name:e.layer_name,isNested:!0})}})):(t.API.addHotspot(e.layer_name,e.hotspot.x,e.hotspot.y),t.hotspots.push({id:i,name:e.layer_name}))}))},e.forceMirrorLighting=function(t){var e=this,i=[],n=[],r=[],o=[],s=[],a=[],c=[],l=this.API.layers.find((function(t){return"Wall Lights"==t.attributes.name}));l.items.forEach((function(h){var u=h.attributes.index;n.includes(t.attributes.index)?u>=c[0]&&u<=c[1]?(h.visibility=!1,h.hidden=!1):(h.visibility=!0,h.hidden=!0,e.setNearestLighting(h,l.activeItem)):i.includes(t.attributes.index)&&(u>=s[0]&&u<=s[1]?(h.visibility=!1,h.hidden=!1):u>=r[0]&&u<=r[1]&&(h.visibility=!0,h.hidden=!0,e.setNearestLighting(h,l.activeItem)),u>=a[0]&&u<=a[1]?(h.visibility=!1,h.hidden=!1):u>=o[0]&&u<=o[1]&&(h.visibility=!0,h.hidden=!0,e.setNearestLighting(h,l.activeItem)))}))},e.setNearestLighting=function(t,e){t.get("name")===e.get("name")&&!0===t.visibility&&(e.get("colour")==t.get("colour")&&"Ceiling"==t.get("placement")&&"Ceiling"==e.get("placement")||e.get("colour")==t.get("colour")&&"Side"==t.get("placement"))&&(t.setActive(),this.lightingItem=t)},e.startApp=function(){this.preLoadBuild(),this.build(),this.addHotspots()},e.trearDown=function(){this.uiContainer.innerHTML="",this.API.CONTAINER.main.classList.remove("menu-open")},e.mutatationCallback=function(t,e){var i,n=function(t,e){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=function(t,e){if(t){if("string"==typeof t)return ae(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?ae(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var n=0,r=function(){};return{s:r,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,a=!1;return{s:function(){i=i.call(t)},n:function(){var t=i.next();return s=t.done,t},e:function(t){a=!0,o=t},f:function(){try{s||null==i.return||i.return()}finally{if(a)throw o}}}}(t);try{for(n.s();!(i=n.n()).done;){var r=i.value;"attributes"===r.type&&"enable-ui"===r.attributeName&&("false"===r.target.attributes["enable-ui"].value?this.trearDown():this.startApp())}}catch(t){n.e(t)}finally{n.f()}},t}(),le=function(){function t(t,e){var i=this;this.data={},this.itemsBySku={},this.configurator=t,this.controller=e,this.configurator.CONTAINER.main.addEventListener("scene-data-loaded",(function(){i.buildLocalLookup(),Object.keys(i.data).length>0&&i.dataImport(i.data)}))}var e=t.prototype;return e.buildLocalLookup=function(){for(var t=[],e=0;e<this.configurator.allLayers.length;e+=1){var i=this.configurator.allLayers[e];if(i.items)for(var n=i.items,r=0;r<n.length;r+=1){var o=n[r],s=o.get("product_code");void 0===s?t.push("name: ".concat(o.get("name")," | id: ").concat(o.get("id"))):void 0!==this.itemsBySku[s]?this.itemsBySku[s].push(o):this.itemsBySku[s]=[o]}}t.length>0&&console.warn(t)},e.dataImport=function(t){var e=this;this.data=t;var i=[];if(console.log("itemslength",Object.keys(this.itemsBySku).length),Object.keys(this.itemsBySku).length>0&&t.forEach((function(t){var n=e.itemsBySku[t.sku];void 0===n?i.push("name: ".concat(t.name,"} | id: ").concat(t.sku)):n.forEach((function(e){var i=void 0!==t.price?t.price:null,n=void 0!==t.leadTimeByDay?parseInt(t.leadTimeByDay):null,r=void 0!==t.thumbnail&&t.thumbnail;e.set("price",i),e.set("leadTimeDays",n),!1!==r&&e.set("thumbnail",thumbnail),!0!==t.available&&!1!==t.available||e.set("unavailable",!t.available),!0!==t.disabled&&!1!==t.disabled||e.set("disabled",!t.disabled)}))})),this.controller.UIController.PRICING_CONTROLLER.calculateRoomPricing(),i.length>0)return i},t}();function he(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function ue(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?he(Object(i),!0).forEach((function(e){de(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):he(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function de(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var pe=function(){function t(t){var e=this;this.IS_DEBUG=t.isDebug,1==this.IS_DEBUG&&(console.log(),console.log(t)),t.fullscreen={},t.fullscreen.hideMenu=!0,t.fullscreen.enabled=!0,t.isDebug=!1,t.configStringBase=336,t.filters=[],t.gestureHandling={container:document.getElementById("gesture-hinter"),enabledZoom:!0,enabledRotate:!0,enabledZoomFullscreen:!0,enabledZoomRotate:!0};var i=document.querySelector("onfigr");new Gt({config:"",configStringBase:336,isDebug:!0,gestureHandling:{mode:"greedy",container:document.getElementById("gesture-hinter"),enabledZoom:!1,enabledRotate:!0,enabledZoomFullscreen:!1,enabledRotateFullscreen:!0,enabledZoomRotate:!1,hinterMessageZoom:"Use ctrl + scroll to zoom",hinterMessageTouch:"Use two fingers to look around",rotationScalar:500,touchZoomDelta:25},filters:[["vanity","double_vanity"],["faucet_2","single"]]}),this.UIController=new ce(i.api),this.DataController=new le(i.api,this),i.api.setSkuPricesLeadTime=function(t){return e.DataController.dataImport(t)},i.api.setRoomName=function(t){e.UIController.setRoomName(t)},i.api.setDesignName=function(t){e.UIController.setDesignName(t)},i.api.getSummary=function(){var t=i.api.getActiveElements(),e=[];return i.api.layers.forEach((function(t){var i=t.activeItem;e.push(ue(ue(ue(ue({type:t.get("name"),name:i.get("name"),sku:i.get("product_code"),thumbnail:i.get("thumbnail"),price:i.get("price")},i.get("pattern")&&{pattern:i.get("pattern")}),i.get("placement")&&{placement:i.get("placement")}),i.get("size")&&{size:i.get("size")}),i.get("qty")&&{quantity:i.get("qty")}))})),{previewImage:t.previewImage,items:e}},i.api.openPanel=function(t){var i=t.toLowerCase();if(Jt.Q.findIndex((function(t){return t.name.toLowerCase()===i}))>-1)return e.UIController.openMenu(i),!0;throw new Error("Panel ".concat(i," not an available panel"))},i.api.getLayerViableItems=function(t){var n,r=i.api.findLayerByName(t);if(!r)return"Please enter valid layer name";if(!r.items||0===(null===(n=r.items)||void 0===n?void 0:n.lenght))return"There are no items in the layer";var o=e.getItemSummary(r.activeItem),s=[];return r.items.forEach((function(t){!t.disabled&&t.visibility&&t.get("product_code")&&s.push(e.getItemSummary(t))})),{activeItem:o,viableItems:s}}}var e=t.prototype;return e.getItemSummary=function(t){return ue(ue(ue(ue(ue({name:t.get("name"),sku:t.get("product_code"),thumbnail:t.get("thumbnail"),price:t.get("price")},t.get("type")&&{type:t.get("type")}),t.get("pattern")&&{pattern:t.get("pattern")}),t.get("placement")&&{placement:t.get("placement")}),t.get("size")&&{size:t.get("size")}),t.get("qty")&&{quantity:t.get("qty")})},e.getConfigurator=function(){return this.CONFIGURATOR},t}(),me=function(){function t(t){this.CONTROLLER=new pe(t);var e=document.querySelector("onfigr");null!==e.getAttribute("room-name")&&e.api.setRoomName(e.getAttribute("room-name")),null!==e.getAttribute("design-name")&&e.api.setDesignName(e.getAttribute("design-name"))}return t.prototype.getViewer=function(){return this.CONTROLLER.getConfigurator()},t}();function fe(t){return new me(t)}t.closest||(t.closest=function(t){for(var e=this;e&&1===e.nodeType;){if(e.matches(t))return e;e=e.parentNode}return null}),e.prepend&&r.prepend&&o.prepend||(e.prepend=r.prepend=o.prepend=function(){var t=window.Array.prototype.slice.call(arguments),e=window.document.createDocumentFragment();t.forEach((function(t){var i=t instanceof window.Node;e.appendChild(i?t:document.createTextNode(window.String(t)))})),this.insertBefore(e,this.firstChild)}),document.contains=(0,s.getPolyfill)(),fe({})}(),n}()}));